import{r as m,a as Rt,u as Ct,R as B,M as At,L as kt,b as Ot,P as H,S as Tt,c as Dt,d as Lt,D as Ge,C as xe,e as Xe,A as Je,f as Ze,T as Ke,X as et,g as tt,h as rt,i as Y,j as Ft,k as st,l as qt,m as ge,N as Mt,n as ye,o as Q,p as $t,F as Ht,q as Ut,I as Qt,s as ve,t as Wt,v as it,w as be,x as nt,H as zt,y as Bt,z as Yt,B as Vt,E as Gt}from"./vendor.9239ca42.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))i(n);new MutationObserver(n=>{for(const a of n)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function s(n){const a={};return n.integrity&&(a.integrity=n.integrity),n.referrerPolicy&&(a.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?a.credentials="include":n.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(n){if(n.ep)return;n.ep=!0;const a=s(n);fetch(n.href,a)}})();var at={exports:{}},X={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xt=m,Jt=Symbol.for("react.element"),Zt=Symbol.for("react.fragment"),Kt=Object.prototype.hasOwnProperty,er=Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tr={key:!0,ref:!0,__self:!0,__source:!0};function ot(r,t,s){var i,n={},a=null,l=null;s!==void 0&&(a=""+s),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(l=t.ref);for(i in t)Kt.call(t,i)&&!tr.hasOwnProperty(i)&&(n[i]=t[i]);if(r&&r.defaultProps)for(i in t=r.defaultProps,t)n[i]===void 0&&(n[i]=t[i]);return{$$typeof:Jt,type:r,key:a,ref:l,props:n,_owner:er.current}}X.Fragment=Zt;X.jsx=ot;X.jsxs=ot;at.exports=X;var e=at.exports,lt,Le=Rt;lt=Le.createRoot,Le.hydrateRoot;function rr({menuItems:r=[]}){const t=Ct(),[s,i]=B.useState(!1);return e.jsxs(e.Fragment,{children:[e.jsx("nav",{className:"bg-white shadow-sm fixed w-full top-0 left-0 z-50",children:e.jsx("div",{className:"px-4 py-3",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>i(!s),className:"lg:hidden text-gray-600 hover:text-gray-900",children:e.jsx(At,{className:"w-6 h-6"})}),e.jsx("span",{className:"text-xl font-bold text-purple-600",children:"apristo admin"})]})})})}),e.jsx("aside",{className:`
        fixed top-0 left-0 z-40 w-64 h-screen pt-20 bg-white border-r border-gray-200 
        transition-transform duration-300 ease-in-out
        ${s?"translate-x-0":"-translate-x-full lg:translate-x-0"}
      `,children:e.jsx("div",{className:"h-full px-3 py-4 overflow-y-auto",children:e.jsx("ul",{className:"space-y-2",children:r.map((n,a)=>e.jsx("li",{children:e.jsxs(kt,{to:n.path,className:`
                    flex items-center p-3 rounded-lg hover:bg-gray-100
                    ${t.pathname===n.path?"bg-purple-50 text-purple-600":"text-gray-600"}
                  `,children:[n.icon,e.jsx("span",{className:"ml-3",children:n.label})]})},a))})})})]})}function F({children:r,title:t,description:s}){const i=[{icon:e.jsx(Ot,{className:"w-5 h-5"}),label:"Dashboard",path:"/admin"},{icon:e.jsx(H,{className:"w-5 h-5"}),label:"Products",path:"/admin/products"},{icon:e.jsx(Tt,{className:"w-5 h-5"}),label:"Settings",path:"/admin/settings"}];return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(rr,{menuItems:i}),e.jsxs("main",{className:"p-4 lg:p-6 lg:ml-64 pt-20",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:t}),s&&e.jsx("p",{className:"text-gray-600",children:s})]}),r]})]})}function sr({label:r,value:t,icon:s,color:i}){return e.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:`${i} text-white p-3 rounded-lg`,children:s}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:r}),e.jsx("p",{className:"text-2xl font-semibold",children:t})]})]})})}const ir="https://vsigxyrcnfwhschhtluf.supabase.co",nr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InZzaWd4eXJjbmZ3aHNjaGh0bHVmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQ2NDE1MDEsImV4cCI6MjA1MDIxNzUwMX0.4MY1pdr48oH2pV7RRaRoTDe1JjN6v8mx_24hgqJZztI";let ce=null;function ar(){return ce||(ce=Dt(ir,nr,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storageKey:"apristo_auth_token"}})),ce}const f=ar();function or(){const[r,t]=m.useState({totalProducts:0,totalCategories:0,averagePrice:0}),[s,i]=m.useState(!0);if(m.useEffect(()=>{async function a(){try{const{count:l,error:o}=await f.from("products").select("*",{count:"exact",head:!0}).eq("is_archived",!1);if(o)throw o;const{data:c,error:u}=await f.rpc("get_active_categories_count");if(u)throw u;const{data:d,error:p}=await f.from("price_ranges").select("product_id, price").order("min_quantity",{ascending:!0}).limit(1);if(p)throw p;const h=new Map;d==null||d.forEach(x=>{(!h.has(x.product_id)||x.price<h.get(x.product_id))&&h.set(x.product_id,x.price)});const g=Array.from(h.values()),y=g.length>0?g.reduce((x,v)=>x+v,0)/g.length:0;t({totalProducts:l||0,totalCategories:c||0,averagePrice:y||0})}catch(l){console.error("Error loading stats:",l)}finally{i(!1)}}a()},[]),s)return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[1,2,3].map(a=>e.jsx("div",{className:"animate-pulse bg-white p-6 rounded-lg shadow-sm h-32"},a))});const n=[{label:"Total Products",value:r.totalProducts,icon:e.jsx(H,{className:"w-6 h-6"}),color:"bg-blue-500"},{label:"Total Categories",value:r.totalCategories,icon:e.jsx(Lt,{className:"w-6 h-6"}),color:"bg-green-500"},{label:"Average Price",value:new Intl.NumberFormat("en-TZ",{style:"currency",currency:"TZS",minimumFractionDigits:0,maximumFractionDigits:0}).format(r.averagePrice),icon:e.jsx(Ge,{className:"w-6 h-6"}),color:"bg-purple-500"}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:n.map((a,l)=>e.jsx(sr,{...a},l))})}const ct=r=>r.map(t=>{var s;return{id:t.id,name:t.name,description:t.description,category:t.category,minOrder:t.min_order,isArchived:t.is_archived,priceRanges:t.price_ranges.map(i=>({minQuantity:i.min_quantity,maxQuantity:i.max_quantity,price:i.price})),images:t.product_images.map(i=>i.image_url),specifications:((s=t.product_specifications)==null?void 0:s.map(i=>i.specification))||[]}}),J=r=>new Intl.NumberFormat("en-TZ",{style:"currency",currency:"TZS",minimumFractionDigits:0}).format(r),lr=r=>`${r.minQuantity} - ${r.maxQuantity} pieces`;async function cr(r){var i;const{data:t,error:s}=await f.from("products").select(`
      id,
      name,
      description,
      category,
      min_order,
      is_archived,
      price_ranges (min_quantity, max_quantity, price),
      product_images (image_url),
      product_specifications (specification)
    `).eq("id",r).single();if(s){const n=await getDataProvider();if(!("from"in n)){const a=await n.getProductById(r);if(a)return a}throw s}return{id:t.id,name:t.name,description:t.description,category:t.category,minOrder:t.min_order,isArchived:t.is_archived,priceRanges:t.price_ranges.map(n=>({minQuantity:n.min_quantity,maxQuantity:n.max_quantity,price:n.price})),images:t.product_images.map(n=>n.image_url),specifications:((i=t.product_specifications)==null?void 0:i.map(n=>n.specification))||[]}}async function dr(r){var t,s,i;try{const{data:{user:n},error:a}=await f.auth.getUser();if(a||!n)throw console.error("Authentication error:",a),new Error("You must be logged in to create products");const{data:l,error:o}=await f.from("user_roles").select("role").eq("user_id",n.id).single();if(o)throw console.error("Role check error:",o),new Error("Failed to verify permissions");if(!l||!["ADMIN","EDITOR"].includes(l.role))throw new Error("You do not have permission to create products");const c=crypto.randomUUID(),u=new Date().toISOString(),{error:d}=await f.from("products").insert({id:c,name:r.name,description:r.description,category:r.category,min_order:r.minOrder||1,is_archived:!1});if(d)throw console.error("Product creation error:",d),new Error("Failed to create product: "+d.message);if(((t=r.images)==null?void 0:t.length)>0){const{error:p}=await f.from("product_images").insert(r.images.map((h,g)=>({product_id:c,image_url:h,display_order:g})));if(p)throw console.error("Image insertion error:",p),await f.from("products").delete().eq("id",c),new Error("Failed to add product images: "+p.message)}if(((s=r.priceRanges)==null?void 0:s.length)>0){const{error:p}=await f.from("price_ranges").insert(r.priceRanges.map(h=>({product_id:c,min_quantity:h.minQuantity,max_quantity:h.maxQuantity,price:h.price})));if(p)throw console.error("Price ranges insertion error:",p),await f.from("products").delete().eq("id",c),new Error("Failed to add price ranges: "+p.message)}if(((i=r.specifications)==null?void 0:i.length)>0){const{error:p}=await f.from("product_specifications").insert(r.specifications.map(h=>({product_id:c,specification:h})));if(p)throw console.error("Specifications insertion error:",p),await f.from("products").delete().eq("id",c),new Error("Failed to add specifications: "+p.message)}return{id:c,success:!0}}catch(n){console.error("Product creation failed:",n);let a="Failed to create product";throw n instanceof Error&&(a=n.message,n.message.includes("duplicate key")?a="A product with this ID already exists":n.message.includes("permission denied")?a="You do not have permission to create products":n.message.includes("violates foreign key constraint")&&(a="Invalid product data")),new Error(a)}}async function ur(r,t){var u;const{data:{user:s}}=await f.auth.getUser();if(!s)throw new Error("Unauthorized");const{error:i}=await f.from("products").update({name:t.name,description:t.description,category:t.category,min_order:t.minOrder}).eq("id",r);if(i)throw i;const{error:n}=await f.from("product_images").delete().eq("product_id",r);if(n)throw n;const{error:a}=await f.from("price_ranges").delete().eq("product_id",r);if(a)throw a;const{error:l}=await f.from("product_specifications").delete().eq("product_id",r);if(l)throw l;const{error:o}=await f.from("product_images").insert(t.images.map((d,p)=>({id:crypto.randomUUID(),product_id:r,image_url:d,display_order:p})));if(o)throw o;const{error:c}=await f.from("price_ranges").insert(t.priceRanges.map(d=>({id:crypto.randomUUID(),product_id:r,min_quantity:d.minQuantity,max_quantity:d.maxQuantity,price:d.price})));if(c)throw c;if((u=t.specifications)!=null&&u.length){const{error:d}=await f.from("product_specifications").insert(t.specifications.map(p=>({id:crypto.randomUUID(),product_id:r,specification:p})));if(d)throw d}return{id:r}}async function dt(r){const{error:t}=await f.from("products").delete().eq("id",r);if(t)throw t}async function ut(r,t){const{error:s}=await f.from("products").update({is_archived:t}).eq("id",r);if(s)throw s}const Fe=[{id:"550e8400-e29b-41d4-a716-446655440000",name:'Premium 4K Smart TV 55"',priceRanges:[{minQuantity:1,maxQuantity:5,price:899999},{minQuantity:6,maxQuantity:20,price:849999}],category:"ELECTRONICS",images:["https://images.unsplash.com/photo-1593784991095-a205069470b6?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1509281373149-e957c6296406?auto=format&fit=crop&q=80&w=1000"],description:'55" Premium 4K Smart TV with HDR, built-in streaming apps, and voice control',specifications:["4K Ultra HD Resolution","Smart TV Features","HDR Support","Voice Control","Multiple HDMI Ports"],minOrder:1},{id:"6ba7b810-9dad-11d1-80b4-00c04fd430c8",name:"Smart Air Conditioner",priceRanges:[{minQuantity:1,maxQuantity:3,price:749999},{minQuantity:4,maxQuantity:10,price:699999}],category:"HOME APPLIANCES",images:["https://images.unsplash.com/photo-1614633833026-0820552978b6?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1624926272725-02fbb4c652cd?auto=format&fit=crop&q=80&w=1000"],description:"Smart inverter air conditioner with WiFi control and energy-saving features",specifications:["WiFi Control","Energy Saving Mode","Smart Temperature Control","Timer Function","Sleep Mode"],minOrder:1},{id:"7c9e6679-7425-40de-944b-e07fc1f90ae7",name:"Luxury Skincare Set",priceRanges:[{minQuantity:1,maxQuantity:10,price:129999},{minQuantity:11,maxQuantity:50,price:119999}],category:"BEAUTY",images:["https://images.unsplash.com/photo-1570554886111-e80fcca6a029?auto=format&fit=crop&q=80&w=1000","https://images.unsplash.com/photo-1556228578-0d85b1a4d571?auto=format&fit=crop&q=80&w=1000"],description:"Premium skincare set including cleanser, toner, serum, and moisturizer",specifications:["All Natural Ingredients","Suitable for All Skin Types","Paraben Free","Dermatologically Tested"],minOrder:1}];async function pr(){try{const{data:r,error:t}=await f.auth.getSession();return t&&t.message!=="Auth session missing!"?(console.error("Connection check failed:",t),!1):!0}catch(r){return r instanceof Error?console.error("Connection check failed:",r.message):console.error("Connection check failed with unknown error"),!1}}const de=16;function Z(){const[r,t]=m.useState([]),[s,i]=m.useState(!1),[n,a]=m.useState(null),[l,o]=m.useState(0),[c,u]=m.useState(1),[d,p]=m.useState(""),[h,g]=m.useState("all"),[y,x]=m.useState(!0),v=m.useCallback(async()=>{if(!s)try{i(!0),a(null);let j=f.from("products").select(`
          id,
          name,
          description,
          category,
          min_order,
          is_archived,
          product_images (
            image_url,
            display_order
          ),
          price_ranges (
            min_quantity,
            max_quantity,
            price
          ),
          product_specifications (
            specification
          )
        `,{count:"exact"}).eq("is_archived",!1).range((c-1)*de,c*de-1).order("created_at",{ascending:!1});h!=="all"&&(j=j.eq("category",h)),d&&(j=j.ilike("name",`%${d}%`));const{data:R,error:P,count:S}=await j;if(P)throw P;const T=ct(R||[]);t(c===1?T:b=>[...b,...T]),S!==null&&(o(S),x(c*de<S))}catch(j){console.error("Error loading products:",j),a("Failed to load products"),x(!1)}finally{i(!1)}},[c,h,d]);return m.useEffect(()=>{v()},[v]),m.useEffect(()=>{u(1),t([]),x(!0),a(null)},[h,d]),{products:r,loading:s,error:n,totalCount:l,currentPage:c,setCurrentPage:u,searchQuery:d,setSearchQuery:p,selectedCategory:h,setSelectedCategory:g,hasMore:y}}function pt(r){const[t,s]=m.useState(null),[i,n]=m.useState(!0),[a,l]=m.useState(null);async function o(){try{n(!0);const c=await cr(r);s(c),l(null)}catch(c){l("Failed to load product"),console.error("Error loading product:",c)}finally{n(!1)}}return m.useEffect(()=>{r&&o()},[r]),{product:t,loading:i,error:a,reloadProduct:o}}function hr(){const{products:r,loading:t}=Z(),s=r.slice(0,5);return t?e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(i=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},i))})}):s.length===0?e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsxs("div",{className:"text-center text-gray-500",children:[e.jsx(H,{className:"w-12 h-12 mx-auto mb-4 text-gray-400"}),e.jsx("p",{className:"text-lg",children:"No products added yet"}),e.jsx("p",{className:"text-sm mt-2",children:"Products will appear here once added"})]})}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(xe,{className:"w-5 h-5 text-purple-600"}),e.jsx("h2",{className:"text-lg font-semibold",children:"Recently Added Products"})]})}),e.jsx("div",{className:"divide-y divide-gray-200",children:s.map(i=>{var n;return e.jsx("div",{className:"p-4 hover:bg-gray-50",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"h-12 w-12 flex-shrink-0",children:e.jsx("img",{src:i.images[0],alt:i.name,className:"h-12 w-12 rounded-lg object-cover"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:i.name}),e.jsx("p",{className:"text-sm text-gray-500",children:i.category})]}),e.jsx("div",{className:"text-sm font-medium text-purple-600",children:(n=i.priceRanges)!=null&&n[0]?J(i.priceRanges[0].price):"N/A"})]})},i.id)})})]})}function mr(){return e.jsxs(F,{title:"Dashboard",description:"Welcome to your admin dashboard",children:[e.jsx(or,{}),e.jsx(hr,{})]})}function fr({products:r,loading:t,onRefresh:s,onEdit:i}){const[n,a]=m.useState(null),[l,o]=m.useState(null),c=async d=>{if(confirm("Are you sure you want to delete this product?"))try{a(d),await dt(d),s()}catch(p){console.error("Error deleting product:",p),alert("Failed to delete product")}finally{a(null)}},u=async(d,p)=>{try{o(d),await ut(d,!p),s()}catch(h){console.error("Error archiving product:",h),alert("Failed to update product status")}finally{o(null)}};return t?e.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(d=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},d))})}):e.jsx("div",{className:"bg-white rounded-lg shadow-sm overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-[800px] w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-[35%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),e.jsx("th",{className:"w-[20%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),e.jsx("th",{className:"w-[15%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),e.jsx("th",{className:"w-[15%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Min Qty"}),e.jsx("th",{className:"w-[15%] px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(d=>{var p;return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:"h-10 w-10 flex-shrink-0",children:e.jsx("img",{className:"h-10 w-10 rounded-lg object-cover",src:d.images[0],alt:d.name})}),e.jsx("div",{className:"ml-4",children:e.jsx("div",{className:"text-sm font-medium text-gray-900 truncate max-w-[250px]",children:d.name})})]})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap",children:e.jsx("span",{className:"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800",children:d.category})}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:(p=d.priceRanges)!=null&&p[0]?J(d.priceRanges[0].price):"N/A"}),e.jsx("td",{className:"px-4 py-3 whitespace-nowrap text-sm text-gray-500",children:d.minOrder}),e.jsxs("td",{className:"px-4 py-3 whitespace-nowrap text-right text-sm font-medium",children:[e.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",onClick:()=>i(d),title:"Edit product",children:e.jsx(Xe,{className:"w-4 h-4"})}),e.jsx("button",{className:"ml-3 text-orange-600 hover:text-orange-900",onClick:()=>u(d.id,d.isArchived),disabled:l===d.id,title:d.isArchived?"Restore product":"Archive product",children:d.isArchived?e.jsx(Je,{className:"w-4 h-4"}):e.jsx(Ze,{className:"w-4 h-4"})}),e.jsx("button",{className:"ml-3 text-red-600 hover:text-red-900",onClick:()=>c(d.id),disabled:n===d.id,title:"Delete product",children:e.jsx(Ke,{className:"w-4 h-4"})})]})]},d.id)})})]})})})}const V={phone:"+255 753 025 298",whatsapp:"+61426614490"},we="1-3 hours",he=["Groceries"];function L({label:r,children:t}){return e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:r}),t]})}function qe({index:r,required:t=!1,defaultValues:s}){const i=r===1?"1":"2",n=t?"":" (optional)";return e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsx("input",{type:"number",name:`minQuantity${i}`,placeholder:`Min Quantity${n}`,required:t,defaultValue:s==null?void 0:s.minQuantity,className:"p-2 border rounded-lg"}),e.jsx("input",{type:"number",name:`maxQuantity${i}`,placeholder:`Max Quantity${n}`,required:t,defaultValue:s==null?void 0:s.maxQuantity,className:"p-2 border rounded-lg"}),e.jsx("input",{type:"number",name:`price${i}`,placeholder:`Price${n}`,required:t,defaultValue:s==null?void 0:s.price,className:"p-2 border rounded-lg"})]})}function ht({onClose:r,onSuccess:t,product:s}){var u,d;const[i,n]=m.useState(!1),[a,l]=m.useState(null);m.useRef(null);const o={name:(s==null?void 0:s.name)||"",description:(s==null?void 0:s.description)||"",category:(s==null?void 0:s.category)||he[0],minOrder:(s==null?void 0:s.minOrder)||1,images:((u=s==null?void 0:s.images)==null?void 0:u.join(`
`))||"",specifications:((d=s==null?void 0:s.specifications)==null?void 0:d.join(`
`))||""},c=async p=>{if(p.preventDefault(),i)return;const h=new FormData(p.currentTarget);n(!0),l(null);try{const g=h.get("name"),y=h.get("description"),x=h.get("category"),v=parseInt(h.get("minOrder"))||1,j=h.get("images").split(`
`).map(E=>E.trim()).filter(E=>E.length>0),R=parseFloat(h.get("price1")),P=parseInt(h.get("minQuantity1")),S=parseInt(h.get("maxQuantity1"));if(!(g!=null&&g.trim()))throw new Error("Product name is required");if(!(y!=null&&y.trim()))throw new Error("Product description is required");if(!x)throw new Error("Category is required");if(j.length===0)throw new Error("At least one image URL is required");if(j.filter(E=>!E.match(/^https?:\/\/.+/)).length>0)throw new Error("Please enter valid image URLs (must start with http:// or https://)");if(isNaN(R)||R<=0)throw new Error("Please enter a valid price for the first range");if(isNaN(P)||P<1)throw new Error("Minimum quantity must be at least 1");if(isNaN(S)||S<=P)throw new Error("Maximum quantity must be greater than minimum quantity");const b=[{minQuantity:P,maxQuantity:S,price:R}],_=parseFloat(h.get("price2")),C=parseInt(h.get("minQuantity2")),D=parseInt(h.get("maxQuantity2"));if(!isNaN(_)&&!isNaN(C)&&!isNaN(D)){if(_<=0)throw new Error("Second range price must be greater than 0");if(C<=S)throw new Error("Second range minimum quantity must be greater than first range maximum");if(D<=C)throw new Error("Second range maximum quantity must be greater than its minimum");b.push({minQuantity:C,maxQuantity:D,price:_})}const De={name:g.trim(),description:y.trim(),category:x,minOrder:v,images:j,priceRanges:b,specifications:h.get("specifications").split(`
`).map(E=>E.trim()).filter(E=>E.length>0)};if(s)await ur(s.id,De);else{const E=await dr(De);if(!(E!=null&&E.success))throw new Error("Failed to create product. Please try again.")}t(),r()}catch(g){const y=g instanceof Error?g.message:"An unexpected error occurred";console.error("Form submission error:",g),l(y)}finally{n(!1)}};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsx("div",{className:"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-xl font-semibold",children:s?"Edit Product":"Add New Product"}),e.jsx("button",{onClick:r,className:"text-gray-500 hover:text-gray-700",children:e.jsx(et,{className:"w-6 h-6"})})]}),a&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg mb-6",children:a}),e.jsxs("form",{onSubmit:c,className:"space-y-6",children:[e.jsx(L,{label:"Product Name",children:e.jsx("input",{type:"text",name:"name",required:!0,defaultValue:o.name,className:"w-full p-2 border rounded-lg"})}),e.jsx(L,{label:"Description",children:e.jsx("textarea",{name:"description",required:!0,defaultValue:o.description,rows:3,className:"w-full p-2 border rounded-lg"})}),e.jsx(L,{label:"Category",children:e.jsx("select",{name:"category",required:!0,defaultValue:o.category,className:"w-full p-2 border rounded-lg",children:he.map(p=>e.jsx("option",{value:p,children:p},p))})}),e.jsx(L,{label:"Image URLs (one per line)",children:e.jsx("textarea",{name:"images",required:!0,defaultValue:o.images,rows:3,className:"w-full p-2 border rounded-lg",placeholder:`https://example.com/image1.jpg
https://example.com/image2.jpg`})}),e.jsx(L,{label:"Minimum Order",children:e.jsx("input",{type:"number",name:"minOrder",required:!0,min:"1",defaultValue:o.minOrder,className:"w-full p-2 border rounded-lg"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium",children:"Price Ranges"}),e.jsx(qe,{index:1,required:!0,defaultValues:s==null?void 0:s.priceRanges[0]}),e.jsx(qe,{index:2,defaultValues:s==null?void 0:s.priceRanges[1]})]}),e.jsx(L,{label:"Specifications (one per line)",children:e.jsx("textarea",{name:"specifications",rows:3,defaultValue:o.specifications,className:"w-full p-2 border rounded-lg",placeholder:`4K Resolution
Smart Features
HDR Support`})}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{type:"button",disabled:i,onClick:r,className:"px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50",children:"Cancel"}),e.jsx("button",{type:"submit",disabled:i,className:"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50",children:i?"Saving...":s?"Update Product":"Create Product"})]})]})]})})})}function xr({currentPage:r,totalPages:t,onPageChange:s}){const i=Array.from({length:t},(a,l)=>l+1),n=()=>t<=5?i:r<=3?[...i.slice(0,5),"...",t]:r>=t-2?[1,"...",...i.slice(-5)]:[1,"...",r-1,r,r+1,"...",t];return e.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[e.jsx("button",{onClick:()=>s(r-1),disabled:r===1,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(tt,{className:"w-5 h-5"})}),n().map((a,l)=>e.jsx("button",{onClick:()=>typeof a=="number"?s(a):null,disabled:a==="...",className:`
            min-w-[40px] h-10 px-4 rounded-lg border 
            ${a===r?"bg-purple-600 text-white border-purple-600":"border-gray-300 hover:bg-gray-50"}
            ${a==="..."?"cursor-default":""}
          `,children:a},l)),e.jsx("button",{onClick:()=>s(r+1),disabled:r===t,className:"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:e.jsx(rt,{className:"w-5 h-5"})})]})}function gr(){const[r,t]=m.useState(!1),[s,i]=m.useState(null),{products:n,loading:a,error:l,totalPages:o,currentPage:c,setCurrentPage:u,searchQuery:d,setSearchQuery:p,reloadProducts:h}=Z(),g=v=>{i(v),t(!0)},y=()=>{t(!1),i(null)},x=v=>{v.preventDefault(),u(1)};return e.jsxs(F,{title:"Products",description:"Manage your product catalog",children:[e.jsxs("div",{className:"flex justify-between items-center mb-8",children:[e.jsxs("form",{onSubmit:x,className:"relative w-96",children:[e.jsx("input",{type:"text",value:d,onChange:v=>p(v.target.value),placeholder:"Search products...",className:"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500"}),e.jsx(Y,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"})]}),e.jsxs("button",{onClick:()=>t(!0),className:"bg-purple-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-purple-700",children:[e.jsx(Ft,{className:"w-5 h-5"}),"Add Product"]})]}),l&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg mb-6",children:l}),e.jsx(fr,{products:n,loading:a,onEdit:g,onRefresh:h}),o>1&&e.jsx("div",{className:"mt-8",children:e.jsx(xr,{currentPage:c,totalPages:o,onPageChange:u})}),r&&e.jsx(ht,{product:s,onClose:y,onSuccess:()=>{y(),h()}})]})}function yr({product:r,onEdit:t,onRefresh:s}){const[i,n]=B.useState(!1),[a,l]=B.useState(!1),o=async()=>{if(confirm("Are you sure you want to delete this product?"))try{n(!0),await dt(r.id),s()}catch(u){console.error("Error deleting product:",u),alert("Failed to delete product")}finally{n(!1)}},c=async()=>{try{l(!0),await ut(r.id,!r.isArchived),s()}catch(u){console.error("Error archiving product:",u),alert("Failed to update product status")}finally{l(!1)}};return e.jsxs("div",{className:"flex gap-4 mt-8 border-t pt-8",children:[e.jsxs("button",{onClick:()=>t(r),className:"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[e.jsx(Xe,{className:"w-4 h-4"}),"Edit Product"]}),e.jsx("button",{onClick:c,disabled:a,className:"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:r.isArchived?e.jsxs(e.Fragment,{children:[e.jsx(Je,{className:"w-4 h-4"}),"Restore Product"]}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{className:"w-4 h-4"}),"Archive Product"]})}),e.jsxs("button",{onClick:o,disabled:i,className:"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[e.jsx(Ke,{className:"w-4 h-4"}),"Delete Product"]})]})}function mt({images:r,productName:t}){const[s,i]=m.useState(0),n=()=>{i(l=>l===r.length-1?0:l+1)},a=()=>{i(l=>l===0?r.length-1:l-1)};return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-square overflow-hidden rounded-lg",children:e.jsx("img",{src:r[s],alt:`${t} - Image ${s+1}`,className:"w-full h-full object-cover"})}),e.jsx("button",{onClick:a,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70",children:e.jsx(tt,{className:"w-6 h-6"})}),e.jsx("button",{onClick:n,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70",children:e.jsx(rt,{className:"w-6 h-6"})}),e.jsx("div",{className:"flex gap-2 mt-4",children:r.map((l,o)=>e.jsx("button",{onClick:()=>i(o),className:`w-16 h-16 rounded-md overflow-hidden border-2 transition-colors
              ${s===o?"border-purple-600":"border-transparent"}`,children:e.jsx("img",{src:l,alt:`${t} - Thumbnail ${o+1}`,className:"w-full h-full object-cover"})},o))})]})}function ft({priceRanges:r}){return e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-6",children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Price Ranges"}),r.map((t,s)=>e.jsxs("div",{className:"flex justify-between py-2 border-b last:border-0",children:[e.jsx("span",{children:lr(t)}),e.jsx("span",{className:"font-semibold",children:J(t.price)})]},s))]})}function xt({specifications:r}){return e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-3",children:"Specifications"}),e.jsx("ul",{className:"list-disc list-inside text-gray-600",children:r.map((t,s)=>e.jsx("li",{children:t},s))})]})}function vr(){var o;const{id:r}=st(),{product:t,loading:s,error:i,reloadProduct:n}=pt(r),[a,l]=m.useState(!1);return s?e.jsx(F,{title:"Product Details",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"bg-gray-200 h-64 rounded-lg mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-2"})]})}):i||!t?e.jsx(F,{title:"Product Details",children:e.jsx("div",{className:"text-red-600",children:i||"Product not found"})}):e.jsxs(F,{title:"Product Details",description:`Managing ${t.name}`,children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:e.jsx("div",{className:"p-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{children:e.jsx(mt,{images:t.images,productName:t.name})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-800 mb-4",children:t.name}),e.jsx(ft,{priceRanges:t.priceRanges}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-600",children:["Shipping Time: ",we]}),e.jsxs("p",{className:"text-gray-600",children:["Minimum Order: ",t.minOrder," piece(s)"]}),e.jsxs("p",{className:"text-gray-600",children:["Status: ",t.isArchived?"Archived":"Active"]})]}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Product Description"}),e.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:t.description})]}),((o=t.specifications)==null?void 0:o.length)>0&&e.jsx(xt,{specifications:t.specifications}),e.jsx(yr,{product:t,onEdit:()=>l(!0),onRefresh:n})]})]})]})})}),a&&e.jsx(ht,{product:t,onClose:()=>l(!1),onSuccess:()=>{l(!1),n()}})]})}async function br(r){return new Promise(t=>setTimeout(t,r))}async function wr(r,t){const s=r==null?void 0:r.toLowerCase().trim();if(!s||!t)throw new Error("Email and password are required");try{let i=3,n;for(;i>0;){const{data:a,error:l}=await f.auth.signInWithPassword({email:s,password:t});if(l){if(n=l,i--,i>0){await br(1e3);continue}break}return a}throw new Error("An error occurred during sign in. Please try again.")}catch(i){throw console.error("Sign in error:",i),i}}async function jr(){const{error:r}=await f.auth.signOut();if(r)throw new Error("An error occurred during sign out. Please try again.")}async function Nr(){const{data:{user:r}}=await f.auth.getUser();if(!r)throw new Error("Unauthorized");const{data:t}=await f.from("user_roles").select("role").eq("user_id",r.id).single();if((t==null?void 0:t.role)!=="ADMIN")throw new Error("Unauthorized - Admin access required");const{data:s,error:i}=await f.from("user_roles").select(`
      user_id,
      role,
      users:user_id (
        email
      )
    `);if(i)throw i;return s.map(n=>({id:n.user_id,email:n.users.email,role:n.role}))}async function Er(){const{data:{user:r}}=await f.auth.getUser();if(!r)return null;const{data:t,error:s}=await f.from("user_roles").select("role").eq("user_id",r.id).single();return s?null:t.role}async function Pr(r,t){const{data:{user:s}}=await f.auth.getUser();if(!s)throw new Error("Unauthorized");const{error:i}=await f.from("user_roles").upsert({user_id:r,role:t,created_by:s.id},{onConflict:"user_id"});if(i)throw i}function Sr(){const[r,t]=m.useState([]),[s,i]=m.useState(!0),[n,a]=m.useState(null),[l,o]=m.useState(null);m.useEffect(()=>{async function d(){try{i(!0);const[p,h]=await Promise.all([Nr().catch(()=>[]),Er()]);t(p),o(h)}catch(p){a("Failed to load users"),console.error(p)}finally{i(!1)}}d()},[]);const c=async()=>{try{await jr(),window.location.href="/admin/login"}catch(d){console.error("Error signing out:",d)}},u=async(d,p)=>{try{await Pr(d,p),t(r.map(h=>h.id===d?{...h,role:p}:h))}catch(h){console.error("Error updating role:",h),alert("Failed to update user role")}};return e.jsx(F,{title:"Settings",description:"Manage your account and user permissions",children:e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Account"}),e.jsxs("button",{onClick:c,className:"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[e.jsx(qt,{className:"w-5 h-5"}),"Sign Out"]})]}),l==="ADMIN"&&e.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"User Management"}),n&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg mb-6",children:n}),s?e.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(d=>e.jsx("div",{className:"h-12 bg-gray-200 rounded"},d))}):e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),e.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),e.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(d=>e.jsxs("tr",{children:[e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d.email}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsx("span",{className:`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${d.role==="ADMIN"?"bg-purple-100 text-purple-800":"bg-green-100 text-green-800"}`,children:d.role})}),e.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:e.jsxs("select",{value:d.role,onChange:p=>u(d.id,p.target.value),className:"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm rounded-md",children:[e.jsx("option",{value:"EDITOR",children:"Editor"}),e.jsx("option",{value:"ADMIN",children:"Admin"})]})})]},d.id))})]})})]})]})})}function _r(){const[r,t]=m.useState(""),[s,i]=m.useState(""),[n,a]=m.useState(null),[l,o]=m.useState(!1),[c,u]=m.useState(null),d=ge();async function p(){try{if(!await pr()){u("Unable to connect to server");return}const{data:{session:x}}=await f.auth.getSession();if(x!=null&&x.user){d("/admin");return}u(null)}catch(y){console.error("Setup error:",y),u("Failed to connect to server")}finally{o(!1)}}m.useEffect(()=>{p()},[d]);const h=async()=>{u(null),p()};if(c)return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md w-full space-y-8 text-center",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Connection Error"}),e.jsx("p",{className:"text-gray-600 mb-6",children:c}),e.jsx("button",{onClick:h,className:"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700",children:"Retry Connection"})]})})});const g=async y=>{y.preventDefault();try{const x=r.trim();if(!x||!s){a("Please enter both email and password");return}o(!0),a(null);const{session:v}=await wr(x,s);if(v)d("/admin");else throw new Error("Failed to create session")}catch(x){const v=x instanceof Error?x.message:"Invalid email or password";a(v)}finally{o(!1)}};return e.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"max-w-md w-full space-y-8",children:e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Apristo Admin"}),n&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg text-center mt-4",children:n}),e.jsxs("form",{className:"mt-8 space-y-6",onSubmit:g,children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",className:"sr-only",children:"Email address"}),e.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:r,onChange:y=>t(y.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-purple-500 focus:border-purple-500 focus:z-10 sm:text-sm",placeholder:"Email address"})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",className:"sr-only",children:"Password"}),e.jsx("input",{id:"password",name:"password",type:"password",required:!0,value:s,onChange:y=>i(y.target.value),className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-purple-500 focus:border-purple-500 focus:z-10 sm:text-sm",placeholder:"Password"})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",disabled:l,className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50",children:l?"Signing in...":"Sign in"})})]})]})})})}function Ir(){const[r,t]=m.useState(null),[s,i]=m.useState(!0),[n,a]=m.useState(null),l=m.useCallback(async()=>{try{i(!0),a(null);const{data:{user:o},error:c}=await f.auth.getUser();if(c){if(c.name==="AuthSessionMissingError"){t(null);return}throw c}t(o)}catch(o){console.error("Error loading user:",o),a(o instanceof Error?o.message:"Failed to load user"),t(null)}finally{i(!1)}},[]);return m.useEffect(()=>{l();const{data:{subscription:o}}=f.auth.onAuthStateChange(async(c,u)=>{c==="SIGNED_IN"?t((u==null?void 0:u.user)??null):c==="SIGNED_OUT"?t(null):c==="USER_UPDATED"&&t((u==null?void 0:u.user)??null)});return()=>{o.unsubscribe()}},[l]),{user:r,loading:s,error:n,refresh:l}}function W({children:r}){const{user:t,loading:s,error:i}=Ir(),n=ge(),[a,l]=m.useState(!0),[o,c]=m.useState(!1);return m.useEffect(()=>{let u=!0;async function d(){if(!t){l(!1);return}try{const{data:h,error:g}=await f.from("user_roles").select("role").eq("user_id",t.id).single();u&&(g||!h?(console.error("Role check error:",g),c(!1)):c(["ADMIN","EDITOR"].includes(h.role)),l(!1))}catch(h){console.error("Error checking role:",h),u&&(c(!1),l(!1))}}d();const{data:{subscription:p}}=f.auth.onAuthStateChange(h=>{h==="SIGNED_OUT"&&u&&(c(!1),n("/admin/login"))});return()=>{u=!1,p.unsubscribe()}},[t,n]),s||a?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Authenticating..."})]})}):i?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm text-center",children:[e.jsx("p",{className:"text-red-500",children:i}),e.jsx("button",{onClick:()=>n("/admin/login"),className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Back to Login"})]})}):t?o?e.jsx(e.Fragment,{children:r}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-sm text-center",children:[e.jsx("p",{className:"text-red-500",children:"You do not have permission to access this area."}),e.jsx("button",{onClick:()=>n("/"),className:"mt-4 px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700",children:"Go to Homepage"})]})}):e.jsx(Mt,{to:"/admin/login",replace:!0})}/*! @license is-dom-node v1.0.4

	Copyright 2018 Fisssion LLC.

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in all
	copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	SOFTWARE.

*/function me(r){return typeof window.Node=="object"?r instanceof window.Node:r!==null&&typeof r=="object"&&typeof r.nodeType=="number"&&typeof r.nodeName=="string"}/*! @license is-dom-node-list v1.2.1

	Copyright 2018 Fisssion LLC.

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in all
	copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	SOFTWARE.

*/function Rr(r){var t=Object.prototype.toString.call(r),s=/^\[object (HTMLCollection|NodeList|Object)\]$/;return typeof window.NodeList=="object"?r instanceof window.NodeList:r!==null&&typeof r=="object"&&typeof r.length=="number"&&s.test(t)&&(r.length===0||me(r[0]))}/*! @license Tealight v0.3.6

	Copyright 2018 Fisssion LLC.

	Permission is hereby granted, free of charge, to any person obtaining a copy
	of this software and associated documentation files (the "Software"), to deal
	in the Software without restriction, including without limitation the rights
	to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
	copies of the Software, and to permit persons to whom the Software is
	furnished to do so, subject to the following conditions:

	The above copyright notice and this permission notice shall be included in all
	copies or substantial portions of the Software.

	THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
	IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
	FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
	AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
	LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
	OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
	SOFTWARE.

*/function N(r,t){if(t===void 0&&(t=document),r instanceof Array)return r.filter(me);if(me(r))return[r];if(Rr(r))return Array.prototype.slice.call(r);if(typeof r=="string")try{var s=t.querySelectorAll(r);return Array.prototype.slice.call(s)}catch{return[]}return[]}var z=Object.prototype.hasOwnProperty,gt=Object.prototype.toString,Me=Object.defineProperty,$e=Object.getOwnPropertyDescriptor,He=function(t){return typeof Array.isArray=="function"?Array.isArray(t):gt.call(t)==="[object Array]"},Ue=function(t){if(!t||gt.call(t)!=="[object Object]")return!1;var s=z.call(t,"constructor"),i=t.constructor&&t.constructor.prototype&&z.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!s&&!i)return!1;var n;for(n in t);return typeof n>"u"||z.call(t,n)},Qe=function(t,s){Me&&s.name==="__proto__"?Me(t,s.name,{enumerable:!0,configurable:!0,value:s.newValue,writable:!0}):t[s.name]=s.newValue},We=function(t,s){if(s==="__proto__")if(z.call(t,s)){if($e)return $e(t,s).value}else return;return t[s]},Cr=function r(){var t,s,i,n,a,l,o=arguments[0],c=1,u=arguments.length,d=!1;for(typeof o=="boolean"&&(d=o,o=arguments[1]||{},c=2),(o==null||typeof o!="object"&&typeof o!="function")&&(o={});c<u;++c)if(t=arguments[c],t!=null)for(s in t)i=We(o,s),n=We(t,s),o!==n&&(d&&n&&(Ue(n)||(a=He(n)))?(a?(a=!1,l=i&&He(i)?i:[]):l=i&&Ue(i)?i:{},Qe(o,{name:s,newValue:r(d,l,n)})):typeof n<"u"&&Qe(o,{name:s,newValue:n}));return o};const K=ye(Cr);var yt="Expected a function",ze=0/0,Ar="[object Symbol]",kr=/^\s+|\s+$/g,Or=/^[-+]0x[0-9a-f]+$/i,Tr=/^0b[01]+$/i,Dr=/^0o[0-7]+$/i,Lr=parseInt,Fr=typeof Q=="object"&&Q&&Q.Object===Object&&Q,qr=typeof self=="object"&&self&&self.Object===Object&&self,Mr=Fr||qr||Function("return this")(),$r=Object.prototype,Hr=$r.toString,Ur=Math.max,Qr=Math.min,ue=function(){return Mr.Date.now()};function Wr(r,t,s){var i,n,a,l,o,c,u=0,d=!1,p=!1,h=!0;if(typeof r!="function")throw new TypeError(yt);t=Be(t)||0,G(s)&&(d=!!s.leading,p="maxWait"in s,a=p?Ur(Be(s.maxWait)||0,t):a,h="trailing"in s?!!s.trailing:h);function g(b){var _=i,C=n;return i=n=void 0,u=b,l=r.apply(C,_),l}function y(b){return u=b,o=setTimeout(j,t),d?g(b):l}function x(b){var _=b-c,C=b-u,D=t-_;return p?Qr(D,a-C):D}function v(b){var _=b-c,C=b-u;return c===void 0||_>=t||_<0||p&&C>=a}function j(){var b=ue();if(v(b))return R(b);o=setTimeout(j,x(b))}function R(b){return o=void 0,h&&i?g(b):(i=n=void 0,l)}function P(){o!==void 0&&clearTimeout(o),u=0,i=c=n=o=void 0}function S(){return o===void 0?l:R(ue())}function T(){var b=ue(),_=v(b);if(i=arguments,n=this,c=b,_){if(o===void 0)return y(c);if(p)return o=setTimeout(j,t),g(c)}return o===void 0&&(o=setTimeout(j,t)),l}return T.cancel=P,T.flush=S,T}function zr(r,t,s){var i=!0,n=!0;if(typeof r!="function")throw new TypeError(yt);return G(s)&&(i="leading"in s?!!s.leading:i,n="trailing"in s?!!s.trailing:n),Wr(r,t,{leading:i,maxWait:t,trailing:n})}function G(r){var t=typeof r;return!!r&&(t=="object"||t=="function")}function Br(r){return!!r&&typeof r=="object"}function Yr(r){return typeof r=="symbol"||Br(r)&&Hr.call(r)==Ar}function Be(r){if(typeof r=="number")return r;if(Yr(r))return ze;if(G(r)){var t=typeof r.valueOf=="function"?r.valueOf():r;r=G(t)?t+"":t}if(typeof r!="string")return r===0?r:+r;r=r.replace(kr,"");var s=Tr.test(r);return s||Dr.test(r)?Lr(r.slice(2),s?2:8):Or.test(r)?ze:+r}var Vr=zr;const vt=ye(Vr);var je={exports:{}};function Ne(){}Ne.prototype={on:function(r,t,s){var i=this.e||(this.e={});return(i[r]||(i[r]=[])).push({fn:t,ctx:s}),this},once:function(r,t,s){var i=this;function n(){i.off(r,n),t.apply(s,arguments)}return n._=t,this.on(r,n,s)},emit:function(r){var t=[].slice.call(arguments,1),s=((this.e||(this.e={}))[r]||[]).slice(),i=0,n=s.length;for(i;i<n;i++)s[i].fn.apply(s[i].ctx,t);return this},off:function(r,t){var s=this.e||(this.e={}),i=s[r],n=[];if(i&&t)for(var a=0,l=i.length;a<l;a++)i[a].fn!==t&&i[a].fn._!==t&&n.push(i[a]);return n.length?s[r]=n:delete s[r],this}};je.exports=Ne;je.exports.TinyEmitter=Ne;var Gr=je.exports;const Xr=ye(Gr);var Jr={item:void 0,next:void 0,prev:void 0,pagination:void 0,responseType:"document",bind:!0,scrollContainer:window,spinner:!1,logger:!0,loadOnScroll:!0,negativeMargin:0,trigger:!1,prefill:!0},k={singleElement:function(t,s){var i=N(t);if(i.length>1)throw new Error('Expected single element for "'+s+'"');if(i.length===0)throw new Error('Element "'+t+'" not found for "'+s+'"')},anyElement:function(t,s){var i=N(t);if(i.length===0)throw new Error('Element "'+t+'" not found for "'+s+'"')},warn:function(t){for(var s=[],i=arguments.length-1;i-- >0;)s[i]=arguments[i+1];try{t.apply(void 0,s)}catch(n){console&&console.warn&&console.warn(n.message)}}};function $(r){if(r!==window)return{x:r.scrollLeft,y:r.scrollTop};var t=window.pageXOffset!==void 0,s=(document.compatMode||"")==="CSS1Compat";return{x:t?window.pageXOffset:s?document.documentElement.scrollLeft:document.body.scrollLeft,y:t?window.pageYOffset:s?document.documentElement.scrollTop:document.body.scrollTop}}function ee(r){var t;if(r!==window)t=r.getBoundingClientRect();else{var s=document.documentElement,i=document.body;t={top:0,left:0,right:s.clientWidth||i.clientWidth,width:s.clientWidth||i.clientWidth,bottom:s.clientHeight||i.clientHeight,height:s.clientHeight||i.clientHeight}}return t}function Zr(r,t,s){var i=s;if(!r)return i.height*-1;var n=t.y,a=r.getBoundingClientRect(),l=n+i.height,o=n+a.bottom-i.top;return Math.trunc(o-l)}var Ee="append",Pe="appended",bt="prepend",wt="prepended",I="binded",te="unbinded",re="hit",Se="top",jt="load",q="loaded",fe="error",_e="first",se="last",U="next",Ie="nexted",Re="prev",Ce="preved",Nt="ready",ie="scrolled",ne="resized",Et="page",Kr="prefill",es="prefilled",Ye={APPEND:Ee,APPENDED:Pe,PREPEND:bt,PREPENDED:wt,BINDED:I,UNBINDED:te,HIT:re,TOP:Se,LOAD:jt,LOADED:q,ERROR:fe,FIRST:_e,LAST:se,NEXT:U,NEXTED:Ie,PREV:Re,PREVED:Ce,READY:Nt,SCROLLED:ie,RESIZED:ne,PAGE:Et,PREFILL:Kr,PREFILLED:es},Pt={y:0,x:0,deltaY:0,deltaX:0};function St(r,t){var s=$(r);return s.deltaY=s.y-(t?t.y:s.y),s.deltaX=s.x-(t?t.x:s.x),s}function ts(){var r=this,t=r._lastScroll||Pt,s=r._lastScroll=St(r.scrollContainer,t);this.emitter.emit(ie,{scroll:s})}function rs(){var r=this,t=r._lastScroll||Pt,s=r._lastScroll=St(r.scrollContainer,t);this.emitter.emit(ne,{scroll:s})}function ss(r){var t=this,s=t._lastResponse||document.body,i=N(t.options.next,s)[0];if(!i){k.warn(k.singleElement,t.options.next,"options.next");return}var n=i.href;return t.load(n).then(function(a){s=t._lastResponse=a.xhr.response;var l=N(t.options.next,s)[0];return t.append(a.items).then(function(){return!!l}).then(function(o){return!o&&r<=1&&console&&console.warn&&console.warn('Element "'+t.options.next+'" not found for "options.next" on "'+a.url+'"'),o})})}function is(r){var t=this,s=t._prevEl||N(t.options.prev,document.body)[0];if(t.options.prev!==void 0){if(!s){k.warn(k.singleElement,t.options.prev,"options.prev");return}var i=s.href;return t.load(i).then(function(n){var a=t._prevEl=N(t.options.prev,n.xhr.response)[0];return t.prepend(n.items).then(function(){return!!a})})}}var ns={element:void 0,hide:!1};function as(r){return typeof r=="string"||typeof r=="object"&&r.nodeType===Node.ELEMENT_NODE?r={element:r,hide:!0}:typeof r=="boolean"&&(r={element:void 0,hide:r}),r}var Ae=function(t,s){this.options=K({},ns,as(s)),this.originalDisplayStyles=new WeakMap,this.options.hide&&(k.warn(k.anyElement,this.options.element,"pagination.element"),t.on(I,this.hide.bind(this)),t.on(te,this.restore.bind(this)))};Ae.prototype.hide=function(){var t=this,s=N(this.options.element);s.forEach(function(i){t.originalDisplayStyles.set(i,window.getComputedStyle(i).display),i.style.display="none"})};Ae.prototype.restore=function(){var t=this,s=N(this.options.element);s.forEach(function(i){i.style.display=t.originalDisplayStyles.get(i)||"block"})};var os={element:void 0,delay:600,show:function(r){r.style.opacity="1"},hide:function(r){r.style.opacity="0"}};function ls(r){return(typeof r=="string"||typeof r=="object"&&r.nodeType===Node.ELEMENT_NODE)&&(r={element:r}),r}var ae=function(t,s){s!==!1&&(this.ias=t,this.options=K({},os,ls(s)),this.options.element!==void 0&&k.singleElement(this.options.element,"spinner.element"),this.element=N(this.options.element)[0],this.hideFn=this.options.hide,this.showFn=this.options.show,t.on(I,this.bind.bind(this)),t.on(I,this.hide.bind(this)))};ae.prototype.bind=function(){var t,s,i,n,a=this,l=this.ias;l.on(U,function(){t=+new Date,a.show()}),l.on(se,function(){a.hide()}),l.on(Ee,function(o){s=+new Date,i=s-t,n=Math.max(0,a.options.delay-i);var c=o.appendFn.bind({});o.appendFn=function(u,d,p){return new Promise(function(h){setTimeout(function(){a.hide().then(function(){c(u,d,p),h()})},n)})}})};ae.prototype.show=function(){return Promise.resolve(this.showFn(this.element))};ae.prototype.hide=function(){return Promise.resolve(this.hideFn(this.element))};var cs={hit:function(){console.log("Hit scroll threshold")},top:function(){console.log("Hit top scroll threshold")},binded:function(){console.log("Binded event handlers")},unbinded:function(){console.log("Unbinded event handlers")},next:function(r){console.log("Next page triggered [pageIndex="+r.pageIndex+"]")},nexted:function(r){console.log("Next page completed [pageIndex="+r.pageIndex+"]")},prev:function(r){console.log("Previous page triggered [pageIndex="+r.pageIndex+"]")},preved:function(r){console.log("Previous page completed [pageIndex="+r.pageIndex+"]")},load:function(r){console.log("Start loading "+r.url)},loaded:function(){console.log("Finished loading")},append:function(){console.log("Start appending items")},appended:function(r){console.log("Finished appending "+r.items.length+" item(s)")},prepend:function(){console.log("Start prepending items")},prepended:function(r){console.log("Finished prepending "+r.items.length+" item(s)")},last:function(){console.log("No more pages left to load")},first:function(){console.log("Reached first page")},page:function(r){console.log("Page changed [pageIndex="+r.pageIndex+"]")},prefill:function(r){console.log("Start prefilling")},prefilled:function(r){console.log("Finished prefilling")}};function ds(r){return r===!0&&(r=cs),r}var us=function(t,s){if(s!==!1){var i=ds(s);Object.keys(i).forEach(function(n){t.on(n,i[n])})}};function ps(r,t,s){for(var i=ee(s),n=t+i.height,a=r.length-1;a>=0;a--){var l=r[a].sentinel.getBoundingClientRect().bottom+t;if(n>l){var o=Math.min(a+1,r.length-1);return r[o]}}return r[0]}var M=function(t){this.ias=t,this.pageBreaks=[],this.currentPageIndex=t.pageIndex,this.currentScrollTop=0,t.on(I,this.binded.bind(this)),t.on(U,this.next.bind(this)),t.on(Re,this.prev.bind(this)),t.on(ie,this.scrolled.bind(this)),t.on(ne,this.scrolled.bind(this))};M.prototype.binded=function(){var t=this.ias.sentinel();t&&this.pageBreaks.push({pageIndex:this.currentPageIndex,url:document.location.toString(),title:document.title,sentinel:this.ias.sentinel()})};M.prototype.next=function(){var t=this,s=document.location.toString(),i=document.title,n=function(a){s=a.url,a.xhr.response&&(i=a.xhr.response.title)};this.ias.once(q,n),this.ias.once(Ie,function(a){t.pageBreaks.push({pageIndex:a.pageIndex,url:s,title:i,sentinel:t.ias.sentinel()}),t.update(),t.ias.off(q,n)})};M.prototype.prev=function(){var t=this,s=document.location.toString(),i=document.title,n=function(a){s=a.url,a.xhr.response&&(i=a.xhr.response.title)};this.ias.once(q,n),this.ias.once(Ce,function(a){t.pageBreaks.unshift({pageIndex:a.pageIndex,url:s,title:i,sentinel:t.ias.first()}),t.update(),t.ias.off(q,n)})};M.prototype.scrolled=function(t){this.update(t.scroll.y)};M.prototype.update=function(t){this.currentScrollTop=t||this.currentScrollTop;var s=ps(this.pageBreaks,this.currentScrollTop,this.ias.scrollContainer);s&&s.pageIndex!==this.currentPageIndex&&(this.ias.emitter.emit(Et,s),this.currentPageIndex=s.pageIndex)};var hs={element:void 0,when:function(r){return!0},show:function(r){r.style.opacity="1"},hide:function(r){r.style.opacity="0"}};function ms(r){if((typeof r=="string"||typeof r=="function"||typeof r=="object"&&r.nodeType===Node.ELEMENT_NODE)&&(r={element:r}),typeof r.element=="function"&&(r.element=r.element()),r.when&&Array.isArray(r.when)){var t=r.when;r.when=function(s){return t.indexOf(s)!==-1}}return r}var O=function(t,s){var i=this;s!==!1&&(this.ias=t,this.options=K({},hs,ms(s)),this.options.element!==void 0&&k.singleElement(this.options.element,"trigger.element"),this.element=N(this.options.element)[0],this.hideFn=this.options.hide,this.showFn=this.options.show,this.voter=this.options.when,this.showing=void 0,this.enabled=void 0,t.on(I,this.bind.bind(this)),t.on(te,this.unbind.bind(this)),t.on(re,this.hit.bind(this)),t.on(U,function(n){return i.ias.once(Pe,function(){return i.update(n.pageIndex)})}))};O.prototype.bind=function(){this.hide(),this.update(this.ias.pageIndex),this.element.addEventListener("click",this.clickHandler.bind(this))};O.prototype.unbind=function(){this.element.removeEventListener("click",this.clickHandler.bind(this))};O.prototype.clickHandler=function(){this.hide().then(this.ias.next.bind(this.ias))};O.prototype.update=function(t){this.enabled=this.voter(t),this.enabled?this.ias.disableLoadOnScroll():this.ias.enableLoadOnScroll()};O.prototype.hit=function(){this.enabled&&this.show()};O.prototype.show=function(){if(!this.showing)return this.showing=!0,Promise.resolve(this.showFn(this.element))};O.prototype.hide=function(){if(!(!this.showing&&this.showing!==void 0))return this.showing=!1,Promise.resolve(this.hideFn(this.element))};function fs(r,t,s){var i=s?s.nextSibling:null,n=document.createDocumentFragment();r.forEach(function(a){n.appendChild(a)}),t.insertBefore(n,i)}function xs(r,t,s){var i=document.createDocumentFragment();r.forEach(function(n){i.appendChild(n)}),t.insertBefore(i,s)}var _t=window.ResizeObserver,ke=function(t,s){this.el=t,this.listener=s};ke.prototype.observe=function(){this.el.addEventListener("resize",this.listener)};ke.prototype.unobserve=function(){this.el.removeEventListener("resize",this.listener)};var Oe=function(t,s){this.el=t,this.listener=s,this.ro=new _t(this.listener)};Oe.prototype.observe=function(){this.ro.observe(this.el)};Oe.prototype.unobserve=function(){this.ro.unobserve()};var oe=function(t,s){this.el=t,this.listener=s,this.interval=null,this.lastHeight=null};oe.prototype.pollHeight=function(){var t=Math.trunc(ee(this.el).height);this.lastHeight!==null&&this.lastHeight!==t&&this.listener(),this.lastHeight=t};oe.prototype.observe=function(){this.interval=setInterval(this.pollHeight.bind(this),200)};oe.prototype.unobserve=function(){clearInterval(this.interval)};function gs(r,t){var s=vt(rs,200).bind(r);return t===window?new ke(t,s):_t?new Oe(t,s):(console&&console.warn&&console.warn("ResizeObserver not supported. Falling back on polling."),new oe(t,s))}var le=function(t,s){this.ias=t,this.enabled=s};le.prototype.prefill=function(){var t=this;if(this.enabled)return this.ias.emitter.emit(Ye.PREFILL),Promise.all([this._prefillNext(),this._prefillPrev()]).then(function(){t.ias.emitter.emit(Ye.PREFILLED),t.ias.measure()})};le.prototype._prefillNext=function(){var t=this,s=this.ias.distance();if(!(s>0))return this.ias.next().then(function(i){if(i){var n=t.ias.distance();if(n<0)return t._prefillNext()}})};le.prototype._prefillPrev=function(){if(this.ias.options.prev)return this.ias.prev()};var w=function(t,s){var i=this;s===void 0&&(s={}),k.singleElement(t,"container"),this.container=N(t)[0],this.options=K({},Jr,s),this.emitter=new Xr,this.options.loadOnScroll?this.enableLoadOnScroll():this.disableLoadOnScroll(),this.negativeMargin=Math.abs(this.options.negativeMargin),this.scrollContainer=this.options.scrollContainer,this.options.scrollContainer!==window&&(k.singleElement(this.options.scrollContainer,"options.scrollContainer"),this.scrollContainer=N(this.options.scrollContainer)[0]),this.nextHandler=ss,this.prevHandler=is,this.options.next===!1?this.nextHandler=function(){}:typeof this.options.next=="function"&&(this.nextHandler=this.options.next),this.options.prev===!1?this.prevHandler=function(){}:typeof this.options.prev=="function"&&(this.prevHandler=this.options.prev),this.resizeObserver=gs(this,this.scrollContainer),this._scrollListener=vt(ts,200).bind(this),this.ready=!1,this.bindOnReady=!0,this.binded=!1,this.paused=!1,this.pageIndexPrev=0,this.pageIndex=this.pageIndexNext=this.sentinel()?0:-1,this.on(re,function(){i.loadOnScroll&&i.next()}),this.on(Se,function(){i.loadOnScroll&&i.prev()}),this.on(ie,this.measure),this.on(ne,this.measure),this.pagination=new Ae(this,this.options.pagination),this.spinner=new ae(this,this.options.spinner),this.logger=new us(this,this.options.logger),this.paging=new M(this),this.trigger=new O(this,this.options.trigger),this.prefill=new le(this,this.options.prefill),this.on(I,this.prefill.prefill.bind(this.prefill)),this.hitFirst=this.hitLast=!1,this.on(se,function(){return i.hitLast=!0}),this.on(_e,function(){return i.hitFirst=!0});var n=function(){i.ready||(i.ready=!0,i.emitter.emit(Nt),i.bindOnReady&&i.options.bind&&i.bind())};document.readyState==="complete"||document.readyState==="interactive"?setTimeout(n,1):window.addEventListener("DOMContentLoaded",n)};w.prototype.bind=function(){this.binded||(this.ready||(this.bindOnReady=!1),this.scrollContainer.addEventListener("scroll",this._scrollListener),this.resizeObserver.observe(),this.binded=!0,this.emitter.emit(I))};w.prototype.unbind=function(){if(!this.binded){this.ready||this.once(I,this.unbind);return}this.resizeObserver.unobserve(),this.scrollContainer.removeEventListener("scroll",this._scrollListener),this.binded=!1,this.emitter.emit(te)};w.prototype.next=function(){var t=this;if(!this.hitLast){if(!this.binded)return this.ready?void 0:this.once(I,this.next);this.pause();var s=this.pageIndexNext+1;return this.emitter.emit(U,{pageIndex:this.pageIndexNext+1}),Promise.resolve(this.nextHandler(s)).then(function(i){return t.pageIndexNext=s,i||t.emitter.emit(se),t.resume(),i}).then(function(i){return t.emitter.emit(Ie,{pageIndex:t.pageIndexNext}),i})}};w.prototype.prev=function(){var t=this;if(!(!this.binded||this.hitFirst)){this.pause();var s=this.pageIndexPrev-1;return this.emitter.emit(Re,{pageIndex:this.pageIndexPrev-1}),Promise.resolve(this.prevHandler(s)).then(function(i){return t.pageIndexPrev=s,t.resume(),i||t.emitter.emit(_e),i}).then(function(i){return t.emitter.emit(Ce,{pageIndex:t.pageIndexPrev}),i})}};w.prototype.load=function(t){var s=this;return new Promise(function(i,n){var a=new XMLHttpRequest,l={url:t,xhr:a,method:"GET",body:null,nocache:!1,responseType:s.options.responseType,headers:{"X-Requested-With":"XMLHttpRequest"}};s.emitter.emit(jt,l);var o=l.url,c=l.method,u=l.responseType,d=l.headers,p=l.body;l.nocache||(o=o+(/\?/.test(o)?"&":"?")+new Date().getTime()),a.onreadystatechange=function(){if(a.readyState===XMLHttpRequest.DONE&&a.status!==0)if(a.status===200){var g=a.response;u==="document"&&(g=N(s.options.item,a.response)),s.emitter.emit(q,{items:g,url:o,xhr:a}),i({items:g,url:o,xhr:a})}else s.emitter.emit(fe,{url:o,method:c,xhr:a}),n(a)},a.onerror=function(){s.emitter.emit(fe,{url:o,method:c,xhr:a}),n(a)},a.open(c,o,!0),a.responseType=u;for(var h in d)a.setRequestHeader(h,d[h]);a.send(p)})};w.prototype.append=function(t,s){var i=this;s=s||i.container;var n={items:t,parent:s,appendFn:fs};i.emitter.emit(Ee,n);var a=function(l){window.requestAnimationFrame(function(){Promise.resolve(n.appendFn(n.items,n.parent,i.sentinel())).then(function(){l({items:t,parent:s})})})};return new Promise(a).then(function(l){i.emitter.emit(Pe,l)})};w.prototype.prepend=function(t,s){var i=this,n=this;s=s||n.container;var a={items:t,parent:s,prependFn:xs};n.emitter.emit(bt,a);var l=function(o){window.requestAnimationFrame(function(){var c=n.first(),u=$(i.scrollContainer),d=c.getBoundingClientRect().top+u.y;Promise.resolve(a.prependFn(a.items,a.parent,n.first())).then(function(){var p=$(i.scrollContainer),h=c.getBoundingClientRect().top+p.y,g=h-d;i.scrollContainer.scrollTo(p.x,g)}).then(function(){o({items:t,parent:s})})})};return new Promise(l).then(function(o){n.emitter.emit(wt,o)})};w.prototype.sentinel=function(){var t=N(this.options.item,this.container);return t.length?t[t.length-1]:null};w.prototype.first=function(){var t=N(this.options.item,this.container);return t.length?t[0]:null};w.prototype.pause=function(){this.paused=!0};w.prototype.resume=function(){this.paused=!1};w.prototype.enableLoadOnScroll=function(){this.loadOnScroll=!0};w.prototype.disableLoadOnScroll=function(){this.loadOnScroll=!1};w.prototype.distance=function(t,s){return this.distanceBottom(t,s)};w.prototype.distanceBottom=function(t,s){var i=t||ee(this.scrollContainer),n=s||this.sentinel(),a=$(this.scrollContainer),l=Zr(n,a,i);return l-=this.negativeMargin,l};w.prototype.distanceTop=function(){var t=$(this.scrollContainer);return t.y-this.negativeMargin};w.prototype.measure=function(){if(!(this.paused||this.hitFirst&&this.hitLast)){var t=ee(this.scrollContainer);if(t.height!==0){if(!this.hitFirst){var s=this.distanceTop();s<=0&&this.emitter.emit(Se,{distance:s})}if(!this.hitLast){var i=this.distanceBottom(t,this.sentinel());i<=0&&this.emitter.emit(re,{distance:i})}}}};w.prototype.on=function(t,s){this.emitter.on(t,s,this),t===I&&this.binded&&s.bind(this)()};w.prototype.off=function(t,s){this.emitter.off(t,s,this)};w.prototype.once=function(t,s){var i=this;return new Promise(function(n){i.emitter.once(t,function(){Promise.resolve(s.apply(this,arguments)).then(n)},i),t===I&&i.binded&&(s.bind(i)(),n())})};function ys({onClose:r}){const[t,s]=m.useState(""),{products:i}=Z(),[n,a]=m.useState(!1),l=i.filter(c=>!c.isArchived).filter(c=>c.name.toLowerCase().includes(t.toLowerCase())||c.description.toLowerCase().includes(t.toLowerCase())).slice(0,5),o=c=>{c.preventDefault(),t.trim()&&(a(!0),setTimeout(()=>{window.location.href=`/search?q=${encodeURIComponent(t)}`,r()},300))};return e.jsxs("div",{className:"flex-1",children:[e.jsxs("form",{onSubmit:o,className:"relative",children:[e.jsx("input",{type:"text",value:t,onChange:c=>s(c.target.value),placeholder:"Search products...",className:"w-full pl-10 pr-4 py-2 bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500",autoFocus:!0}),e.jsx(Y,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400"}),n&&e.jsx($t,{className:"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-purple-600 animate-spin"})]}),t&&e.jsx("div",{className:"mt-4 space-y-2",children:l.map(c=>e.jsxs("a",{href:`/product/${c.id}`,className:"flex items-center gap-4 p-2 hover:bg-gray-50 rounded-lg",onClick:r,children:[e.jsx("img",{src:c.images[0],alt:c.name,className:"w-12 h-12 object-cover rounded-lg"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-gray-900",children:c.name}),e.jsx("p",{className:"text-sm text-gray-500 line-clamp-1",children:c.description})]})]},c.id))})]})}function vs(){const[r,t]=m.useState(!1);return e.jsxs("header",{className:"relative",children:[e.jsx("div",{className:"bg-white shadow-sm",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"h-16 flex items-center justify-between",children:[e.jsx("div",{className:"w-[40px] md:hidden"}),e.jsx("a",{href:"/",className:"h-12",children:e.jsx("img",{src:"https://i.imgur.com/KxwIWrp.png",alt:"Apristo",className:"h-full w-auto"})}),e.jsxs("button",{onClick:()=>t(!0),className:"hidden md:flex items-center gap-2 px-4 py-2 bg-gray-50 text-gray-500 rounded-full w-[400px] hover:bg-gray-100 transition-colors",children:[e.jsx(Y,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"Search products..."})]}),e.jsx("button",{onClick:()=>t(!0),className:"md:hidden p-2 text-gray-500 hover:text-gray-700",children:e.jsx(Y,{className:"w-6 h-6"})})]})})}),r&&e.jsx("div",{className:"fixed inset-0 bg-black/30 z-50",children:e.jsx("div",{className:"container mx-auto px-4 pt-16",children:e.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl p-4",children:[e.jsx("button",{onClick:()=>t(!1),className:"absolute right-4 top-4 p-2 text-gray-400 hover:text-gray-600",children:e.jsx(et,{className:"w-6 h-6"})}),e.jsx(ys,{onClose:()=>t(!1)})]})})})]})}function pe({title:r,children:t}){return e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-lg mb-4 text-gray-100",children:r}),t]})}function bs(){return e.jsx("footer",{className:"bg-gray-900 text-gray-400",children:e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8",children:[e.jsxs("div",{children:[e.jsx("img",{src:"https://i.imgur.com/uLxDm9R.png",alt:"Apristo",className:"h-12 mb-6"}),e.jsx("p",{className:"mb-4",children:"Tanzania's premier marketplace for quality products from oversea at affordable price."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("a",{href:"#",className:"hover:text-purple-400 transition-colors",children:e.jsx(Ht,{className:"w-5 h-5"})}),e.jsx("a",{href:"#",className:"hover:text-purple-400 transition-colors",children:e.jsx(Ut,{className:"w-5 h-5"})}),e.jsx("a",{href:"https://www.instagram.com/apristoapp",className:"hover:text-purple-400 transition-colors",children:e.jsx(Qt,{className:"w-5 h-5"})})]})]}),e.jsx(pe,{title:"Contact Us",children:e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(ve,{className:"w-5 h-5 text-purple-400"}),e.jsx("span",{children:"+255 753 025 298"})]}),e.jsxs("li",{className:"flex items-center gap-3",children:[e.jsx(Wt,{className:"w-5 h-5 text-purple-400"}),e.jsx("a",{href:"mailto:info@apristo.com",className:"hover:text-purple-400 transition-colors",children:"info@apristo.com"})]}),e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(it,{className:"w-5 h-5 text-purple-400 flex-shrink-0"}),e.jsx("span",{children:"Livingstone Binsulum Plaza Ghorofa ya pili, S01 & S12"})]})]})}),e.jsx(pe,{title:"Quick Links",children:e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx("a",{href:"/about",className:"hover:text-purple-400 transition-colors",children:"About Us"})}),e.jsx("li",{children:e.jsx("a",{href:"/faq",className:"hover:text-purple-400 transition-colors",children:"FAQ"})}),e.jsx("li",{children:e.jsx("a",{href:"/terms",className:"hover:text-purple-400 transition-colors",children:"Terms & Conditions"})}),e.jsx("li",{children:e.jsx("a",{href:"/privacy",className:"hover:text-purple-400 transition-colors",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx("a",{href:"/shipping",className:"hover:text-purple-400 transition-colors",children:"Shipping Information"})})]})}),e.jsxs(pe,{title:"Newsletter",children:[e.jsx("p",{className:"mb-4",children:"Subscribe to our newsletter for updates, deals, and exclusive offers."}),e.jsxs("form",{className:"space-y-3",children:[e.jsx("input",{type:"email",placeholder:"Enter your email",className:"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-purple-400"}),e.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Subscribe"})]})]})]}),e.jsx("div",{className:"mt-12 pt-8 border-t border-gray-800 text-center",children:e.jsxs("p",{children:[" ",new Date().getFullYear()," Apristo. All rights reserved."]})})]})})}function A({children:r}){return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(vs,{}),e.jsx("main",{className:"flex-grow bg-gray-50",children:r}),e.jsx(bs,{})]})}function ws({selectedCategory:r,onSelectCategory:t}){return e.jsx("div",{className:"bg-white shadow-md",children:e.jsx("div",{className:"container mx-auto",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-1",children:[e.jsx("button",{onClick:()=>t("all"),className:`p-4 text-center hover:bg-purple-50 transition-colors
              ${r==="all"?"text-purple-600 border-b-2 border-purple-600":"text-gray-600"}`,children:"All Categories"}),he.map(s=>e.jsx("button",{onClick:()=>t(s),className:`p-4 text-center hover:bg-purple-50 transition-colors
                ${r===s?"text-purple-600 border-b-2 border-purple-600":"text-gray-600"}`,children:s},s))]})})})}function js({className:r="w-4 h-4"}){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:r,children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}function Ns({src:r,alt:t,width:s=400,height:i=300,className:n}){const a=i/s;return e.jsx("img",{src:r,alt:t,width:s,height:i,loading:"lazy",decoding:"async",style:{aspectRatio:a},className:n})}function Te({product:r}){var l,o,c;const t=ge(),s=((o=(l=r.priceRanges)==null?void 0:l[0])==null?void 0:o.price)??0,i=u=>{u.stopPropagation(),window.location.href=`tel:${V.phone}`},n=u=>{u.stopPropagation();const d=encodeURIComponent(`Hi, I'm interested in purchasing:

Product: ${r.name}
ID: ${r.id}

Please provide more information about pricing and availability.`);window.location.href=`https://wa.me/${V.whatsapp}?text=${d}`},a=()=>{window.scrollTo({top:0,behavior:"instant"}),t(`/product/${r.id}`)};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer overflow-hidden h-[300px] sm:h-[420px] mb-4 sm:mb-0 max-w-[320px] mx-auto group",children:[e.jsxs("div",{onClick:a,className:"relative h-[140px] sm:h-[250px] overflow-hidden",children:[e.jsx(Ns,{src:((c=r.images)==null?void 0:c[0])??"",alt:r.name,className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),s&&e.jsx("div",{className:"absolute bottom-2 right-2 bg-black/70 backdrop-blur-sm text-white px-3 py-1.5 rounded-full text-sm font-medium",children:J(s)}),e.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),e.jsxs("div",{onClick:a,className:"p-3 sm:p-4 flex flex-col justify-between h-[160px] sm:h-[170px] cursor-pointer",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm sm:text-lg font-medium line-clamp-2 mb-1 group-hover:text-purple-600 transition-colors",children:r.name}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-600 line-clamp-2 mb-2",children:r.description})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-1 text-xs sm:text-sm text-gray-500 mb-2",children:[e.jsx(xe,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:we})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("button",{onClick:u=>{u.stopPropagation(),i()},className:"flex-1 flex items-center justify-center gap-1 sm:gap-2 bg-purple-600 text-white px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg hover:bg-purple-700 transition-colors text-xs sm:text-sm",children:[e.jsx(ve,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"Call"})]}),e.jsxs("button",{onClick:u=>{u.stopPropagation(),n()},className:"flex-1 flex items-center justify-center gap-1 sm:gap-2 bg-[#25D366] text-white px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg hover:bg-[#22c55e] transition-colors text-xs sm:text-sm",children:[e.jsx(js,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{children:"WhatsApp"})]})]})]})]})]})}function Es({fetchProducts:r}){const[t,s]=m.useState([]),[i,n]=m.useState(!0),[a,l]=m.useState(null);return m.useEffect(()=>{(async()=>{try{const c=await r();s(c)}catch{l("Failed to load products")}finally{n(!1)}})()},[r]),i?e.jsx("p",{children:"Loading products..."}):a?e.jsx("p",{children:a}):t.length===0?e.jsx("p",{children:"No recently viewed products."}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h2",{className:"text-xl font-semibold mb-6",children:"Recently Viewed Products"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:t.map(o=>!o||!o.id||!o.name||o.price===void 0?(console.warn("Invalid product data:",o),null):e.jsx(Te,{product:o},o.id))})]})}const Ps=5;function It(){const[r,t]=m.useState([]);return{recentProducts:r,addRecentProduct:i=>{t(n=>{const a=n.filter(l=>l.id!==i.id);return[i,...a].slice(0,Ps)})}}}function Ss(){const{recentProducts:r}=It(),t=m.useRef(null),s=m.useRef(null),i=m.useRef(null),[n,a]=m.useState(!1),{products:l,loading:o,error:c,hasMore:u,currentPage:d,setCurrentPage:p,selectedCategory:h,setSelectedCategory:g}=Z();m.useEffect(()=>{let x=null;const j=setTimeout(()=>{!t.current||!s.current||t.current.querySelectorAll(".product-item").length===0&&!o||(x=new w(t.current,{item:".product-item",next:()=>new Promise(P=>{u&&!o?(p(S=>S+1),P(!0)):P(!1)}),spinner:s.current,delay:600,bind:!1,loadOnScroll:!0,logger:!1,pagination:!1}),x.on("last",()=>a(!0)),i.current=x)},100);return()=>{clearTimeout(j),i.current&&(i.current.unbind(),i.current=null)}},[]),m.useEffect(()=>{if(!l.length)return;const x=setTimeout(()=>{if(!i.current&&t.current&&s.current){const v=new w(t.current,{item:".product-item",next:()=>new Promise(j=>{u&&!o?(p(R=>R+1),j(!0)):j(!1)}),spinner:s.current,delay:600,bind:!1,loadOnScroll:!0,logger:!1,pagination:!1});v.on("last",()=>a(!0)),i.current=v}i.current&&(i.current.unbind(),u&&i.current.bind())},100);return()=>clearTimeout(x)},[l,u]);const y=x=>{i.current&&i.current.unbind(),g(x),a(!1)};return e.jsxs(A,{children:[e.jsx(ws,{selectedCategory:h,onSelectCategory:y}),e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-4",children:h==="all"?"All Products":`${h} Products`}),c&&e.jsx("div",{className:"bg-red-50 text-red-600 p-4 rounded-lg mb-6",children:"Failed to load products"}),e.jsx("div",{className:"min-h-screen",children:e.jsxs("div",{ref:t,className:"relative",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-6",children:o&&!l.length?Array.from({length:10}).map((x,v)=>e.jsxs("div",{className:"animate-pulse h-[300px] sm:h-[420px] bg-white rounded-xl overflow-hidden",children:[e.jsx("div",{className:"h-[140px] sm:h-[250px] bg-gray-200"}),e.jsxs("div",{className:"p-3 sm:p-4 space-y-3",children:[e.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]},v)):l.map(x=>e.jsx("div",{className:"product-item",children:e.jsx(Te,{product:x})},x.id))}),e.jsx("div",{ref:s,className:"loader h-20 flex items-center justify-center",children:o&&l.length>0&&!n&&e.jsx("img",{src:"/infinite.svg",alt:"Loading more products...",className:"w-8 h-8 animate-spin"})})]})}),r.length>0&&e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-6",children:"Recently Viewed"}),e.jsx(Es,{products:r})]})]})]})}function _s({className:r="w-5 h-5"}){return e.jsx("svg",{viewBox:"0 0 24 24",fill:"currentColor",className:r,children:e.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})})}function Is({productName:r,productId:t,productDescription:s}){const i=()=>{window.location.href=`tel:${V.phone}`},n=()=>{const a=encodeURIComponent(`Hi, I'm interested in purchasing:

Product: ${r}
ID: ${t}

Please provide more information about pricing and availability.`);window.location.href=`https://wa.me/${V.whatsapp}?text=${a}`};return e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[e.jsxs("button",{onClick:i,className:"flex items-center justify-center gap-3 bg-purple-600 text-white px-6 py-3 rounded-xl hover:bg-purple-700 transition-colors",children:[e.jsx(ve,{className:"w-5 h-5"}),e.jsx("span",{className:"font-medium",children:"Call Now"})]}),e.jsxs("button",{onClick:n,className:"flex items-center justify-center gap-3 bg-[#25D366] text-white px-6 py-3 rounded-xl hover:bg-[#22c55e] transition-colors",children:[e.jsx(_s,{}),e.jsx("span",{className:"font-medium",children:"WhatsApp"})]})]})}function Rs({currentProduct:r,relatedProducts:t}){return t.length===0?null:e.jsxs("div",{className:"mt-16 border-t pt-16",children:[e.jsx("h2",{className:"text-2xl font-semibold mb-8",children:"Related Products"}),e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map(s=>e.jsx(Te,{product:s},s.id))})]})}function Cs({onViewProduct:r}){var o;const{id:t}=st(),{product:s,loading:i,error:n}=pt(t),[a,l]=m.useState([]);return m.useEffect(()=>{async function c(){if(!s)return;const{data:u}=await f.from("products").select(`
          id,
          name,
          description,
          category,
          min_order,
          is_archived,
          price_ranges!inner (min_quantity, max_quantity, price),
          product_images!inner (image_url),
          product_specifications (specification)
        `).eq("category",s.category).neq("id",s.id).eq("is_archived",!1).limit(4);u&&l(ct(u))}c()},[s]),m.useEffect(()=>{async function c(){if(t)try{const{data:u,error:d}=await f.from("product_views").select("id, view_count").eq("product_id",t);if(d)throw d;if(u&&u.length>0){const{error:p}=await f.from("product_views").update({view_count:u[0].view_count+1,last_viewed_at:new Date().toISOString()}).eq("product_id",t);if(p)throw p}else{const{error:p}=await f.from("product_views").insert({product_id:t});if(p)throw p}}catch(u){console.error("Error tracking product view:",u.message||u)}}s&&(r(s),c())},[s==null?void 0:s.id]),i?e.jsx(A,{children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"animate-pulse",children:[e.jsx("div",{className:"bg-gray-200 h-64 rounded-lg mb-4"}),e.jsx("div",{className:"h-8 bg-gray-200 rounded mb-4"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3 mb-2"}),e.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]})})}):n?e.jsx(A,{children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center text-red-600",children:"Failed to load product"})})}):s?e.jsx(A,{children:e.jsxs("div",{className:"container mx-auto px-4 py-8 bg-white",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsx("div",{children:e.jsx(mt,{images:s.images,productName:s.name})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-gray-800 mb-4",children:s.name}),e.jsx(ft,{priceRanges:s.priceRanges}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("p",{className:"text-gray-600",children:["Shipping Time: ",we]}),e.jsxs("p",{className:"text-gray-600",children:["Minimum Order: ",s.minOrder," piece(s)"]})]}),e.jsx(Is,{productName:s.name,productId:s.id,productDescription:s.description}),e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold mb-3",children:"Product Description"}),e.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:s.description})]}),((o=s.specifications)==null?void 0:o.length)>0&&e.jsx(xt,{specifications:s.specifications})]})]})]}),e.jsx(Rs,{currentProduct:s,relatedProducts:a})]})}):e.jsx(A,{children:e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx("div",{className:"text-center text-gray-600",children:"Product not found"})})})}function As(){const r=[{icon:e.jsx(be,{className:"w-8 h-8 text-purple-600"}),title:"Fast Delivery",description:"Get your order delivered within 24 hours"},{icon:e.jsx(Ge,{className:"w-8 h-8 text-purple-600"}),title:"Affordable Prices",description:"We strive to offer competitive pricing on all our products"},{icon:e.jsx(nt,{className:"w-8 h-8 text-purple-600"}),title:"Top-Quality Products",description:"We carefully select only the best for our customers"},{icon:e.jsx(H,{className:"w-8 h-8 text-purple-600"}),title:"International Selection",description:"Access to premium products from around the world"}];return e.jsx(A,{children:e.jsxs("div",{className:"bg-white",children:[e.jsx("div",{className:"bg-purple-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Welcome to Apristo"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Your gateway to premium international products, delivered right to your doorstep in Africa"})]})}),e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsxs("div",{className:"prose prose-lg",children:[e.jsx("p",{className:"text-gray-600 mb-8",children:"Apristo is a dynamic marketplace committed to making high-quality international products accessible to Africans. Our mission is to bridge the gap between overseas markets and African consumers by providing fast, reliable, and affordable shipping of premium products directly to your doorstep."}),e.jsx("p",{className:"text-gray-600 mb-8",children:"At Apristo, we carefully curate our product selection to ensure that every item meets the highest standards of quality. Our goal is to offer a seamless shopping experience that empowers you to discover life-changing products without the hassle of international shipping delays."}),e.jsx("p",{className:"text-gray-600 mb-12",children:"We are more than just a marketplaceApristo is a gateway to new opportunities, helping you access goods that improve your lifestyle, health, and happiness."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8 mt-16",children:r.map((t,s)=>e.jsxs("div",{className:"p-6 bg-white border border-gray-100 rounded-xl hover:shadow-lg transition-all hover:-translate-y-1",children:[e.jsx("div",{className:"mb-4",children:t.icon}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:t.title}),e.jsx("p",{className:"text-gray-600",children:t.description})]},s))}),e.jsxs("div",{className:"text-center mt-16 p-12 bg-purple-50 rounded-2xl",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Join Us Today"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Be part of our journey as we continue to provide convenience, quality, and speed to your doorstep."}),e.jsx("a",{href:"/",className:"inline-block bg-purple-600 text-white px-8 py-3 rounded-lg hover:bg-purple-700 transition-all hover:shadow-lg hover:-translate-y-1",children:"Start Shopping"})]})]})})]})})}const ks=[{question:"What products do you offer?",answer:"We offer a wide range of high-quality international products, including electronics, fashion, beauty products, home goods, health supplements, and more. All items are curated to meet our high standards for quality and value."},{question:"How long does delivery take?",answer:"Our standard delivery time is 1-3 hours from order confirmation for most locations. We prioritize fast delivery to ensure you receive your products as quickly as possible."},{question:"What shipping methods do you use?",answer:"We use reliable local courier services that specialize in fast, same-day deliveries. This ensures your products arrive quickly and safely."},{question:"Do you deliver to my country?",answer:"Yes, we currently deliver to a wide range of African countries. Please check our shipping page for specific locations."},{question:"How do I track my order?",answer:"Once your order is dispatched, you'll receive a tracking number via email and SMS. You can use this to track your delivery in real-time."},{question:"What is your return policy?",answer:"We offer returns and exchanges within 14 days of receipt, provided the items are in original condition. Please refer to our Returns & Exchanges policy for more details."},{question:"How do I contact customer service?",answer:"You can reach our customer service team 24/7 through WhatsApp, phone, or email. We typically respond within minutes to ensure you get the help you need quickly."},{question:"Is my personal information safe with you?",answer:"Yes! We take your privacy seriously. Please review our Privacy Policy for more details on how we protect your information."}];function Os(){return e.jsx(A,{children:e.jsxs("div",{className:"bg-white",children:[e.jsx("div",{className:"bg-purple-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[e.jsx(zt,{className:"w-16 h-16 text-purple-600 mx-auto mb-6"}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Frequently Asked Questions"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Find answers to common questions about our services, shipping, and policies"})]})}),e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"space-y-8",children:ks.map((r,t)=>e.jsxs("div",{className:"bg-white border border-gray-100 rounded-xl p-6 hover:shadow-lg transition-all",children:[e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:r.question}),e.jsx("p",{className:"text-gray-600",children:r.answer})]},t))}),e.jsxs("div",{className:"mt-16 text-center p-8 bg-purple-50 rounded-2xl",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Still have questions?"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Can't find the answer you're looking for? Please contact our customer support team."}),e.jsx("a",{href:"mailto:support@apristo.com",className:"inline-block bg-purple-600 text-white px-8 py-3 rounded-lg hover:bg-purple-700 transition-all hover:shadow-lg hover:-translate-y-1",children:"Contact Support"})]})]})})]})})}const Ts=[{title:"1. General Information",content:"Apristo is a marketplace that connects customers with high-quality international products. We are committed to offering you a seamless and efficient shopping experience. By using our platform, you agree to our terms outlined in this document."},{title:"2. Account and Registration",content:"To place an order with Apristo, you must register an account. You are responsible for maintaining the confidentiality of your account and password."},{title:"3. Orders and Payment",content:"All orders placed on Apristo are subject to availability. We accept multiple payment methods, including credit cards and mobile payments. Orders will not be processed until payment is confirmed."},{title:"4. Shipping and Delivery",content:"We aim to deliver all products within 24 hours. However, delivery times may vary depending on your location. Any delays or issues will be communicated promptly."},{title:"5. Returns and Cancellations",content:"We offer a 14-day return and exchange policy for products in their original condition. Cancellations can be made within 24 hours of placing an order."},{title:"6. Limitation of Liability",content:"Apristo is not liable for any damages or losses arising from the use of our products or services, except as required by law."},{title:"7. Modifications to Terms",content:"We reserve the right to update or modify these terms and conditions at any time. Please check this page periodically for updates."}];function Ds(){return e.jsx(A,{children:e.jsxs("div",{className:"bg-white",children:[e.jsx("div",{className:"bg-purple-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[e.jsx(Bt,{className:"w-16 h-16 text-purple-600 mx-auto mb-6"}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Terms & Conditions"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Please read these terms carefully before using our services"})]})}),e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"prose prose-lg",children:[e.jsx("p",{className:"text-gray-600 mb-8",children:"Welcome to Apristo. These terms and conditions outline the rules and regulations for the use of Apristo's website and services. By accessing or using our services, you agree to comply with these terms."}),e.jsx("div",{className:"space-y-8",children:Ts.map((r,t)=>e.jsxs("div",{className:"bg-white rounded-xl",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:r.title}),e.jsx("p",{className:"text-gray-600",children:r.content})]},t))}),e.jsx("div",{className:"mt-16 pt-8 border-t border-gray-100",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleDateString()]})})]})})})]})})}const Ls=[{title:"1. Information We Collect",content:"When you use our website or services, we may collect personal information such as your name, email address, shipping address, and payment information. This data is used to process your orders and improve your shopping experience."},{title:"2. How We Use Your Information",content:"We use your personal information to process and fulfill your orders, communicate with you about your orders, improve our services and website functionality, and send promotional materials (with your consent)."},{title:"3. Data Security",content:"We use encryption and secure payment systems to ensure that your information is safe. We will never sell or rent your personal data to third parties without your consent."},{title:"4. Cookies",content:"We use cookies to enhance your browsing experience on our website. Cookies help us personalize content and track website traffic."},{title:"5. Your Rights",content:"You have the right to access, correct, or delete your personal data. You can contact us at any time to request these changes."},{title:"6. Changes to This Policy",content:"We may update this Privacy Policy from time to time. Any changes will be posted on this page, so please check back periodically."}];function Fs(){return e.jsx(A,{children:e.jsxs("div",{className:"bg-white",children:[e.jsx("div",{className:"bg-purple-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[e.jsx(nt,{className:"w-16 h-16 text-purple-600 mx-auto mb-6"}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Privacy Policy"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Your Privacy Matters to Us"})]})}),e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"prose prose-lg",children:[e.jsx("p",{className:"text-gray-600 mb-8",children:"At Apristo, we value your privacy and are committed to protecting your personal information. This Privacy Policy outlines how we collect, use, and safeguard your data."}),e.jsx("div",{className:"space-y-8",children:Ls.map((r,t)=>e.jsxs("div",{className:"bg-white rounded-xl",children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:r.title}),e.jsx("p",{className:"text-gray-600",children:r.content})]},t))}),e.jsxs("div",{className:"mt-16 p-8 bg-purple-50 rounded-2xl",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Questions About Privacy?"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"If you have any questions about our privacy practices, please don't hesitate to contact us."}),e.jsx("a",{href:"mailto:privacy@apristo.com",className:"inline-block bg-purple-600 text-white px-8 py-3 rounded-lg hover:bg-purple-700 transition-all hover:shadow-lg hover:-translate-y-1",children:"Contact Privacy Team"})]}),e.jsx("div",{className:"mt-16 pt-8 border-t border-gray-100",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Last updated: ",new Date().toLocaleDateString()]})})]})})})]})})}const qs=[{title:"1. Shipping Speed",content:"We pride ourselves on our fast delivery service. Our standard delivery time is 1-3 hours from order confirmation. We understand the importance of quick delivery and strive to get your products to you as fast as possible.",icon:e.jsx(xe,{className:"w-8 h-8 text-purple-600"})},{title:"2. Shipping Costs",content:"Shipping fees are calculated based on your order size, weight, and delivery location. You'll be able to view the exact shipping cost at checkout before you complete your purchase.",icon:e.jsx(H,{className:"w-8 h-8 text-purple-600"})},{title:"3. Order Tracking",content:"Once your order is dispatched, you'll receive a tracking number via email and SMS. This allows you to monitor your delivery in real-time.",icon:e.jsx(be,{className:"w-8 h-8 text-purple-600"})},{title:"4. Delivery Areas",content:"We currently offer shipping to most African countries. If you are unsure if we deliver to your location, please contact us for confirmation.",icon:e.jsx(it,{className:"w-8 h-8 text-purple-600"})},{title:"5. Shipping Issues",content:"If you experience any issues with your delivery, our customer service team is available 24/7 to assist you. Please contact us immediately and we'll resolve any problems.",icon:e.jsx(Yt,{className:"w-8 h-8 text-purple-600"})}];function Ms(){return e.jsx(A,{children:e.jsxs("div",{className:"bg-white",children:[e.jsx("div",{className:"bg-purple-50",children:e.jsxs("div",{className:"container mx-auto px-4 py-16 text-center",children:[e.jsx(be,{className:"w-16 h-16 text-purple-600 mx-auto mb-6"}),e.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"Shipping Information"}),e.jsx("p",{className:"text-xl text-gray-600 max-w-2xl mx-auto",children:"Fast and Reliable Shipping with Apristo"})]})}),e.jsx("div",{className:"container mx-auto px-4 py-16",children:e.jsx("div",{className:"max-w-3xl mx-auto",children:e.jsxs("div",{className:"prose prose-lg",children:[e.jsx("p",{className:"text-gray-600 mb-12",children:"At Apristo, we strive to get your orders to you as quickly as possible. Here's everything you need to know about our shipping process."}),e.jsx("div",{className:"space-y-12",children:qs.map((r,t)=>e.jsx("div",{className:"bg-white rounded-xl p-6 border border-gray-100 hover:shadow-lg transition-all",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:"p-3 bg-purple-50 rounded-lg",children:r.icon}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-3",children:r.title}),e.jsx("p",{className:"text-gray-600",children:r.content})]})]})},t))}),e.jsxs("div",{className:"mt-16 p-8 bg-purple-50 rounded-2xl text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Need Help with Shipping?"}),e.jsx("p",{className:"text-gray-600 mb-8",children:"Our customer service team is here to help with any shipping-related questions."}),e.jsx("a",{href:"mailto:shipping@apristo.com",className:"inline-block bg-purple-600 text-white px-8 py-3 rounded-lg hover:bg-purple-700 transition-all hover:shadow-lg hover:-translate-y-1",children:"Contact Shipping Support"})]})]})})})]})})}const $s="/[YOUR_REPO_NAME]/",Ve=Vt([{path:"/admin/login",element:e.jsx(_r,{}),loader:()=>(window.scrollTo({top:0,behavior:"instant"}),null)},{path:"/admin",element:e.jsx(W,{children:e.jsx(mr,{})}),loader:()=>(window.scrollTo({top:0,behavior:"instant"}),null)},{path:"/admin/products",element:e.jsx(W,{children:e.jsx(gr,{})}),loader:()=>(window.scrollTo({top:0,behavior:"instant"}),null)},{path:"/admin/products/:id",element:e.jsx(W,{children:e.jsx(vr,{})}),loader:()=>(window.scrollTo({top:0,behavior:"instant"}),null)},{path:"/admin/settings",element:e.jsx(W,{children:e.jsx(Sr,{})}),loader:()=>(window.scrollTo({top:0,behavior:"instant"}),null)},{path:"/",element:e.jsx(Ss,{}),loader:()=>(window.scrollTo({top:0,behavior:"instant"}),null)},{path:"/product/:id",element:e.jsx(Cs,{onViewProduct:()=>{}}),loader:()=>(window.scrollTo({top:0,behavior:"instant"}),null)},{path:"/about",element:e.jsx(As,{}),loader:()=>(window.scrollTo({top:0,behavior:"instant"}),null)},{path:"/faq",element:e.jsx(Os,{}),loader:()=>(window.scrollTo({top:0,behavior:"instant"}),null)},{path:"/terms",element:e.jsx(Ds,{}),loader:()=>(window.scrollTo({top:0,behavior:"instant"}),null)},{path:"/privacy",element:e.jsx(Fs,{}),loader:()=>(window.scrollTo({top:0,behavior:"instant"}),null)},{path:"/shipping",element:e.jsx(Ms,{}),loader:()=>(window.scrollTo({top:0,behavior:"instant"}),null)}],{basename:$s,future:{v7_startTransition:!0,v7_normalizeFormMethod:!0,v7_prependBasename:!0,v7_relativeSplatPath:!0,v7_skipErrorBoundaryBindings:!0,v7_skipHostCheck:!0,v7_skipRedirectHandling:!0,v7_skipActionErrorBoundaries:!0,v7_skipActionAbortHanding:!0,v7_skipActionAbortWhenPreloading:!0,v7_skipDataLoaderSerialEffectCalls:!0,v7_skipErrorBoundaryReRendering:!0,v7_skipErrorBoundaryRendering:!0,v7_skipErrorBoundaryErrorHandling:!0,v7_skipErrorBoundaryErrorReporting:!0,v7_skipErrorBoundaryErrorThrowing:!0,v7_skipErrorBoundaryErrorPropagation:!0,v7_skipErrorBoundaryErrorRecovery:!0,v7_skipActionErrorRevalidation:!0}});function Hs(){const{addRecentProduct:r}=It(),t={...Ve,routes:Ve.routes.map(s=>s.path==="/product/:id"?{...s,element:B.cloneElement(s.element,{onViewProduct:r})}:s)};return e.jsx(Gt,{router:t})}async function Us(){var r;try{const{error:t}=await f.from("health_check").select("*").limit(1);if(t){console.log("Using fallback data provider...");return}const{count:s,error:i}=await f.from("products").select("*",{count:"exact",head:!0});if((r=i==null?void 0:i.message)!=null&&r.includes("does not exist")){console.log("Tables not found, waiting for migrations to complete...");return}if(s===0){console.log("Seeding database with sample products...");const l=(await(async()=>await Promise.all(Fe.map(async c=>{const{error:u}=await f.from("products").insert({id:c.id,name:c.name,description:c.description,category:c.category,min_order:c.minOrder});if(u)throw u;return c.id})))()).flatMap(o=>{const c=Fe.find(u=>u.id===o);return[f.from("product_images").insert(c.images.map((u,d)=>({product_id:c.id,image_url:u,display_order:d}))),f.from("price_ranges").insert(c.priceRanges.map(u=>({product_id:c.id,min_quantity:u.minQuantity,max_quantity:u.maxQuantity,price:u.price}))),c.specifications&&[f.from("product_specifications").insert(c.specifications.map(u=>({product_id:c.id,specification:u})))]].filter(Boolean)});await Promise.all(l)}console.log("Database connection established")}catch(t){console.error("Database initialization error:",t),console.log("Falling back to local data...")}}console.log("Database connection established");Us().catch(console.error);lt(document.getElementById("root")).render(e.jsx(m.StrictMode,{children:e.jsx(Hs,{})}));
//# sourceMappingURL=index.06fa8b32.js.map

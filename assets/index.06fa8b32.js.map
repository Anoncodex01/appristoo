{"version":3,"file":"index.06fa8b32.js","sources":["../../node_modules/react/cjs/react-jsx-runtime.production.min.js","../../node_modules/react/jsx-runtime.js","../../node_modules/react-dom/client.js","../../src/components/admin/AdminNav.tsx","../../src/layouts/AdminLayout.tsx","../../src/components/admin/stats/StatCard.tsx","../../src/lib/supabase.ts","../../src/components/admin/DashboardStats.tsx","../../src/utils/formatting.ts","../../src/api/products.ts","../../src/data/products.ts","../../src/lib/database/connection.ts","../../src/hooks/useProducts.ts","../../src/components/admin/RecentProducts.tsx","../../src/pages/admin/Dashboard.tsx","../../src/components/admin/ProductTable.tsx","../../src/config/constants.ts","../../src/components/admin/product-form/FormField.tsx","../../src/components/admin/product-form/PriceRangeInputs.tsx","../../src/components/admin/ProductForm.tsx","../../src/components/Pagination.tsx","../../src/pages/admin/ProductList.tsx","../../src/components/admin/product/ProductActions.tsx","../../src/components/ImageSlideshow.tsx","../../src/components/product/PriceRangeTable.tsx","../../src/components/product/ProductSpecifications.tsx","../../src/pages/admin/ProductDetail.tsx","../../src/api/auth.ts","../../src/api/users.ts","../../src/pages/admin/Settings.tsx","../../src/pages/admin/Login.tsx","../../src/hooks/useAuth.ts","../../src/components/admin/AuthGuard.tsx","../../node_modules/is-dom-node/dist/is-dom-node.es.js","../../node_modules/is-dom-node-list/dist/is-dom-node-list.es.js","../../node_modules/tealight/dist/tealight.es.js","../../node_modules/extend/index.js","../../node_modules/lodash.throttle/index.js","../../node_modules/tiny-emitter/index.js","../../node_modules/@webcreate/infinite-ajax-scroll/dist/infinite-ajax-scroll.es.js","../../src/components/header/SearchDropdown.tsx","../../src/components/header/MainHeader.tsx","../../src/components/footer/FooterSection.tsx","../../src/layouts/MainLayout.tsx","../../src/components/CategoryMenu.tsx","../../src/components/icons/WhatsApp.tsx","../../src/components/ImageOptimizer.tsx","../../src/components/ProductCard.tsx","../../src/components/RecentProducts.tsx","../../src/hooks/useRecentProducts.ts","../../src/pages/HomePage.tsx","../../src/components/product/ProductActions.tsx","../../src/components/product/RelatedProducts.tsx","../../src/components/ProductDetail.tsx","../../src/pages/AboutPage.tsx","../../src/pages/FaqPage.tsx","../../src/pages/TermsPage.tsx","../../src/pages/PrivacyPage.tsx","../../src/pages/ShippingPage.tsx","../../src/router.tsx","../../src/App.tsx","../../src/lib/database/init.ts","../../src/main.tsx"],"sourcesContent":["/**\n * @license React\n * react-jsx-runtime.production.min.js\n *\n * Copyright (c) Facebook, Inc. and its affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n'use strict';var f=require(\"react\"),k=Symbol.for(\"react.element\"),l=Symbol.for(\"react.fragment\"),m=Object.prototype.hasOwnProperty,n=f.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,p={key:!0,ref:!0,__self:!0,__source:!0};\nfunction q(c,a,g){var b,d={},e=null,h=null;void 0!==g&&(e=\"\"+g);void 0!==a.key&&(e=\"\"+a.key);void 0!==a.ref&&(h=a.ref);for(b in a)m.call(a,b)&&!p.hasOwnProperty(b)&&(d[b]=a[b]);if(c&&c.defaultProps)for(b in a=c.defaultProps,a)void 0===d[b]&&(d[b]=a[b]);return{$$typeof:k,type:c,key:e,ref:h,props:d,_owner:n.current}}exports.Fragment=l;exports.jsx=q;exports.jsxs=q;\n","'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/react-jsx-runtime.production.min.js');\n} else {\n  module.exports = require('./cjs/react-jsx-runtime.development.js');\n}\n","'use strict';\n\nvar m = require('react-dom');\nif (process.env.NODE_ENV === 'production') {\n  exports.createRoot = m.createRoot;\n  exports.hydrateRoot = m.hydrateRoot;\n} else {\n  var i = m.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;\n  exports.createRoot = function(c, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.createRoot(c, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n  exports.hydrateRoot = function(c, h, o) {\n    i.usingClientEntryPoint = true;\n    try {\n      return m.hydrateRoot(c, h, o);\n    } finally {\n      i.usingClientEntryPoint = false;\n    }\n  };\n}\n","import React from 'react';\nimport { Link, useLocation } from 'react-router-dom';\nimport { Menu } from 'lucide-react';\n\ninterface MenuItem {\n  icon: React.ReactNode;\n  label: string;\n  path: string;\n}\n\ninterface AdminNavProps {\n  menuItems?: MenuItem[];\n}\n\nexport function AdminNav({ menuItems = [] }: AdminNavProps) {\n  const location = useLocation();\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = React.useState(false);\n\n  return (\n    <>\n      {/* Top Navigation */}\n      <nav className=\"bg-white shadow-sm fixed w-full top-0 left-0 z-50\">\n        <div className=\"px-4 py-3\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <button\n                onClick={() => setIsMobileMenuOpen(!isMobileMenuOpen)}\n                className=\"lg:hidden text-gray-600 hover:text-gray-900\"\n              >\n                <Menu className=\"w-6 h-6\" />\n              </button>\n              <span className=\"text-xl font-bold text-purple-600\">apristo admin</span>\n            </div>\n          </div>\n        </div>\n      </nav>\n\n      {/* Sidebar Navigation */}\n      <aside className={`\n        fixed top-0 left-0 z-40 w-64 h-screen pt-20 bg-white border-r border-gray-200 \n        transition-transform duration-300 ease-in-out\n        ${isMobileMenuOpen ? 'translate-x-0' : '-translate-x-full lg:translate-x-0'}\n      `}>\n        <div className=\"h-full px-3 py-4 overflow-y-auto\">\n          <ul className=\"space-y-2\">\n            {menuItems.map((item, index) => (\n              <li key={index}>\n                <Link\n                  to={item.path}\n                  className={`\n                    flex items-center p-3 rounded-lg hover:bg-gray-100\n                    ${location.pathname === item.path ? 'bg-purple-50 text-purple-600' : 'text-gray-600'}\n                  `}\n                >\n                  {item.icon}\n                  <span className=\"ml-3\">{item.label}</span>\n                </Link>\n              </li>\n            ))}\n          </ul>\n        </div>\n      </aside>\n    </>\n  );\n}","import React from 'react';\nimport { LayoutGrid, Package, Settings, Users } from 'lucide-react';\nimport { AdminNav } from '../components/admin/AdminNav';\n\ninterface AdminLayoutProps {\n  children: React.ReactNode;\n  title: string;\n  description?: string;\n}\n\nexport function AdminLayout({ children, title, description }: AdminLayoutProps) {\n  const menuItems = [\n    { icon: <LayoutGrid className=\"w-5 h-5\" />, label: 'Dashboard', path: '/admin' },\n    { icon: <Package className=\"w-5 h-5\" />, label: 'Products', path: '/admin/products' },\n    { icon: <Settings className=\"w-5 h-5\" />, label: 'Settings', path: '/admin/settings' }\n  ];\n\n  return (\n    <div className=\"min-h-screen bg-gray-50\">\n      <AdminNav menuItems={menuItems} />\n      <main className=\"p-4 lg:p-6 lg:ml-64 pt-20\">\n        <div className=\"mb-8\">\n          <h1 className=\"text-2xl font-bold text-gray-900\">{title}</h1>\n          {description && <p className=\"text-gray-600\">{description}</p>}\n        </div>\n        {children}\n      </main>\n    </div>\n  );\n}","import React from 'react';\nimport { LucideIcon } from 'lucide-react';\n\ninterface StatCardProps {\n  label: string;\n  value: string | number;\n  icon: React.ReactNode;\n  color: string;\n}\n\nexport function StatCard({ label, value, icon, color }: StatCardProps) {\n  return (\n    <div className=\"bg-white p-6 rounded-lg shadow-sm\">\n      <div className=\"flex items-center gap-4\">\n        <div className={`${color} text-white p-3 rounded-lg`}>\n          {icon}\n        </div>\n        <div>\n          <p className=\"text-sm text-gray-600\">{label}</p>\n          <p className=\"text-2xl font-semibold\">{value}</p>\n        </div>\n      </div>\n    </div>\n  );\n}","import { createClient, SupabaseClient } from '@supabase/supabase-js';\nimport { Database } from '../types/supabase';\n\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\nconst supabaseKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\n\nif (!supabaseUrl || !supabaseKey) {\n  throw new Error('Missing Supabase configuration');\n}\n\nlet supabaseInstance: SupabaseClient<Database> | null = null;\n\nexport function getSupabaseClient(): SupabaseClient<Database> {\n  if (!supabaseInstance) {\n    supabaseInstance = createClient<Database>(supabaseUrl, supabaseKey, {\n      auth: {\n        autoRefreshToken: true,\n        persistSession: true,\n        detectSessionInUrl: true,\n        storageKey: 'apristo_auth_token',\n      },\n    });\n  }\n  return supabaseInstance;\n}\n\nexport const supabase = getSupabaseClient();","import React, { useState, useEffect } from 'react';\nimport { Package, DollarSign, ShoppingCart } from 'lucide-react';\nimport { StatCard } from './stats/StatCard';\nimport { supabase } from '../../lib/supabase';\n\nexport function DashboardStats() {\n  const [stats, setStats] = useState({\n    totalProducts: 0,\n    totalCategories: 0,\n    averagePrice: 0\n  });\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    async function loadStats() {\n      try {\n        // Get total products count\n        const { count: totalProducts, error: countError } = await supabase\n          .from('products') \n          .select('*', { count: 'exact', head: true })\n          .eq('is_archived', false);\n\n        if (countError) throw countError;\n\n        // Get unique categories\n        const { data: categories, error: categoriesError } = await supabase.rpc(\n          'get_active_categories_count'\n        );\n\n        if (categoriesError) throw categoriesError;\n\n        // Get average base price\n        const { data: priceData, error: priceError } = await supabase\n          .from('price_ranges')\n          .select('product_id, price')\n          .order('min_quantity', { ascending: true })\n          .limit(1);\n\n        if (priceError) throw priceError;\n\n        // Group by product and get minimum price for each\n        const productPrices = new Map();\n        priceData?.forEach(pr => {\n          if (!productPrices.has(pr.product_id) || pr.price < productPrices.get(pr.product_id)) {\n            productPrices.set(pr.product_id, pr.price);\n          }\n        });\n\n        // Calculate average of minimum prices\n        const prices = Array.from(productPrices.values());\n        const avgPrice = prices.length > 0\n          ? prices.reduce((acc, price) => acc + price, 0) / prices.length\n          : 0;\n\n        setStats({\n          totalProducts: totalProducts || 0,\n          totalCategories: categories || 0,\n          averagePrice: avgPrice || 0\n        });\n      } catch (error) {\n        console.error('Error loading stats:', error);\n      } finally {\n        setLoading(false);\n      }\n    }\n\n    loadStats();\n  }, []);\n\n  if (loading) {\n    return (\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n        {[1, 2, 3].map(i => (\n          <div key={i} className=\"animate-pulse bg-white p-6 rounded-lg shadow-sm h-32\" />\n        ))}\n      </div>\n    );\n  }\n\n  const statCards = [\n    {\n      label: 'Total Products',\n      value: stats.totalProducts,\n      icon: <Package className=\"w-6 h-6\" />,\n      color: 'bg-blue-500',\n    },\n    {\n      label: 'Total Categories',\n      value: stats.totalCategories,\n      icon: <ShoppingCart className=\"w-6 h-6\" />,\n      color: 'bg-green-500',\n    },\n    {\n      label: 'Average Price',\n      value: new Intl.NumberFormat('en-TZ', {\n        style: 'currency',\n        currency: 'TZS',\n        minimumFractionDigits: 0,\n        maximumFractionDigits: 0,\n      }).format(stats.averagePrice),\n      icon: <DollarSign className=\"w-6 h-6\" />,\n      color: 'bg-purple-500',\n    },\n  ];\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8\">\n      {statCards.map((stat, index) => (\n        <StatCard key={index} {...stat} />\n      ))}\n    </div>\n  );\n}","import { PriceRange } from '../types';\n\nexport const formatProducts = (products: any[]) => {\n  return products.map(product => ({\n    id: product.id,\n    name: product.name,\n    description: product.description,\n    category: product.category,\n    minOrder: product.min_order,\n    isArchived: product.is_archived,\n    priceRanges: product.price_ranges.map((range: any) => ({\n      minQuantity: range.min_quantity,\n      maxQuantity: range.max_quantity,\n      price: range.price\n    })),\n    images: product.product_images.map((img: any) => img.image_url),\n    specifications: product.product_specifications?.map((spec: any) => spec.specification) || []\n  }));\n};\n\nexport const formatPrice = (price: number): string => {\n  return new Intl.NumberFormat('en-TZ', {\n    style: 'currency',\n    currency: 'TZS',\n    minimumFractionDigits: 0\n  }).format(price);\n};\n\nexport const formatQuantityRange = (range: PriceRange): string => {\n  return `${range.minQuantity} - ${range.maxQuantity} pieces`;\n};","import { supabase } from '../lib/supabase';\nimport type { Product } from '../types';\n\nexport async function fetchProducts() {\n  const { data, error } = await supabase\n    .from('products')\n    .select(`\n      id,\n      name,\n      description,\n      category,\n      min_order,\n      is_archived,\n      price_ranges (min_quantity, max_quantity, price),\n      product_images (image_url),\n      product_specifications (specification)\n    `)\n    .eq('is_archived', false)\n    .order('created_at', { ascending: false });\n\n  if (error) {\n    console.error('Error fetching products:', error);\n    throw new Error('Failed to fetch products');\n  }\n\n  if (!data) {\n    return [];\n  }\n\n  return data.map((product: any): Product => ({\n    id: product.id,\n    name: product.name,\n    description: product.description,\n    category: product.category,\n    minOrder: product.min_order,\n    isArchived: product.is_archived,\n    priceRanges: (product.price_ranges || []).map((range: any) => ({\n      minQuantity: range.min_quantity,\n      maxQuantity: range.max_quantity,\n      price: range.price\n    })),\n    images: (product.product_images || []).map((img: any) => img.image_url),\n    specifications: product.product_specifications?.map((spec: any) => spec.specification) || []\n  }));\n}\n\nexport async function fetchProductById(id: string) {\n  const { data, error } = await supabase\n    .from('products')\n    .select(`\n      id,\n      name,\n      description,\n      category,\n      min_order,\n      is_archived,\n      price_ranges (min_quantity, max_quantity, price),\n      product_images (image_url),\n      product_specifications (specification)\n    `)\n    .eq('id', id)\n    .single();\n\n  if (error) {\n    // Check if product exists in fallback data\n    const provider = await getDataProvider();\n    if (!('from' in provider)) {\n      const fallbackProduct = await provider.getProductById(id);\n      if (fallbackProduct) return fallbackProduct;\n    }\n    throw error;\n  }\n\n  return {\n    id: data.id,\n    name: data.name,\n    description: data.description,\n    category: data.category,\n    minOrder: data.min_order,\n    isArchived: data.is_archived,\n    priceRanges: data.price_ranges.map((range: any) => ({\n      minQuantity: range.min_quantity,\n      maxQuantity: range.max_quantity,\n      price: range.price\n    })),\n    images: data.product_images.map((img: any) => img.image_url),\n    specifications: data.product_specifications?.map((spec: any) => spec.specification) || []\n  };\n}\n\nexport async function createProduct(productData: Omit<Product, 'id'>) {\n  try {\n    // Validate user authentication\n    const { data: { user }, error: authError } = await supabase.auth.getUser();\n    if (authError || !user) {\n      console.error('Authentication error:', authError);\n      throw new Error('You must be logged in to create products');\n    }\n\n    // Validate user role\n    const { data: roleData, error: roleError } = await supabase\n      .from('user_roles')\n      .select('role')\n      .eq('user_id', user.id)\n      .single();\n\n    if (roleError) {\n      console.error('Role check error:', roleError);\n      throw new Error('Failed to verify permissions');\n    }\n\n    if (!roleData || !['ADMIN', 'EDITOR'].includes(roleData.role)) {\n      throw new Error('You do not have permission to create products');\n    }\n\n    const productId = crypto.randomUUID();\n    const timestamp = new Date().toISOString();\n\n    // Insert main product data\n    const { error: productError } = await supabase\n      .from('products')\n      .insert({\n        id: productId,\n        name: productData.name,\n        description: productData.description,\n        category: productData.category,\n        min_order: productData.minOrder || 1,\n        is_archived: false\n      });\n\n    if (productError) {\n      console.error('Product creation error:', productError);\n      throw new Error('Failed to create product: ' + productError.message);\n    }\n\n    // Insert images\n    if (productData.images?.length > 0) {\n      const { error: imagesError } = await supabase\n        .from('product_images')\n        .insert(\n          productData.images.map((url: string, index: number) => ({\n            product_id: productId,\n            image_url: url,\n            display_order: index\n          }))\n        );\n\n      if (imagesError) {\n        console.error('Image insertion error:', imagesError);\n        // Clean up the product if image insertion fails\n        await supabase.from('products').delete().eq('id', productId);\n        throw new Error('Failed to add product images: ' + imagesError.message);\n      }\n    }\n\n    // Insert price ranges\n    if (productData.priceRanges?.length > 0) {\n      const { error: pricesError } = await supabase\n        .from('price_ranges')\n        .insert(\n          productData.priceRanges.map((range: any) => ({\n            product_id: productId,\n            min_quantity: range.minQuantity,\n            max_quantity: range.maxQuantity,\n            price: range.price\n          }))\n        );\n\n      if (pricesError) {\n        console.error('Price ranges insertion error:', pricesError);\n        // Clean up the product if price range insertion fails\n        await supabase.from('products').delete().eq('id', productId);\n        throw new Error('Failed to add price ranges: ' + pricesError.message);\n      }\n    }\n\n    // Insert specifications if any\n    if (productData.specifications?.length > 0) {\n      const { error: specsError } = await supabase\n        .from('product_specifications')\n        .insert(\n          productData.specifications.map((spec: string) => ({\n            product_id: productId,\n            specification: spec\n          }))\n        );\n\n      if (specsError) {\n        console.error('Specifications insertion error:', specsError);\n        // Clean up the product if specification insertion fails\n        await supabase.from('products').delete().eq('id', productId);\n        throw new Error('Failed to add specifications: ' + specsError.message);\n      }\n    }\n\n    return { id: productId, success: true };\n  } catch (error) {\n    console.error('Product creation failed:', error);\n    \n    let errorMessage = 'Failed to create product';\n    if (error instanceof Error) {\n      errorMessage = error.message;\n      // Handle specific Supabase errors\n      if (error.message.includes('duplicate key')) {\n        errorMessage = 'A product with this ID already exists';\n      } else if (error.message.includes('permission denied')) {\n        errorMessage = 'You do not have permission to create products';\n      } else if (error.message.includes('violates foreign key constraint')) {\n        errorMessage = 'Invalid product data';\n      }\n    }\n    \n    throw new Error(errorMessage);\n  }\n}\n\nexport async function updateProduct(id: string, productData: any) {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('Unauthorized');\n  \n  // Update main product\n  const { error: productError } = await supabase\n    .from('products')\n    .update({\n      name: productData.name,\n      description: productData.description,\n      category: productData.category,\n      min_order: productData.minOrder\n    })\n    .eq('id', id);\n\n  if (productError) throw productError;\n\n  // Delete existing related data\n  const { error: deleteImagesError } = await supabase\n    .from('product_images')\n    .delete()\n    .eq('product_id', id);\n\n  if (deleteImagesError) throw deleteImagesError;\n\n  const { error: deletePricesError } = await supabase\n    .from('price_ranges')\n    .delete()\n    .eq('product_id', id);\n\n  if (deletePricesError) throw deletePricesError;\n\n  const { error: deleteSpecsError } = await supabase\n    .from('product_specifications')\n    .delete()\n    .eq('product_id', id);\n\n  if (deleteSpecsError) throw deleteSpecsError;\n\n  // Insert new images\n  const { error: imagesError } = await supabase\n    .from('product_images')\n    .insert(\n      productData.images.map((url: string, index: number) => ({\n        id: crypto.randomUUID(),\n        product_id: id,\n        image_url: url,\n        display_order: index\n      }))\n    );\n\n  if (imagesError) throw imagesError;\n\n  // Insert new price ranges\n  const { error: pricesError } = await supabase\n    .from('price_ranges')\n    .insert(\n      productData.priceRanges.map((range: any) => ({\n        id: crypto.randomUUID(),\n        product_id: id,\n        min_quantity: range.minQuantity,\n        max_quantity: range.maxQuantity,\n        price: range.price\n      }))\n    );\n\n  if (pricesError) throw pricesError;\n\n  // Insert new specifications if any\n  if (productData.specifications?.length) {\n    const { error: specsError } = await supabase\n      .from('product_specifications')\n      .insert(\n        productData.specifications.map((spec: string) => ({\n          id: crypto.randomUUID(),\n          product_id: id,\n          specification: spec\n        }))\n      );\n\n    if (specsError) throw specsError;\n  }\n\n  return { id };\n}\n\nexport async function deleteProduct(id: string) {\n  const { error } = await supabase\n    .from('products')\n    .delete()\n    .eq('id', id);\n\n  if (error) throw error;\n}\n\nexport async function toggleArchiveProduct(id: string, isArchived: boolean) {\n  const { error } = await supabase\n    .from('products')\n    .update({ is_archived: isArchived })\n    .eq('id', id);\n\n  if (error) throw error;\n}","import { Product } from '../types';\n\nexport const products: Product[] = [\n  {\n    id: '550e8400-e29b-41d4-a716-446655440000',\n    name: 'Premium 4K Smart TV 55\"',\n    priceRanges: [\n      { minQuantity: 1, maxQuantity: 5, price: 899999 },\n      { minQuantity: 6, maxQuantity: 20, price: 849999 }\n    ],\n    category: 'ELECTRONICS',\n    images: [\n      'https://images.unsplash.com/photo-1593784991095-a205069470b6?auto=format&fit=crop&q=80&w=1000',\n      'https://images.unsplash.com/photo-1509281373149-e957c6296406?auto=format&fit=crop&q=80&w=1000'\n    ],\n    description: '55\" Premium 4K Smart TV with HDR, built-in streaming apps, and voice control',\n    specifications: [\n      '4K Ultra HD Resolution',\n      'Smart TV Features',\n      'HDR Support',\n      'Voice Control',\n      'Multiple HDMI Ports'\n    ],\n    minOrder: 1\n  },\n  {\n    id: '6ba7b810-9dad-11d1-80b4-00c04fd430c8',\n    name: 'Smart Air Conditioner',\n    priceRanges: [\n      { minQuantity: 1, maxQuantity: 3, price: 749999 },\n      { minQuantity: 4, maxQuantity: 10, price: 699999 }\n    ],\n    category: 'HOME APPLIANCES',\n    images: [\n      'https://images.unsplash.com/photo-1614633833026-0820552978b6?auto=format&fit=crop&q=80&w=1000',\n      'https://images.unsplash.com/photo-1624926272725-02fbb4c652cd?auto=format&fit=crop&q=80&w=1000'\n    ],\n    description: 'Smart inverter air conditioner with WiFi control and energy-saving features',\n    specifications: [\n      'WiFi Control',\n      'Energy Saving Mode',\n      'Smart Temperature Control',\n      'Timer Function',\n      'Sleep Mode'\n    ],\n    minOrder: 1\n  },\n  {\n    id: '7c9e6679-7425-40de-944b-e07fc1f90ae7',\n    name: 'Luxury Skincare Set',\n    priceRanges: [\n      { minQuantity: 1, maxQuantity: 10, price: 129999 },\n      { minQuantity: 11, maxQuantity: 50, price: 119999 }\n    ],\n    category: 'BEAUTY',\n    images: [\n      'https://images.unsplash.com/photo-1570554886111-e80fcca6a029?auto=format&fit=crop&q=80&w=1000',\n      'https://images.unsplash.com/photo-1556228578-0d85b1a4d571?auto=format&fit=crop&q=80&w=1000'\n    ],\n    description: 'Premium skincare set including cleanser, toner, serum, and moisturizer',\n    specifications: [\n      'All Natural Ingredients',\n      'Suitable for All Skin Types',\n      'Paraben Free',\n      'Dermatologically Tested'\n    ],\n    minOrder: 1\n  }\n];","import { supabase } from '../supabase';\nimport { FallbackDataProvider } from './fallback';\n\nconst fallback = FallbackDataProvider.getInstance();\n\nexport async function checkConnection(): Promise<boolean> {\n  try {\n    // First check if we can connect to Supabase\n    const { data, error } = await supabase.auth.getSession();\n\n    if (error && error.message !== 'Auth session missing!') {\n      console.error('Connection check failed:', error);\n      return false;\n    }\n\n    return true;\n  } catch (error) {\n    if (error instanceof Error) {\n      console.error('Connection check failed:', error.message);\n    } else {\n      console.error('Connection check failed with unknown error');\n    }\n    return false;\n  }\n}\n\nlet onlineStatus = true;\n\nexport function getConnectionStatus(): boolean {\n  return onlineStatus;\n}\n\nexport function setConnectionStatus(status: boolean): void {\n  onlineStatus = status;\n}\n\nexport async function getDataProvider() {\n  const isOnline = await checkConnection();\n  setConnectionStatus(isOnline);\n  return isOnline ? supabase : fallback;\n}","import { useState, useEffect, useCallback } from 'react';\nimport { Product } from '../types';\nimport { supabase } from '../lib/supabase';\nimport { formatProducts } from '../utils/formatting';\nimport { fetchProductById } from '../api/products';\nimport { getDataProvider } from '../lib/database/connection';\nimport type { Category } from '../types';\n\nconst PRODUCTS_PER_PAGE = 16;\n\nexport async function getCategoryProductCounts() {\n  try {\n    const provider = await getDataProvider();\n    if ('from' in provider) {\n      const { data, error } = await provider\n        .from('products')\n        .select('category')\n        .eq('is_archived', false);\n\n      if (error) throw error;\n      return data.reduce((acc: Record<string, number>, product) => {\n        acc[product.category] = (acc[product.category] || 0) + 1;\n        return acc;\n      }, {});\n    } \n    return provider.getCategoryProductCounts();\n  } catch (error) {\n    console.error('Error fetching category counts:', error);\n    return {};\n  }\n}\n\nexport function useProducts() {\n  const [products, setProducts] = useState<Product[]>([]);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const [totalCount, setTotalCount] = useState(0);\n  const [currentPage, setCurrentPage] = useState(1);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedCategory, setSelectedCategory] = useState<Category | 'all'>('all');\n  const [hasMore, setHasMore] = useState(true);\n\n  const loadProducts = useCallback(async () => {\n    if (loading) return;\n    \n    try {\n      setLoading(true);\n      setError(null);\n\n      let query = supabase\n        .from('products')\n        .select(`\n          id,\n          name,\n          description,\n          category,\n          min_order,\n          is_archived,\n          product_images (\n            image_url,\n            display_order\n          ),\n          price_ranges (\n            min_quantity,\n            max_quantity,\n            price\n          ),\n          product_specifications (\n            specification\n          )\n        `, { count: 'exact' })\n        .eq('is_archived', false)\n        .range(\n          (currentPage - 1) * PRODUCTS_PER_PAGE,\n          currentPage * PRODUCTS_PER_PAGE - 1\n        )\n        .order('created_at', { ascending: false });\n\n      if (selectedCategory !== 'all') {\n        query = query.eq('category', selectedCategory);\n      }\n\n      if (searchQuery) {\n        query = query.ilike('name', `%${searchQuery}%`);\n      }\n\n      const { data, error: fetchError, count } = await query;\n\n      if (fetchError) throw fetchError;\n\n      const formattedProducts = formatProducts(data || []);\n      \n      // For infinite scroll, append new products instead of replacing\n      if (currentPage === 1) {\n        setProducts(formattedProducts);\n      } else {\n        setProducts(prev => [...prev, ...formattedProducts]);\n      }\n      \n      if (count !== null) {\n        setTotalCount(count);\n        // Check if we've loaded all products\n        setHasMore((currentPage * PRODUCTS_PER_PAGE) < count);\n      }\n    } catch (error) {\n      console.error('Error loading products:', error);\n      setError('Failed to load products');\n      setHasMore(false);\n    } finally {\n      setLoading(false);\n    }\n  }, [currentPage, selectedCategory, searchQuery]);\n\n  useEffect(() => {\n    loadProducts();\n  }, [loadProducts]);\n\n  // Reset products when category or search changes\n  useEffect(() => {\n    setCurrentPage(1);\n    setProducts([]);\n    setHasMore(true);\n    setError(null);\n  }, [selectedCategory, searchQuery]);\n\n  return {\n    products,\n    loading,\n    error,\n    totalCount,\n    currentPage,\n    setCurrentPage,\n    searchQuery,\n    setSearchQuery,\n    selectedCategory,\n    setSelectedCategory,\n    hasMore\n  };\n}\n\nexport function useProduct(id: string) {\n  const [product, setProduct] = useState<Product | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  async function loadProduct() {\n    try {\n      setLoading(true);\n      const data = await fetchProductById(id);\n      setProduct(data);\n      setError(null);\n    } catch (err) {\n      setError('Failed to load product');\n      console.error('Error loading product:', err);\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    if (id) {\n      loadProduct();\n    }\n  }, [id]);\n\n  return { product, loading, error, reloadProduct: loadProduct };\n}","import React from 'react';\nimport { useProducts } from '../../hooks/useProducts';\nimport { formatPrice } from '../../utils/formatting';\nimport { Clock, Package } from 'lucide-react';\n\nexport function RecentProducts() {\n  const { products, loading } = useProducts();\n  const recentProducts = products.slice(0, 5); // Show only last 5 products\n\n  if (loading) {\n    return (\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"animate-pulse space-y-4\">\n          {[1, 2, 3].map(i => (\n            <div key={i} className=\"h-12 bg-gray-200 rounded\" />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  if (recentProducts.length === 0) {\n    return (\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"text-center text-gray-500\">\n          <Package className=\"w-12 h-12 mx-auto mb-4 text-gray-400\" />\n          <p className=\"text-lg\">No products added yet</p>\n          <p className=\"text-sm mt-2\">Products will appear here once added</p>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm\">\n      <div className=\"p-6 border-b border-gray-200\">\n        <div className=\"flex items-center gap-2\">\n          <Clock className=\"w-5 h-5 text-purple-600\" />\n          <h2 className=\"text-lg font-semibold\">Recently Added Products</h2>\n        </div>\n      </div>\n      <div className=\"divide-y divide-gray-200\">\n        {recentProducts.map(product => (\n          <div key={product.id} className=\"p-4 hover:bg-gray-50\">\n            <div className=\"flex items-center gap-4\">\n              <div className=\"h-12 w-12 flex-shrink-0\">\n                <img\n                  src={product.images[0]}\n                  alt={product.name}\n                  className=\"h-12 w-12 rounded-lg object-cover\"\n                />\n              </div>\n              <div className=\"flex-1 min-w-0\">\n                <p className=\"text-sm font-medium text-gray-900 truncate\">\n                  {product.name}\n                </p>\n                <p className=\"text-sm text-gray-500\">\n                  {product.category}\n                </p>\n              </div>\n              <div className=\"text-sm font-medium text-purple-600\">\n                {product.priceRanges?.[0] ? formatPrice(product.priceRanges[0].price) : 'N/A'}\n              </div>\n            </div>\n          </div>\n        ))}\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport { AdminLayout } from '../../layouts/AdminLayout';\nimport { DashboardStats } from '../../components/admin/DashboardStats';\nimport { RecentProducts } from '../../components/admin/RecentProducts';\n\nexport function Dashboard() {\n  return (\n    <AdminLayout \n      title=\"Dashboard\"\n      description=\"Welcome to your admin dashboard\"\n    >\n      <DashboardStats />\n      <RecentProducts />\n    </AdminLayout>\n  );\n}","import React, { useState } from 'react';\nimport { Pencil, Trash2, Archive, ArchiveRestore } from 'lucide-react';\nimport { Product } from '../../types';\nimport { formatPrice } from '../../utils/formatting';\nimport { deleteProduct, toggleArchiveProduct } from '../../api/products';\n\ninterface ProductTableProps {\n  products: Product[];\n  loading: boolean;\n  onRefresh: () => void;\n  onEdit: (product: Product) => void;\n}\n\nexport function ProductTable({ products, loading, onRefresh, onEdit }: ProductTableProps) {\n  const [deletingId, setDeletingId] = useState<string | null>(null);\n  const [archivingId, setArchivingId] = useState<string | null>(null);\n\n  const handleDelete = async (id: string) => {\n    if (!confirm('Are you sure you want to delete this product?')) return;\n\n    try {\n      setDeletingId(id);\n      await deleteProduct(id);\n      onRefresh();\n    } catch (error) {\n      console.error('Error deleting product:', error);\n      alert('Failed to delete product');\n    } finally {\n      setDeletingId(null);\n    }\n  };\n\n  const handleArchive = async (id: string, currentStatus: boolean) => {\n    try {\n      setArchivingId(id);\n      await toggleArchiveProduct(id, !currentStatus);\n      onRefresh();\n    } catch (error) {\n      console.error('Error archiving product:', error);\n      alert('Failed to update product status');\n    } finally {\n      setArchivingId(null);\n    }\n  };\n\n  if (loading) {\n    return (\n      <div className=\"bg-white rounded-lg shadow-sm p-6\">\n        <div className=\"animate-pulse space-y-4\">\n          {[1, 2, 3].map(i => (\n            <div key={i} className=\"h-12 bg-gray-200 rounded\" />\n          ))}\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"bg-white rounded-lg shadow-sm overflow-hidden\">\n      <div className=\"overflow-x-auto\">\n        <table className=\"min-w-[800px] w-full divide-y divide-gray-200\">\n          <thead className=\"bg-gray-50\">\n            <tr>\n              <th className=\"w-[35%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Name\n              </th>\n              <th className=\"w-[20%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Category\n              </th>\n              <th className=\"w-[15%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Price\n              </th>\n              <th className=\"w-[15%] px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Min Qty\n              </th>\n              <th className=\"w-[15%] px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                Actions\n              </th>\n            </tr>\n          </thead>\n          <tbody className=\"bg-white divide-y divide-gray-200\">\n            {products.map(product => (\n              <tr key={product.id} className=\"hover:bg-gray-50\">\n                <td className=\"px-4 py-3\">\n                  <div className=\"flex items-center\">\n                    <div className=\"h-10 w-10 flex-shrink-0\">\n                      <img \n                        className=\"h-10 w-10 rounded-lg object-cover\"\n                        src={product.images[0]}\n                        alt={product.name}\n                      />\n                    </div>\n                    <div className=\"ml-4\">\n                      <div className=\"text-sm font-medium text-gray-900 truncate max-w-[250px]\">\n                        {product.name}\n                      </div>\n                    </div>\n                  </div>\n                </td>\n                <td className=\"px-4 py-3 whitespace-nowrap\">\n                  <span className=\"px-2 inline-flex text-xs leading-5 font-semibold rounded-full bg-purple-100 text-purple-800\">\n                    {product.category}\n                  </span>\n                </td>\n                <td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-500\"> \n                  {product.priceRanges?.[0] ? formatPrice(product.priceRanges[0].price) : 'N/A'}\n                </td>\n                <td className=\"px-4 py-3 whitespace-nowrap text-sm text-gray-500\">\n                  {product.minOrder}\n                </td>\n                <td className=\"px-4 py-3 whitespace-nowrap text-right text-sm font-medium\">\n                  <button \n                    className=\"text-indigo-600 hover:text-indigo-900\"\n                    onClick={() => onEdit(product)}\n                    title=\"Edit product\"\n                  >\n                    <Pencil className=\"w-4 h-4\" />\n                  </button>\n                  <button\n                    className=\"ml-3 text-orange-600 hover:text-orange-900\"\n                    onClick={() => handleArchive(product.id, product.isArchived)}\n                    disabled={archivingId === product.id}\n                    title={product.isArchived ? \"Restore product\" : \"Archive product\"}\n                  >\n                    {product.isArchived ? (\n                      <ArchiveRestore className=\"w-4 h-4\" />\n                    ) : (\n                      <Archive className=\"w-4 h-4\" />\n                    )}\n                  </button>\n                  <button \n                    className=\"ml-3 text-red-600 hover:text-red-900\"\n                    onClick={() => handleDelete(product.id)}\n                    disabled={deletingId === product.id}\n                    title=\"Delete product\"\n                  >\n                    <Trash2 className=\"w-4 h-4\" />\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n    </div>\n  );\n}","export const CONTACT_INFO = {\n  phone: '+255 753 025 298',\n  whatsapp: '+61426614490'\n};\n\nexport const SHIPPING_TIME = '1-3 hours';\n\nexport const CATEGORIES = [\n  'Groceries',\n  // Temporarily hidden categories\n  // 'Beauty',\n  // 'Electronics'\n] as const;\n\nexport const CURRENCY = 'TZS';","import React from 'react';\n\ninterface FormFieldProps {\n  label: string;\n  children: React.ReactNode;\n}\n\nexport function FormField({ label, children }: FormFieldProps) {\n  return (\n    <div>\n      <label className=\"block text-sm font-medium text-gray-700 mb-1\">\n        {label}\n      </label>\n      {children}\n    </div>\n  );\n}","import React from 'react';\n\ninterface PriceRangeInputsProps {\n  index: number;\n  required?: boolean;\n  defaultValues?: {\n    minQuantity: number;\n    maxQuantity: number;\n    price: number;\n  };\n}\n\nexport function PriceRangeInputs({ \n  index, \n  required = false, \n  defaultValues \n}: PriceRangeInputsProps) {\n  const suffix = index === 1 ? '1' : '2';\n  const placeholder = required ? '' : ' (optional)';\n\n  return (\n    <div className=\"grid grid-cols-3 gap-4\">\n      <input\n        type=\"number\"\n        name={`minQuantity${suffix}`}\n        placeholder={`Min Quantity${placeholder}`}\n        required={required}\n        defaultValue={defaultValues?.minQuantity}\n        className=\"p-2 border rounded-lg\"\n      />\n      <input\n        type=\"number\"\n        name={`maxQuantity${suffix}`}\n        placeholder={`Max Quantity${placeholder}`}\n        required={required}\n        defaultValue={defaultValues?.maxQuantity}\n        className=\"p-2 border rounded-lg\"\n      />\n      <input\n        type=\"number\"\n        name={`price${suffix}`}\n        placeholder={`Price${placeholder}`}\n        required={required}\n        defaultValue={defaultValues?.price}\n        className=\"p-2 border rounded-lg\"\n      />\n    </div>\n  );\n}","import React, { useState, useRef, type FormEvent } from 'react';\nimport { X } from 'lucide-react';\nimport { createProduct, updateProduct } from '../../api/products';\nimport { CATEGORIES } from '../../config/constants';\nimport { FormField } from './product-form/FormField';\nimport { PriceRangeInputs } from './product-form/PriceRangeInputs';\nimport { Product } from '../../types';\n\ninterface ProductFormProps {\n  onClose: () => void;\n  onSuccess: () => void;\n  product?: Product | null;\n}\n\nexport function ProductForm({ onClose, onSuccess, product }: ProductFormProps) {\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState<string | null>(null);\n  const formRef = useRef<HTMLFormElement>(null);\n\n  // Initialize form with existing product data if editing\n  const defaultValues = {\n    name: product?.name || '',\n    description: product?.description || '',\n    category: product?.category || CATEGORIES[0],\n    minOrder: product?.minOrder || 1,\n    images: product?.images?.join('\\n') || '',\n    specifications: product?.specifications?.join('\\n') || ''\n  };\n\n  const handleSubmit = async (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (loading) return;\n        \n    const formData = new FormData(e.currentTarget);\n    setLoading(true);\n    setError(null);\n    \n    try {\n      // Validate required fields\n      const name = formData.get('name') as string;\n      const description = formData.get('description') as string;\n      const category = formData.get('category') as string;\n      const minOrder = parseInt(formData.get('minOrder') as string) || 1;\n      const images = (formData.get('images') as string)\n        .split('\\n')\n        .map(url => url.trim())\n        .filter(url => url.length > 0);\n\n      const price1 = parseFloat(formData.get('price1') as string);\n      const minQuantity1 = parseInt(formData.get('minQuantity1') as string);\n      const maxQuantity1 = parseInt(formData.get('maxQuantity1') as string);\n      \n      // Validate required fields\n      if (!name?.trim()) {\n        throw new Error('Product name is required');\n      }\n      if (!description?.trim()) {\n        throw new Error('Product description is required');\n      }\n      if (!category) {\n        throw new Error('Category is required');\n      }\n      if (images.length === 0) {\n        throw new Error('At least one image URL is required');\n      }\n\n      // Validate image URLs\n      const invalidUrls = images.filter(url => !url.match(/^https?:\\/\\/.+/));\n      if (invalidUrls.length > 0) {\n        throw new Error('Please enter valid image URLs (must start with http:// or https://)');\n      }\n      \n      // Validate first price range\n      if (isNaN(price1) || price1 <= 0) {\n        throw new Error('Please enter a valid price for the first range');\n      }\n      if (isNaN(minQuantity1) || minQuantity1 < 1) {\n        throw new Error('Minimum quantity must be at least 1');\n      }\n      if (isNaN(maxQuantity1) || maxQuantity1 <= minQuantity1) {\n        throw new Error('Maximum quantity must be greater than minimum quantity');\n      }\n      \n      // Build price ranges array\n      const priceRanges = [\n        {\n          minQuantity: minQuantity1,\n          maxQuantity: maxQuantity1,\n          price: price1\n        }\n      ];\n      \n      // Add second price range if provided and valid\n      const price2 = parseFloat(formData.get('price2') as string);\n      const minQuantity2 = parseInt(formData.get('minQuantity2') as string);\n      const maxQuantity2 = parseInt(formData.get('maxQuantity2') as string);\n      \n      if (!isNaN(price2) && !isNaN(minQuantity2) && !isNaN(maxQuantity2)) {\n        if (price2 <= 0) {\n          throw new Error('Second range price must be greater than 0');\n        }\n        if (minQuantity2 <= maxQuantity1) {\n          throw new Error('Second range minimum quantity must be greater than first range maximum');\n        }\n        if (maxQuantity2 <= minQuantity2) {\n          throw new Error('Second range maximum quantity must be greater than its minimum');\n        }\n\n        priceRanges.push({\n          minQuantity: minQuantity2,\n          maxQuantity: maxQuantity2,\n          price: price2\n        });\n      }\n      \n      // Build product data\n      const productData = {\n        name: name.trim(),\n        description: description.trim(),\n        category,\n        minOrder,\n        images,\n        priceRanges,\n        specifications: (formData.get('specifications') as string)\n          .split('\\n')\n          .map(spec => spec.trim())\n          .filter(spec => spec.length > 0)\n      };\n\n      // Create or update product\n      if (product) {\n        await updateProduct(product.id, productData);\n      } else {\n        const result = await createProduct(productData);\n        if (!result?.success) {\n          throw new Error('Failed to create product. Please try again.');\n        }\n      }\n      \n      onSuccess();\n      onClose();\n    } catch (err) {\n      const errorMessage = err instanceof Error ? err.message : 'An unexpected error occurred';\n      console.error('Form submission error:', err);\n      setError(errorMessage);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\n      <div className=\"bg-white rounded-lg w-full max-w-2xl max-h-[90vh] overflow-y-auto\">\n        <div className=\"p-6\">\n          <div className=\"flex justify-between items-center mb-4\">\n            <h2 className=\"text-xl font-semibold\">\n              {product ? 'Edit Product' : 'Add New Product'}\n            </h2>\n            <button onClick={onClose} className=\"text-gray-500 hover:text-gray-700\">\n              <X className=\"w-6 h-6\" />\n            </button>\n          </div>\n\n          {error && (\n            <div className=\"bg-red-50 text-red-600 p-4 rounded-lg mb-6\">\n              {error}\n            </div>\n          )}\n\n          <form onSubmit={handleSubmit} className=\"space-y-6\">\n            <FormField label=\"Product Name\">\n              <input\n                type=\"text\"\n                name=\"name\"\n                required\n                defaultValue={defaultValues.name}\n                className=\"w-full p-2 border rounded-lg\"\n              />\n            </FormField>\n\n            <FormField label=\"Description\">\n              <textarea\n                name=\"description\"\n                required\n                defaultValue={defaultValues.description}\n                rows={3}\n                className=\"w-full p-2 border rounded-lg\"\n              />\n            </FormField>\n\n            <FormField label=\"Category\">\n              <select\n                name=\"category\"\n                required\n                defaultValue={defaultValues.category}\n                className=\"w-full p-2 border rounded-lg\"\n              >\n                {CATEGORIES.map(category => (\n                  <option key={category} value={category}>\n                    {category}\n                  </option>\n                ))}\n              </select>\n            </FormField>\n\n            <FormField label=\"Image URLs (one per line)\">\n              <textarea\n                name=\"images\"\n                required\n                defaultValue={defaultValues.images}\n                rows={3}\n                className=\"w-full p-2 border rounded-lg\"\n                placeholder=\"https://example.com/image1.jpg&#10;https://example.com/image2.jpg\"\n              />\n            </FormField>\n\n            <FormField label=\"Minimum Order\">\n              <input\n                type=\"number\"\n                name=\"minOrder\"\n                required\n                min=\"1\"\n                defaultValue={defaultValues.minOrder}\n                className=\"w-full p-2 border rounded-lg\"\n              />\n            </FormField>\n\n            <div className=\"space-y-4\">\n              <h3 className=\"font-medium\">Price Ranges</h3>\n              <PriceRangeInputs \n                index={1} \n                required \n                defaultValues={product?.priceRanges[0]}\n              />\n              <PriceRangeInputs \n                index={2}\n                defaultValues={product?.priceRanges[1]}\n              />\n            </div>\n\n            <FormField label=\"Specifications (one per line)\">\n              <textarea\n                name=\"specifications\"\n                rows={3}\n                defaultValue={defaultValues.specifications}\n                className=\"w-full p-2 border rounded-lg\"\n                placeholder=\"4K Resolution&#10;Smart Features&#10;HDR Support\"\n              />\n            </FormField>\n\n            <div className=\"flex justify-end gap-4\">\n              <button\n                type=\"button\"\n                disabled={loading}\n                onClick={onClose}\n                className=\"px-4 py-2 text-gray-600 hover:text-gray-800 disabled:opacity-50\"\n              >\n                Cancel\n              </button>\n              <button\n                type=\"submit\"\n                disabled={loading}\n                className=\"px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50\"\n              >\n                {loading ? 'Saving...' : product ? 'Update Product' : 'Create Product'}\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\n\ninterface PaginationProps {\n  currentPage: number;\n  totalPages: number;\n  onPageChange: (page: number) => void;\n}\n\nexport function Pagination({ currentPage, totalPages, onPageChange }: PaginationProps) {\n  const pages = Array.from({ length: totalPages }, (_, i) => i + 1);\n  \n  // Show max 5 page numbers, with ellipsis if needed\n  const getVisiblePages = () => {\n    if (totalPages <= 5) return pages;\n    \n    if (currentPage <= 3) return [...pages.slice(0, 5), '...', totalPages];\n    if (currentPage >= totalPages - 2) return [1, '...', ...pages.slice(-5)];\n    \n    return [\n      1,\n      '...',\n      currentPage - 1,\n      currentPage,\n      currentPage + 1,\n      '...',\n      totalPages\n    ];\n  };\n\n  return (\n    <div className=\"flex items-center justify-center space-x-2\">\n      <button\n        onClick={() => onPageChange(currentPage - 1)}\n        disabled={currentPage === 1}\n        className=\"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n      >\n        <ChevronLeft className=\"w-5 h-5\" />\n      </button>\n      \n      {getVisiblePages().map((page, index) => (\n        <button\n          key={index}\n          onClick={() => typeof page === 'number' ? onPageChange(page) : null}\n          disabled={page === '...'}\n          className={`\n            min-w-[40px] h-10 px-4 rounded-lg border \n            ${page === currentPage \n              ? 'bg-purple-600 text-white border-purple-600' \n              : 'border-gray-300 hover:bg-gray-50'\n            }\n            ${page === '...' ? 'cursor-default' : ''}\n          `}\n        >\n          {page}\n        </button>\n      ))}\n      \n      <button\n        onClick={() => onPageChange(currentPage + 1)}\n        disabled={currentPage === totalPages}\n        className=\"p-2 rounded-lg border border-gray-300 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed\"\n      >\n        <ChevronRight className=\"w-5 h-5\" />\n      </button>\n    </div>\n  );\n}","import React, { useState } from 'react';\nimport { Plus, Search } from 'lucide-react';\nimport { AdminLayout } from '../../layouts/AdminLayout';\nimport { ProductTable } from '../../components/admin/ProductTable';\nimport { ProductForm } from '../../components/admin/ProductForm';\nimport { useProducts } from '../../hooks/useProducts';\nimport { Pagination } from '../../components/Pagination';\n\nexport function ProductList() {\n  const [showForm, setShowForm] = useState(false);\n  const [editingProduct, setEditingProduct] = useState<Product | null>(null);\n  const {\n    products,\n    loading,\n    error,\n    totalPages,\n    currentPage,\n    setCurrentPage,\n    searchQuery,\n    setSearchQuery,\n    reloadProducts\n  } = useProducts();\n\n  const handleEdit = (product: Product) => {\n    setEditingProduct(product);\n    setShowForm(true);\n  };\n\n  const handleCloseForm = () => {\n    setShowForm(false);\n    setEditingProduct(null);\n  };\n\n  const handleSearch = (e: React.FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    setCurrentPage(1); // Reset to first page when searching\n  };\n\n  return (\n    <AdminLayout \n      title=\"Products\"\n      description=\"Manage your product catalog\"\n    >\n      <div className=\"flex justify-between items-center mb-8\">\n        <form onSubmit={handleSearch} className=\"relative w-96\">\n          <input\n            type=\"text\"\n            value={searchQuery}\n            onChange={(e) => setSearchQuery(e.target.value)}\n            placeholder=\"Search products...\"\n            className=\"w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n          />\n          <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n        </form>\n\n        <button\n          onClick={() => setShowForm(true)}\n          className=\"bg-purple-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 hover:bg-purple-700\"\n        >\n          <Plus className=\"w-5 h-5\" />\n          Add Product\n        </button>\n      </div>\n\n      {error && (\n        <div className=\"bg-red-50 text-red-600 p-4 rounded-lg mb-6\">\n          {error}\n        </div>\n      )}\n\n      <ProductTable \n        products={products} \n        loading={loading} \n        onEdit={handleEdit}\n        onRefresh={reloadProducts}\n      />\n      \n      {totalPages > 1 && (\n        <div className=\"mt-8\">\n          <Pagination\n            currentPage={currentPage}\n            totalPages={totalPages}\n            onPageChange={setCurrentPage}\n          />\n        </div>\n      )}\n\n      {showForm && (\n        <ProductForm\n          product={editingProduct}\n          onClose={handleCloseForm}\n          onSuccess={() => {\n            handleCloseForm();\n            reloadProducts();\n          }}\n        />\n      )}\n    </AdminLayout>\n  );\n}","import React from 'react';\nimport { Pencil, Archive, ArchiveRestore, Trash2 } from 'lucide-react';\nimport { Product } from '../../../types';\nimport { deleteProduct, toggleArchiveProduct } from '../../../api/products';\n\ninterface ProductActionsProps {\n  product: Product;\n  onEdit: (product: Product) => void;\n  onRefresh: () => void;\n}\n\nexport function ProductActions({ product, onEdit, onRefresh }: ProductActionsProps) {\n  const [isDeleting, setIsDeleting] = React.useState(false);\n  const [isArchiving, setIsArchiving] = React.useState(false);\n\n  const handleDelete = async () => {\n    if (!confirm('Are you sure you want to delete this product?')) return;\n    \n    try {\n      setIsDeleting(true);\n      await deleteProduct(product.id);\n      onRefresh();\n    } catch (error) {\n      console.error('Error deleting product:', error);\n      alert('Failed to delete product');\n    } finally {\n      setIsDeleting(false);\n    }\n  };\n\n  const handleArchive = async () => {\n    try {\n      setIsArchiving(true);\n      await toggleArchiveProduct(product.id, !product.isArchived);\n      onRefresh();\n    } catch (error) {\n      console.error('Error archiving product:', error);\n      alert('Failed to update product status');\n    } finally {\n      setIsArchiving(false);\n    }\n  };\n\n  return (\n    <div className=\"flex gap-4 mt-8 border-t pt-8\">\n      <button\n        onClick={() => onEdit(product)}\n        className=\"flex items-center gap-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors\"\n      >\n        <Pencil className=\"w-4 h-4\" />\n        Edit Product\n      </button>\n      \n      <button\n        onClick={handleArchive}\n        disabled={isArchiving}\n        className=\"flex items-center gap-2 px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors\"\n      >\n        {product.isArchived ? (\n          <>\n            <ArchiveRestore className=\"w-4 h-4\" />\n            Restore Product\n          </>\n        ) : (\n          <>\n            <Archive className=\"w-4 h-4\" />\n            Archive Product\n          </>\n        )}\n      </button>\n      \n      <button\n        onClick={handleDelete}\n        disabled={isDeleting}\n        className=\"flex items-center gap-2 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors\"\n      >\n        <Trash2 className=\"w-4 h-4\" />\n        Delete Product\n      </button>\n    </div>\n  );\n}","import React, { useState } from 'react';\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\n\ninterface ImageSlideshowProps {\n  images: string[];\n  productName: string;\n}\n\nexport function ImageSlideshow({ images, productName }: ImageSlideshowProps) {\n  const [currentIndex, setCurrentIndex] = useState(0);\n\n  const goToNext = () => {\n    setCurrentIndex((prevIndex) => \n      prevIndex === images.length - 1 ? 0 : prevIndex + 1\n    );\n  };\n\n  const goToPrevious = () => {\n    setCurrentIndex((prevIndex) => \n      prevIndex === 0 ? images.length - 1 : prevIndex - 1\n    );\n  };\n\n  return (\n    <div className=\"relative\">\n      <div className=\"aspect-square overflow-hidden rounded-lg\">\n        <img \n          src={images[currentIndex]} \n          alt={`${productName} - Image ${currentIndex + 1}`}\n          className=\"w-full h-full object-cover\"\n        />\n      </div>\n      \n      {/* Navigation Buttons */}\n      <button \n        onClick={goToPrevious}\n        className=\"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70\"\n      >\n        <ChevronLeft className=\"w-6 h-6\" />\n      </button>\n      <button \n        onClick={goToNext}\n        className=\"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70\"\n      >\n        <ChevronRight className=\"w-6 h-6\" />\n      </button>\n\n      {/* Thumbnail Navigation */}\n      <div className=\"flex gap-2 mt-4\">\n        {images.map((image, index) => (\n          <button\n            key={index}\n            onClick={() => setCurrentIndex(index)}\n            className={`w-16 h-16 rounded-md overflow-hidden border-2 transition-colors\n              ${currentIndex === index ? 'border-purple-600' : 'border-transparent'}`}\n          >\n            <img \n              src={image} \n              alt={`${productName} - Thumbnail ${index + 1}`}\n              className=\"w-full h-full object-cover\"\n            />\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n}","import React from 'react';\nimport { PriceRange } from '../../types';\nimport { formatPrice, formatQuantityRange } from '../../utils/formatting';\n\ninterface PriceRangeTableProps {\n  priceRanges: PriceRange[];\n}\n\nexport function PriceRangeTable({ priceRanges }: PriceRangeTableProps) {\n  return (\n    <div className=\"bg-gray-50 p-4 rounded-lg mb-6\">\n      <h2 className=\"text-lg font-semibold mb-3\">Price Ranges</h2>\n      {priceRanges.map((range, index) => (\n        <div key={index} className=\"flex justify-between py-2 border-b last:border-0\">\n          <span>{formatQuantityRange(range)}</span>\n          <span className=\"font-semibold\">{formatPrice(range.price)}</span>\n        </div>\n      ))}\n    </div>\n  );\n}","import React from 'react';\n\ninterface ProductSpecificationsProps {\n  specifications: string[];\n}\n\nexport function ProductSpecifications({ specifications }: ProductSpecificationsProps) {\n  return (\n    <div>\n      <h2 className=\"text-lg font-semibold mb-3\">Specifications</h2>\n      <ul className=\"list-disc list-inside text-gray-600\">\n        {specifications.map((spec, index) => (\n          <li key={index}>{spec}</li>\n        ))}\n      </ul>\n    </div>\n  );\n}","import React, { useState } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { AdminLayout } from '../../layouts/AdminLayout';\nimport { useProduct } from '../../hooks/useProducts';\nimport { ProductForm } from '../../components/admin/ProductForm';\nimport { ProductActions } from '../../components/admin/product/ProductActions';\nimport { ImageSlideshow } from '../../components/ImageSlideshow';\nimport { PriceRangeTable } from '../../components/product/PriceRangeTable';\nimport { ProductSpecifications } from '../../components/product/ProductSpecifications';\nimport { SHIPPING_TIME } from '../../config/constants';\n\nexport function AdminProductDetail() {\n  const { id } = useParams();\n  const { product, loading, error, reloadProduct } = useProduct(id!);\n  const [showEditForm, setShowEditForm] = useState(false);\n\n  if (loading) {\n    return (\n      <AdminLayout title=\"Product Details\">\n        <div className=\"animate-pulse\">\n          <div className=\"bg-gray-200 h-64 rounded-lg mb-4\"></div>\n          <div className=\"h-8 bg-gray-200 rounded mb-4\"></div>\n          <div className=\"h-4 bg-gray-200 rounded w-2/3 mb-2\"></div>\n        </div>\n      </AdminLayout>\n    );\n  }\n\n  if (error || !product) {\n    return (\n      <AdminLayout title=\"Product Details\">\n        <div className=\"text-red-600\">\n          {error || 'Product not found'}\n        </div>\n      </AdminLayout>\n    );\n  }\n\n  return (\n    <AdminLayout \n      title=\"Product Details\"\n      description={`Managing ${product.name}`}\n    >\n      <div className=\"bg-white rounded-lg shadow-sm\">\n        <div className=\"p-6\">\n          <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n            {/* Left Column - Images */}\n            <div>\n              <ImageSlideshow \n                images={product.images} \n                productName={product.name} \n              />\n            </div>\n\n            {/* Right Column - Details */}\n            <div>\n              <h1 className=\"text-2xl font-bold text-gray-800 mb-4\">\n                {product.name}\n              </h1>\n\n              <PriceRangeTable priceRanges={product.priceRanges} />\n\n              <div className=\"mb-6\">\n                <p className=\"text-gray-600\">\n                  Shipping Time: {SHIPPING_TIME}\n                </p>\n                <p className=\"text-gray-600\">\n                  Minimum Order: {product.minOrder} piece(s)\n                </p>\n                <p className=\"text-gray-600\">\n                  Status: {product.isArchived ? 'Archived' : 'Active'}\n                </p>\n              </div>\n\n              <div className=\"space-y-8\">\n                <div>\n                  <h2 className=\"text-xl font-semibold mb-3\">\n                    Product Description\n                  </h2>\n                  <p className=\"text-gray-600 whitespace-pre-wrap\">\n                    {product.description}\n                  </p>\n                </div>\n\n                {product.specifications?.length > 0 && (\n                  <ProductSpecifications \n                    specifications={product.specifications} \n                  />\n                )}\n\n                <ProductActions\n                  product={product}\n                  onEdit={() => setShowEditForm(true)}\n                  onRefresh={reloadProduct}\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {showEditForm && (\n        <ProductForm\n          product={product}\n          onClose={() => setShowEditForm(false)}\n          onSuccess={() => {\n            setShowEditForm(false);\n            reloadProduct();\n          }}\n        />\n      )}\n    </AdminLayout>\n  );\n}","import { supabase } from '../lib/supabase';\nimport type { User } from '@supabase/supabase-js';\n\n\nasync function delay(ms: number) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\nexport async function signIn(email: string, password: string) {\n  const normalizedEmail = email?.toLowerCase().trim();\n  \n  if (!normalizedEmail || !password) {\n    throw new Error('Email and password are required');\n  }\n\n  try {\n    let retries = 3;\n    let lastError;\n\n    while (retries > 0) {\n      const { data, error } = await supabase.auth.signInWithPassword({\n        email: normalizedEmail,\n        password\n      });\n    \n      if (error) {\n        lastError = error;\n        retries--;\n        if (retries > 0) {\n          await delay(1000);\n          continue;\n        }\n        break;\n      }\n\n      return data;\n    }\n\n    throw new Error('An error occurred during sign in. Please try again.');\n  } catch (error) {\n    console.error('Sign in error:', error);\n    throw error;\n  }\n}\n\nexport async function signOut() {\n  const { error } = await supabase.auth.signOut();\n  if (error) {\n    throw new Error('An error occurred during sign out. Please try again.');\n  }\n}\n\nexport async function getCurrentUser(): Promise<User | null> {\n  const { data: { user }, error } = await supabase.auth.getUser();\n  \n  if (error && error.name !== 'AuthSessionMissingError') {\n    console.error('Error getting current user:', error);\n  }\n  \n  return user;\n}\n\nexport async function setupInitialAdmin() {\n  try {\n    const { data: { user: existingUser } } = await supabase.auth.getUser();\n    if (existingUser) {\n      return;\n    }\n\n    const { data, error } = await supabase.auth.signUp({\n      email: 'admin@apristo.com',\n      password: 'admin123',\n      options: {\n        data: { role: 'ADMIN' }\n      }\n    });\n\n    if (error) throw error;\n    if (!data.user) throw new Error('Failed to create admin user');\n\n    await delay(1000); // Wait for auth to settle\n\n    const { error: roleError } = await supabase\n      .from('user_roles')\n      .insert({\n        user_id: data.user.id,\n        role: 'ADMIN'\n      });\n\n    if (roleError) throw roleError;\n  } catch (error) {\n    console.error('Error in setupInitialAdmin:', error);\n    throw error;\n  }\n}","import { supabase } from '../lib/supabase';\n\nexport interface CreateUserData {\n  email: string;\n  password: string;\n  role: 'ADMIN' | 'EDITOR';\n}\n\nexport interface User {\n  id: string;\n  email: string;\n  role?: string;\n}\n\nexport async function createUser(data: CreateUserData): Promise<void> {\n  const { data: { user }, error: signUpError } = await supabase.auth.signUp({\n    email: data.email,\n    password: data.password\n  });\n\n  if (signUpError) throw signUpError;\n  if (!user) throw new Error('Failed to create user');\n\n  const { error: roleError } = await supabase\n    .from('user_roles')\n    .insert({\n      user_id: user.id,\n      role: data.role\n    });\n\n  if (roleError) throw roleError;\n}\n\nexport async function getUsers(): Promise<User[]> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('Unauthorized');\n\n  // Check if user is admin\n  const { data: roleData } = await supabase\n    .from('user_roles')\n    .select('role')\n    .eq('user_id', user.id)\n    .single();\n\n  if (roleData?.role !== 'ADMIN') {\n    throw new Error('Unauthorized - Admin access required');\n  }\n\n  const { data: users, error } = await supabase\n    .from('user_roles')\n    .select(`\n      user_id,\n      role,\n      users:user_id (\n        email\n      )\n    `);\n\n  if (error) throw error;\n\n  return users.map(u => ({\n    id: u.user_id,\n    email: u.users.email,\n    role: u.role\n  }));\n}\n\nexport async function getCurrentUserRole(): Promise<string | null> {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) return null;\n\n  const { data, error } = await supabase\n    .from('user_roles')\n    .select('role')\n    .eq('user_id', user.id)\n    .single();\n\n  if (error) return null;\n  return data.role;\n}\n\nexport async function updateUserRole(userId: string, role: 'ADMIN' | 'EDITOR') {\n  const { data: { user } } = await supabase.auth.getUser();\n  if (!user) throw new Error('Unauthorized');\n\n  const { error } = await supabase\n    .from('user_roles')\n    .upsert({\n      user_id: userId,\n      role,\n      created_by: user.id\n    }, {\n      onConflict: 'user_id'\n    });\n\n  if (error) throw error;\n}","import React, { useState, useEffect } from 'react';\nimport { AdminLayout } from '../../layouts/AdminLayout';\nimport { LogOut, UserPlus, Shield } from 'lucide-react';\nimport { signOut } from '../../api/auth';\nimport { getUsers, updateUserRole, getCurrentUserRole, User } from '../../api/users';\n\nexport function Settings() {\n  const [users, setUsers] = useState<User[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n  const [currentUserRole, setCurrentUserRole] = useState<string | null>(null);\n\n  useEffect(() => {\n    async function loadData() {\n      try {\n        setLoading(true);\n        const [usersData, role] = await Promise.all([\n          getUsers().catch(() => []),\n          getCurrentUserRole()\n        ]);\n        setUsers(usersData);\n        setCurrentUserRole(role);\n      } catch (err) {\n        setError('Failed to load users');\n        console.error(err);\n      } finally {\n        setLoading(false);\n      }\n    }\n    loadData();\n  }, []);\n\n  const handleLogout = async () => {\n    try {\n      await signOut();\n      window.location.href = '/admin/login';\n    } catch (error) {\n      console.error('Error signing out:', error);\n    }\n  };\n\n  const handleRoleChange = async (userId: string, newRole: 'ADMIN' | 'EDITOR') => {\n    try {\n      await updateUserRole(userId, newRole);\n      setUsers(users.map(user => \n        user.id === userId ? { ...user, role: newRole } : user\n      ));\n    } catch (error) {\n      console.error('Error updating role:', error);\n      alert('Failed to update user role');\n    }\n  };\n\n  return (\n    <AdminLayout\n      title=\"Settings\"\n      description=\"Manage your account and user permissions\"\n    >\n      <div className=\"space-y-8\">\n        {/* Account Section */}\n        <div className=\"bg-white rounded-lg shadow-sm p-6\">\n          <h2 className=\"text-xl font-semibold mb-6\">Account</h2>\n          <button\n            onClick={handleLogout}\n            className=\"flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors\"\n          >\n            <LogOut className=\"w-5 h-5\" />\n            Sign Out\n          </button>\n        </div>\n\n        {/* User Management Section */}\n        {currentUserRole === 'ADMIN' && (\n          <div className=\"bg-white rounded-lg shadow-sm p-6\">\n            <h2 className=\"text-xl font-semibold mb-6\">User Management</h2>\n            \n            {error && (\n              <div className=\"bg-red-50 text-red-600 p-4 rounded-lg mb-6\">\n                {error}\n              </div>\n            )}\n\n            {loading ? (\n              <div className=\"animate-pulse space-y-4\">\n                {[1, 2, 3].map(i => (\n                  <div key={i} className=\"h-12 bg-gray-200 rounded\" />\n                ))}\n              </div>\n            ) : (\n              <div className=\"overflow-x-auto\">\n                <table className=\"min-w-full divide-y divide-gray-200\">\n                  <thead className=\"bg-gray-50\">\n                    <tr>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Email\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Role\n                      </th>\n                      <th className=\"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider\">\n                        Actions\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"bg-white divide-y divide-gray-200\">\n                    {users.map(user => (\n                      <tr key={user.id}>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          {user.email}\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <span className={`px-2 inline-flex text-xs leading-5 font-semibold rounded-full ${\n                            user.role === 'ADMIN' ? 'bg-purple-100 text-purple-800' : 'bg-green-100 text-green-800'\n                          }`}>\n                            {user.role}\n                          </span>\n                        </td>\n                        <td className=\"px-6 py-4 whitespace-nowrap\">\n                          <select\n                            value={user.role}\n                            onChange={(e) => handleRoleChange(user.id, e.target.value as 'ADMIN' | 'EDITOR')}\n                            className=\"mt-1 block w-full pl-3 pr-10 py-2 text-base border-gray-300 focus:outline-none focus:ring-purple-500 focus:border-purple-500 sm:text-sm rounded-md\"\n                          >\n                            <option value=\"EDITOR\">Editor</option>\n                            <option value=\"ADMIN\">Admin</option>\n                          </select>\n                        </td>\n                      </tr>\n                    ))}\n                  </tbody>\n                </table>\n              </div>\n            )}\n          </div>\n        )}\n      </div>\n    </AdminLayout>\n  );\n}","import React, { useState, useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { signIn } from '../../api/auth';\nimport { checkConnection } from '../../lib/database/connection';\nimport { supabase } from '../../lib/supabase';\n\nexport function Login() {\n  const [email, setEmail] = useState('');\n  const [password, setPassword] = useState('');\n  const [error, setError] = useState<string | null>(null);\n  const [loading, setLoading] = useState(false);\n  const [connectionError, setConnectionError] = useState<string | null>(null);\n  const navigate = useNavigate();\n  \n  async function init() {\n    try {\n      const isOnline = await checkConnection();\n      if (!isOnline) {\n        setConnectionError('Unable to connect to server');\n        return;\n      }\n\n      const { data: { session } } = await supabase.auth.getSession();\n      if (session?.user) {\n        navigate('/admin');\n        return;\n      }\n\n      setConnectionError(null);\n    } catch (error) {\n      console.error('Setup error:', error);\n      setConnectionError('Failed to connect to server');\n    } finally {\n      setLoading(false);\n    }\n  }\n\n  useEffect(() => {\n    init();\n  }, [navigate]);\n\n  const handleRetry = async () => {\n    setConnectionError(null);\n    init();\n  };\n\n  if (connectionError) {\n    return (\n      <div className=\"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n        <div className=\"max-w-md w-full space-y-8 text-center\">\n          <div className=\"bg-white p-8 rounded-lg shadow-sm\">\n            <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Connection Error</h2>\n            <p className=\"text-gray-600 mb-6\">{connectionError}</p>\n            <button\n              onClick={handleRetry}\n              className=\"bg-purple-600 text-white px-6 py-2 rounded-lg hover:bg-purple-700\"\n            >\n              Retry Connection\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    try {\n      const trimmedEmail = email.trim();\n      if (!trimmedEmail || !password) {\n        setError('Please enter both email and password');\n        return;\n      }\n\n      setLoading(true);\n      setError(null);\n      const { session } = await signIn(trimmedEmail, password);\n      if (session) {\n        navigate('/admin');\n      } else {\n        throw new Error('Failed to create session');\n      }\n    } catch (err) {\n      const message = err instanceof Error ? err.message : 'Invalid email or password';\n      setError(message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8\">\n      <div className=\"max-w-md w-full space-y-8\">\n        <div>\n          <h2 className=\"mt-6 text-center text-3xl font-extrabold text-gray-900\">\n            Apristo Admin\n          </h2>\n          \n          {error && (\n            <div className=\"bg-red-50 text-red-600 p-4 rounded-lg text-center mt-4\">\n              {error}\n            </div>\n          )}\n\n          <form className=\"mt-8 space-y-6\" onSubmit={handleSubmit}>\n          <div className=\"rounded-md shadow-sm -space-y-px\">\n            <div>\n              <label htmlFor=\"email\" className=\"sr-only\">Email address</label>\n              <input\n                id=\"email\"\n                name=\"email\"\n                type=\"email\"\n                required\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-purple-500 focus:border-purple-500 focus:z-10 sm:text-sm\"\n                placeholder=\"Email address\"\n              />\n            </div>\n            <div>\n              <label htmlFor=\"password\" className=\"sr-only\">Password</label>\n              <input\n                id=\"password\"\n                name=\"password\"\n                type=\"password\"\n                required\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                className=\"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-purple-500 focus:border-purple-500 focus:z-10 sm:text-sm\"\n                placeholder=\"Password\"\n              />\n            </div>\n          </div>\n\n          <div>\n            <button\n              type=\"submit\"\n              disabled={loading}\n              className=\"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-purple-600 hover:bg-purple-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-purple-500 disabled:opacity-50\"\n            >\n              {loading ? 'Signing in...' : 'Sign in'}\n            </button>\n          </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  );\n}","import { useState, useEffect, useCallback } from 'react';\nimport { supabase } from '../lib/supabase';\nimport type { User } from '@supabase/supabase-js';\n\nexport function useAuth() {\n  const [user, setUser] = useState<User | null>(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const loadUser = useCallback(async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      const { data: { user: currentUser }, error: userError } = await supabase.auth.getUser();\n\n      if (userError) {\n        if (userError.name === 'AuthSessionMissingError') {\n          setUser(null);\n          return;\n        }\n        throw userError;\n      }\n\n      setUser(currentUser);\n    } catch (err) {\n      console.error('Error loading user:', err);\n      setError(err instanceof Error ? err.message : 'Failed to load user');\n      setUser(null);\n    } finally {\n      setLoading(false);\n    }\n  }, []);\n\n  useEffect(() => {\n    loadUser();\n\n    const { data: { subscription } } = supabase.auth.onAuthStateChange(async (event, session) => {\n      if (event === 'SIGNED_IN') {\n        setUser(session?.user ?? null);\n      } else if (event === 'SIGNED_OUT') {\n        setUser(null);\n      } else if (event === 'USER_UPDATED') {\n        setUser(session?.user ?? null);\n      }\n    });\n\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, [loadUser]);\n\n  return {\n    user,\n    loading,\n    error,\n    refresh: loadUser\n  };\n}\n","// components/admin/AuthGuard.tsx\nimport React, { useState, useEffect } from 'react';\nimport { Navigate, useNavigate } from 'react-router-dom';\nimport { useAuth } from '../../hooks/useAuth';\nimport { supabase } from '../../lib/supabase';\n\ninterface AuthGuardProps {\n  children: React.ReactNode;\n}\n\nexport function AuthGuard({ children }: AuthGuardProps) {\n  const { user, loading, error } = useAuth();\n  const navigate = useNavigate();\n  const [isCheckingRole, setIsCheckingRole] = useState(true);\n  const [hasValidRole, setHasValidRole] = useState(false);\n\n  useEffect(() => {\n    let mounted = true;\n\n    async function checkUserRole() {\n      if (!user) {\n        setIsCheckingRole(false);\n        return;\n      }\n\n      try {\n        const { data: roleData, error: roleError } = await supabase\n          .from('user_roles')\n          .select('role')\n          .eq('user_id', user.id)\n          .single();\n\n        if (mounted) {\n          if (roleError || !roleData) {\n            console.error('Role check error:', roleError);\n            setHasValidRole(false);\n          } else {\n            setHasValidRole(['ADMIN', 'EDITOR'].includes(roleData.role));\n          }\n          setIsCheckingRole(false);\n        }\n      } catch (error) {\n        console.error('Error checking role:', error);\n        if (mounted) {\n          setHasValidRole(false);\n          setIsCheckingRole(false);\n        }\n      }\n    }\n\n    checkUserRole();\n\n    const { data: { subscription } } = supabase.auth.onAuthStateChange((event) => {\n      if (event === 'SIGNED_OUT') {\n        if (mounted) {\n          setHasValidRole(false);\n          navigate('/admin/login');\n        }\n      }\n    });\n\n    return () => {\n      mounted = false;\n      subscription.unsubscribe();\n    };\n  }, [user, navigate]);\n\n  // Show loading state\n  if (loading || isCheckingRole) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"bg-white p-8 rounded-lg shadow-sm text-center\">\n          <div className=\"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-purple-500 mx-auto\"></div>\n          <p className=\"mt-4 text-gray-600\">Authenticating...</p>\n        </div>\n      </div>\n    );\n  }\n\n  // Handle error state\n  if (error) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"bg-white p-8 rounded-lg shadow-sm text-center\">\n          <p className=\"text-red-500\">{error}</p>\n          <button\n            onClick={() => navigate('/admin/login')}\n            className=\"mt-4 px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700\"\n          >\n            Back to Login\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Redirect if not authenticated\n  if (!user) {\n    return <Navigate to=\"/admin/login\" replace />;\n  }\n\n  // Redirect if no valid role\n  if (!hasValidRole) {\n    return (\n      <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\n        <div className=\"bg-white p-8 rounded-lg shadow-sm text-center\">\n          <p className=\"text-red-500\">You do not have permission to access this area.</p>\n          <button\n            onClick={() => navigate('/')}\n            className=\"mt-4 px-4 py-2 bg-purple-600 text-white rounded hover:bg-purple-700\"\n          >\n            Go to Homepage\n          </button>\n        </div>\n      </div>\n    );\n  }\n\n  // Render children if authenticated and has valid role\n  return <>{children}</>;\n}\n","/*! @license is-dom-node v1.0.4\n\n\tCopyright 2018 Fisssion LLC.\n\n\tPermission is hereby granted, free of charge, to any person obtaining a copy\n\tof this software and associated documentation files (the \"Software\"), to deal\n\tin the Software without restriction, including without limitation the rights\n\tto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\tcopies of the Software, and to permit persons to whom the Software is\n\tfurnished to do so, subject to the following conditions:\n\n\tThe above copyright notice and this permission notice shall be included in all\n\tcopies or substantial portions of the Software.\n\n\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\tIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n\tAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\tLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\tOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n\tSOFTWARE.\n\n*/\nfunction isDomNode(x) {\n\treturn typeof window.Node === 'object'\n\t\t? x instanceof window.Node\n\t\t: x !== null &&\n\t\t\t\ttypeof x === 'object' &&\n\t\t\t\ttypeof x.nodeType === 'number' &&\n\t\t\t\ttypeof x.nodeName === 'string'\n}\n\nexport default isDomNode;\n","/*! @license is-dom-node-list v1.2.1\n\n\tCopyright 2018 Fisssion LLC.\n\n\tPermission is hereby granted, free of charge, to any person obtaining a copy\n\tof this software and associated documentation files (the \"Software\"), to deal\n\tin the Software without restriction, including without limitation the rights\n\tto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\tcopies of the Software, and to permit persons to whom the Software is\n\tfurnished to do so, subject to the following conditions:\n\n\tThe above copyright notice and this permission notice shall be included in all\n\tcopies or substantial portions of the Software.\n\n\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\tIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n\tAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\tLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\tOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n\tSOFTWARE.\n\n*/\nimport isDomNode from 'is-dom-node';\n\nfunction isDomNodeList(x) {\n\tvar prototypeToString = Object.prototype.toString.call(x);\n\tvar regex = /^\\[object (HTMLCollection|NodeList|Object)\\]$/;\n\n\treturn typeof window.NodeList === 'object'\n\t\t? x instanceof window.NodeList\n\t\t: x !== null &&\n\t\t\t\ttypeof x === 'object' &&\n\t\t\t\ttypeof x.length === 'number' &&\n\t\t\t\tregex.test(prototypeToString) &&\n\t\t\t\t(x.length === 0 || isDomNode(x[0]))\n}\n\nexport default isDomNodeList;\n","/*! @license Tealight v0.3.6\n\n\tCopyright 2018 Fisssion LLC.\n\n\tPermission is hereby granted, free of charge, to any person obtaining a copy\n\tof this software and associated documentation files (the \"Software\"), to deal\n\tin the Software without restriction, including without limitation the rights\n\tto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n\tcopies of the Software, and to permit persons to whom the Software is\n\tfurnished to do so, subject to the following conditions:\n\n\tThe above copyright notice and this permission notice shall be included in all\n\tcopies or substantial portions of the Software.\n\n\tTHE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n\tIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n\tFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n\tAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n\tLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n\tOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\n\tSOFTWARE.\n\n*/\nimport isDomNode from 'is-dom-node';\nimport isDomNodeList from 'is-dom-node-list';\n\nfunction tealight(target, context) {\n  if ( context === void 0 ) context = document;\n\n  if (target instanceof Array) { return target.filter(isDomNode); }\n  if (isDomNode(target)) { return [target]; }\n  if (isDomNodeList(target)) { return Array.prototype.slice.call(target); }\n  if (typeof target === \"string\") {\n    try {\n      var query = context.querySelectorAll(target);\n      return Array.prototype.slice.call(query);\n    } catch (err) {\n      return [];\n    }\n  }\n  return [];\n}\n\nexport default tealight;\n","'use strict';\n\nvar hasOwn = Object.prototype.hasOwnProperty;\nvar toStr = Object.prototype.toString;\nvar defineProperty = Object.defineProperty;\nvar gOPD = Object.getOwnPropertyDescriptor;\n\nvar isArray = function isArray(arr) {\n\tif (typeof Array.isArray === 'function') {\n\t\treturn Array.isArray(arr);\n\t}\n\n\treturn toStr.call(arr) === '[object Array]';\n};\n\nvar isPlainObject = function isPlainObject(obj) {\n\tif (!obj || toStr.call(obj) !== '[object Object]') {\n\t\treturn false;\n\t}\n\n\tvar hasOwnConstructor = hasOwn.call(obj, 'constructor');\n\tvar hasIsPrototypeOf = obj.constructor && obj.constructor.prototype && hasOwn.call(obj.constructor.prototype, 'isPrototypeOf');\n\t// Not own constructor property must be Object\n\tif (obj.constructor && !hasOwnConstructor && !hasIsPrototypeOf) {\n\t\treturn false;\n\t}\n\n\t// Own properties are enumerated firstly, so to speed up,\n\t// if last one is own, then all properties are own.\n\tvar key;\n\tfor (key in obj) { /**/ }\n\n\treturn typeof key === 'undefined' || hasOwn.call(obj, key);\n};\n\n// If name is '__proto__', and Object.defineProperty is available, define __proto__ as an own property on target\nvar setProperty = function setProperty(target, options) {\n\tif (defineProperty && options.name === '__proto__') {\n\t\tdefineProperty(target, options.name, {\n\t\t\tenumerable: true,\n\t\t\tconfigurable: true,\n\t\t\tvalue: options.newValue,\n\t\t\twritable: true\n\t\t});\n\t} else {\n\t\ttarget[options.name] = options.newValue;\n\t}\n};\n\n// Return undefined instead of __proto__ if '__proto__' is not an own property\nvar getProperty = function getProperty(obj, name) {\n\tif (name === '__proto__') {\n\t\tif (!hasOwn.call(obj, name)) {\n\t\t\treturn void 0;\n\t\t} else if (gOPD) {\n\t\t\t// In early versions of node, obj['__proto__'] is buggy when obj has\n\t\t\t// __proto__ as an own property. Object.getOwnPropertyDescriptor() works.\n\t\t\treturn gOPD(obj, name).value;\n\t\t}\n\t}\n\n\treturn obj[name];\n};\n\nmodule.exports = function extend() {\n\tvar options, name, src, copy, copyIsArray, clone;\n\tvar target = arguments[0];\n\tvar i = 1;\n\tvar length = arguments.length;\n\tvar deep = false;\n\n\t// Handle a deep copy situation\n\tif (typeof target === 'boolean') {\n\t\tdeep = target;\n\t\ttarget = arguments[1] || {};\n\t\t// skip the boolean and the target\n\t\ti = 2;\n\t}\n\tif (target == null || (typeof target !== 'object' && typeof target !== 'function')) {\n\t\ttarget = {};\n\t}\n\n\tfor (; i < length; ++i) {\n\t\toptions = arguments[i];\n\t\t// Only deal with non-null/undefined values\n\t\tif (options != null) {\n\t\t\t// Extend the base object\n\t\t\tfor (name in options) {\n\t\t\t\tsrc = getProperty(target, name);\n\t\t\t\tcopy = getProperty(options, name);\n\n\t\t\t\t// Prevent never-ending loop\n\t\t\t\tif (target !== copy) {\n\t\t\t\t\t// Recurse if we're merging plain objects or arrays\n\t\t\t\t\tif (deep && copy && (isPlainObject(copy) || (copyIsArray = isArray(copy)))) {\n\t\t\t\t\t\tif (copyIsArray) {\n\t\t\t\t\t\t\tcopyIsArray = false;\n\t\t\t\t\t\t\tclone = src && isArray(src) ? src : [];\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tclone = src && isPlainObject(src) ? src : {};\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Never move original objects, clone them\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: extend(deep, clone, copy) });\n\n\t\t\t\t\t// Don't bring in undefined values\n\t\t\t\t\t} else if (typeof copy !== 'undefined') {\n\t\t\t\t\t\tsetProperty(target, { name: name, newValue: copy });\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// Return the modified object\n\treturn target;\n};\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the `TypeError` message for \"Functions\" methods. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max,\n    nativeMin = Math.min;\n\n/**\n * Gets the timestamp of the number of milliseconds that have elapsed since\n * the Unix epoch (1 January 1970 00:00:00 UTC).\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Date\n * @returns {number} Returns the timestamp.\n * @example\n *\n * _.defer(function(stamp) {\n *   console.log(_.now() - stamp);\n * }, _.now());\n * // => Logs the number of milliseconds it took for the deferred invocation.\n */\nvar now = function() {\n  return root.Date.now();\n};\n\n/**\n * Creates a debounced function that delays invoking `func` until after `wait`\n * milliseconds have elapsed since the last time the debounced function was\n * invoked. The debounced function comes with a `cancel` method to cancel\n * delayed `func` invocations and a `flush` method to immediately invoke them.\n * Provide `options` to indicate whether `func` should be invoked on the\n * leading and/or trailing edge of the `wait` timeout. The `func` is invoked\n * with the last arguments provided to the debounced function. Subsequent\n * calls to the debounced function return the result of the last `func`\n * invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the debounced function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.debounce` and `_.throttle`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to debounce.\n * @param {number} [wait=0] The number of milliseconds to delay.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=false]\n *  Specify invoking on the leading edge of the timeout.\n * @param {number} [options.maxWait]\n *  The maximum time `func` is allowed to be delayed before it's invoked.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new debounced function.\n * @example\n *\n * // Avoid costly calculations while the window size is in flux.\n * jQuery(window).on('resize', _.debounce(calculateLayout, 150));\n *\n * // Invoke `sendMail` when clicked, debouncing subsequent calls.\n * jQuery(element).on('click', _.debounce(sendMail, 300, {\n *   'leading': true,\n *   'trailing': false\n * }));\n *\n * // Ensure `batchLog` is invoked once after 1 second of debounced calls.\n * var debounced = _.debounce(batchLog, 250, { 'maxWait': 1000 });\n * var source = new EventSource('/stream');\n * jQuery(source).on('message', debounced);\n *\n * // Cancel the trailing debounced invocation.\n * jQuery(window).on('popstate', debounced.cancel);\n */\nfunction debounce(func, wait, options) {\n  var lastArgs,\n      lastThis,\n      maxWait,\n      result,\n      timerId,\n      lastCallTime,\n      lastInvokeTime = 0,\n      leading = false,\n      maxing = false,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  wait = toNumber(wait) || 0;\n  if (isObject(options)) {\n    leading = !!options.leading;\n    maxing = 'maxWait' in options;\n    maxWait = maxing ? nativeMax(toNumber(options.maxWait) || 0, wait) : maxWait;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n\n  function invokeFunc(time) {\n    var args = lastArgs,\n        thisArg = lastThis;\n\n    lastArgs = lastThis = undefined;\n    lastInvokeTime = time;\n    result = func.apply(thisArg, args);\n    return result;\n  }\n\n  function leadingEdge(time) {\n    // Reset any `maxWait` timer.\n    lastInvokeTime = time;\n    // Start the timer for the trailing edge.\n    timerId = setTimeout(timerExpired, wait);\n    // Invoke the leading edge.\n    return leading ? invokeFunc(time) : result;\n  }\n\n  function remainingWait(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime,\n        result = wait - timeSinceLastCall;\n\n    return maxing ? nativeMin(result, maxWait - timeSinceLastInvoke) : result;\n  }\n\n  function shouldInvoke(time) {\n    var timeSinceLastCall = time - lastCallTime,\n        timeSinceLastInvoke = time - lastInvokeTime;\n\n    // Either this is the first call, activity has stopped and we're at the\n    // trailing edge, the system time has gone backwards and we're treating\n    // it as the trailing edge, or we've hit the `maxWait` limit.\n    return (lastCallTime === undefined || (timeSinceLastCall >= wait) ||\n      (timeSinceLastCall < 0) || (maxing && timeSinceLastInvoke >= maxWait));\n  }\n\n  function timerExpired() {\n    var time = now();\n    if (shouldInvoke(time)) {\n      return trailingEdge(time);\n    }\n    // Restart the timer.\n    timerId = setTimeout(timerExpired, remainingWait(time));\n  }\n\n  function trailingEdge(time) {\n    timerId = undefined;\n\n    // Only invoke if we have `lastArgs` which means `func` has been\n    // debounced at least once.\n    if (trailing && lastArgs) {\n      return invokeFunc(time);\n    }\n    lastArgs = lastThis = undefined;\n    return result;\n  }\n\n  function cancel() {\n    if (timerId !== undefined) {\n      clearTimeout(timerId);\n    }\n    lastInvokeTime = 0;\n    lastArgs = lastCallTime = lastThis = timerId = undefined;\n  }\n\n  function flush() {\n    return timerId === undefined ? result : trailingEdge(now());\n  }\n\n  function debounced() {\n    var time = now(),\n        isInvoking = shouldInvoke(time);\n\n    lastArgs = arguments;\n    lastThis = this;\n    lastCallTime = time;\n\n    if (isInvoking) {\n      if (timerId === undefined) {\n        return leadingEdge(lastCallTime);\n      }\n      if (maxing) {\n        // Handle invocations in a tight loop.\n        timerId = setTimeout(timerExpired, wait);\n        return invokeFunc(lastCallTime);\n      }\n    }\n    if (timerId === undefined) {\n      timerId = setTimeout(timerExpired, wait);\n    }\n    return result;\n  }\n  debounced.cancel = cancel;\n  debounced.flush = flush;\n  return debounced;\n}\n\n/**\n * Creates a throttled function that only invokes `func` at most once per\n * every `wait` milliseconds. The throttled function comes with a `cancel`\n * method to cancel delayed `func` invocations and a `flush` method to\n * immediately invoke them. Provide `options` to indicate whether `func`\n * should be invoked on the leading and/or trailing edge of the `wait`\n * timeout. The `func` is invoked with the last arguments provided to the\n * throttled function. Subsequent calls to the throttled function return the\n * result of the last `func` invocation.\n *\n * **Note:** If `leading` and `trailing` options are `true`, `func` is\n * invoked on the trailing edge of the timeout only if the throttled function\n * is invoked more than once during the `wait` timeout.\n *\n * If `wait` is `0` and `leading` is `false`, `func` invocation is deferred\n * until to the next tick, similar to `setTimeout` with a timeout of `0`.\n *\n * See [David Corbacho's article](https://css-tricks.com/debouncing-throttling-explained-examples/)\n * for details over the differences between `_.throttle` and `_.debounce`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to throttle.\n * @param {number} [wait=0] The number of milliseconds to throttle invocations to.\n * @param {Object} [options={}] The options object.\n * @param {boolean} [options.leading=true]\n *  Specify invoking on the leading edge of the timeout.\n * @param {boolean} [options.trailing=true]\n *  Specify invoking on the trailing edge of the timeout.\n * @returns {Function} Returns the new throttled function.\n * @example\n *\n * // Avoid excessively updating the position while scrolling.\n * jQuery(window).on('scroll', _.throttle(updatePosition, 100));\n *\n * // Invoke `renewToken` when the click event is fired, but not more than once every 5 minutes.\n * var throttled = _.throttle(renewToken, 300000, { 'trailing': false });\n * jQuery(element).on('click', throttled);\n *\n * // Cancel the trailing throttled invocation.\n * jQuery(window).on('popstate', throttled.cancel);\n */\nfunction throttle(func, wait, options) {\n  var leading = true,\n      trailing = true;\n\n  if (typeof func != 'function') {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  if (isObject(options)) {\n    leading = 'leading' in options ? !!options.leading : leading;\n    trailing = 'trailing' in options ? !!options.trailing : trailing;\n  }\n  return debounce(func, wait, {\n    'leading': leading,\n    'maxWait': wait,\n    'trailing': trailing\n  });\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && objectToString.call(value) == symbolTag);\n}\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = throttle;\n","function E () {\n  // Keep this empty so it's easier to inherit from\n  // (via https://github.com/lipsmack from https://github.com/scottcorgan/tiny-emitter/issues/3)\n}\n\nE.prototype = {\n  on: function (name, callback, ctx) {\n    var e = this.e || (this.e = {});\n\n    (e[name] || (e[name] = [])).push({\n      fn: callback,\n      ctx: ctx\n    });\n\n    return this;\n  },\n\n  once: function (name, callback, ctx) {\n    var self = this;\n    function listener () {\n      self.off(name, listener);\n      callback.apply(ctx, arguments);\n    };\n\n    listener._ = callback\n    return this.on(name, listener, ctx);\n  },\n\n  emit: function (name) {\n    var data = [].slice.call(arguments, 1);\n    var evtArr = ((this.e || (this.e = {}))[name] || []).slice();\n    var i = 0;\n    var len = evtArr.length;\n\n    for (i; i < len; i++) {\n      evtArr[i].fn.apply(evtArr[i].ctx, data);\n    }\n\n    return this;\n  },\n\n  off: function (name, callback) {\n    var e = this.e || (this.e = {});\n    var evts = e[name];\n    var liveEvents = [];\n\n    if (evts && callback) {\n      for (var i = 0, len = evts.length; i < len; i++) {\n        if (evts[i].fn !== callback && evts[i].fn._ !== callback)\n          liveEvents.push(evts[i]);\n      }\n    }\n\n    // Remove event from queue to prevent memory leak\n    // Suggested by https://github.com/lazd\n    // Ref: https://github.com/scottcorgan/tiny-emitter/commit/c6ebfaa9bc973b33d110a84a307742b7cf94c953#commitcomment-5024910\n\n    (liveEvents.length)\n      ? e[name] = liveEvents\n      : delete e[name];\n\n    return this;\n  }\n};\n\nmodule.exports = E;\nmodule.exports.TinyEmitter = E;\n","/**\n * Infinite Ajax Scroll v3.1.0\n * Turn your existing pagination into infinite scrolling pages with ease\n *\n * Commercial use requires one-time purchase of a commercial license\n * https://infiniteajaxscroll.com/docs/license.html\n *\n * Copyright 2014-2023 Webcreate (Jeroen Fiege)\n * https://infiniteajaxscroll.com\n */\nimport $ from 'tealight';\nimport extend from 'extend';\nimport throttle from 'lodash.throttle';\nimport Emitter from 'tiny-emitter';\n\nvar defaults$3 = {\n  item: undefined,\n  next: undefined,\n  prev: undefined,\n  pagination: undefined,\n  responseType: 'document',\n  bind: true,\n  scrollContainer: window,\n  spinner: false,\n  logger: true,\n  loadOnScroll: true,\n  negativeMargin: 0,\n  trigger: false,\n  prefill: true,\n};\n\n/* eslint no-console: \"off\" */\n\nvar Assert = {\n  singleElement: function singleElement(elementOrSelector, property) {\n    var $element = $(elementOrSelector);\n\n    if ($element.length > 1) {\n      throw new Error((\"Expected single element for \\\"\" + property + \"\\\"\"));\n    }\n\n    if ($element.length === 0) {\n      throw new Error((\"Element \\\"\" + elementOrSelector + \"\\\" not found for \\\"\" + property + \"\\\"\"));\n    }\n  },\n  anyElement: function anyElement(elementOrSelector, property) {\n    var $element = $(elementOrSelector);\n\n    if ($element.length === 0) {\n      throw new Error((\"Element \\\"\" + elementOrSelector + \"\\\" not found for \\\"\" + property + \"\\\"\"));\n    }\n  },\n  warn: function warn(fn) {\n    var args = [], len = arguments.length - 1;\n    while ( len-- > 0 ) args[ len ] = arguments[ len + 1 ];\n\n    try {\n      fn.apply(void 0, args);\n    } catch (e) {\n      if (console && console.warn) {\n        console.warn(e.message);\n      }\n    }\n  }\n};\n\nfunction getScrollPosition(el) {\n  if (el !== window) {\n    return {\n      x: el.scrollLeft,\n      y: el.scrollTop,\n    };\n  }\n\n  var supportPageOffset = window.pageXOffset !== undefined;\n  var isCSS1Compat = ((document.compatMode || \"\") === \"CSS1Compat\");\n\n  return {\n    x: supportPageOffset ? window.pageXOffset : isCSS1Compat ? document.documentElement.scrollLeft : document.body.scrollLeft,\n    y: supportPageOffset ? window.pageYOffset : isCSS1Compat ? document.documentElement.scrollTop : document.body.scrollTop\n  };\n}\n\nfunction getRootRect(el) {\n  var rootRect;\n\n  if (el !== window) {\n    rootRect = el.getBoundingClientRect();\n  } else {\n    // Use <html>/<body> instead of window since scroll bars affect size.\n    var html = document.documentElement;\n    var body = document.body;\n\n    rootRect = {\n      top: 0,\n      left: 0,\n      right: html.clientWidth || body.clientWidth,\n      width: html.clientWidth || body.clientWidth,\n      bottom: html.clientHeight || body.clientHeight,\n      height: html.clientHeight || body.clientHeight\n    };\n  }\n\n  return rootRect;\n}\n\nfunction getDistanceToFold(sentinel, scrollContainerScrollPosition, scrollContainerRootRect) {\n  var rootRect = scrollContainerRootRect;\n\n  // this means the container the doesn't have any items yet - it's empty\n  if (!sentinel) {\n    return rootRect.height * -1;\n  }\n\n  var scrollYTop = scrollContainerScrollPosition.y;\n  var boundingRect = sentinel.getBoundingClientRect();\n\n  var scrollYBottom = scrollYTop + rootRect.height;\n  var bottom = scrollYTop + boundingRect.bottom - rootRect.top;\n\n  return Math.trunc(bottom - scrollYBottom);\n}\n\nvar APPEND = 'append';\nvar APPENDED = 'appended';\nvar PREPEND = 'prepend';\nvar PREPENDED = 'prepended';\nvar BINDED = 'binded';\nvar UNBINDED = 'unbinded';\nvar HIT = 'hit';\nvar TOP = 'top';\nvar LOAD = 'load';\nvar LOADED = 'loaded';\nvar ERROR = 'error';\nvar FIRST = 'first';\nvar LAST = 'last';\nvar NEXT = 'next';\nvar NEXTED = 'nexted';\nvar PREV = 'prev';\nvar PREVED = 'preved';\nvar READY = 'ready';\nvar SCROLLED = 'scrolled';\nvar RESIZED = 'resized';\nvar PAGE = 'page';\nvar PREFILL = 'prefill';\nvar PREFILLED = 'prefilled';\n\nvar events = {\n  APPEND: APPEND,\n  APPENDED: APPENDED,\n  PREPEND: PREPEND,\n  PREPENDED: PREPENDED,\n  BINDED: BINDED,\n  UNBINDED: UNBINDED,\n  HIT: HIT,\n  TOP: TOP,\n  LOAD: LOAD,\n  LOADED: LOADED,\n  ERROR: ERROR,\n  FIRST: FIRST,\n  LAST: LAST,\n  NEXT: NEXT,\n  NEXTED: NEXTED,\n  PREV: PREV,\n  PREVED: PREVED,\n  READY: READY,\n  SCROLLED: SCROLLED,\n  RESIZED: RESIZED,\n  PAGE: PAGE,\n  PREFILL: PREFILL,\n  PREFILLED: PREFILLED,\n};\n\nvar defaultLastScroll = {\n  y: 0,\n  x: 0,\n  deltaY: 0,\n  deltaX: 0\n};\n\nfunction calculateScroll(scrollContainer, lastScroll) {\n  var scroll = getScrollPosition(scrollContainer);\n\n  scroll.deltaY = scroll.y - (lastScroll ? lastScroll.y : scroll.y);\n  scroll.deltaX = scroll.x - (lastScroll ? lastScroll.x : scroll.x);\n\n  return scroll;\n}\n\nfunction scrollHandler() {\n  var ias = this;\n  var lastScroll = ias._lastScroll || defaultLastScroll;\n\n  var scroll = ias._lastScroll = calculateScroll(ias.scrollContainer, lastScroll);\n\n  this.emitter.emit(SCROLLED, {scroll: scroll});\n}\n\nfunction resizeHandler() {\n  var ias = this;\n  var lastScroll = ias._lastScroll || defaultLastScroll;\n\n  var scroll = ias._lastScroll = calculateScroll(ias.scrollContainer, lastScroll);\n\n  this.emitter.emit(RESIZED, {scroll: scroll});\n}\n\nfunction nextHandler(pageIndex) {\n  var ias = this;\n  var lastResponse = ias._lastResponse || document.body;\n\n  var nextEl = $(ias.options.next, lastResponse)[0];\n\n  if (!nextEl) {\n    Assert.warn(Assert.singleElement, ias.options.next, 'options.next');\n\n    return;\n  }\n\n  var nextUrl = nextEl.href;\n\n  return ias.load(nextUrl)\n    .then(function (data) {\n      lastResponse = ias._lastResponse = data.xhr.response;\n\n      var nextEl = $(ias.options.next, lastResponse)[0];\n\n      return ias.append(data.items)\n        .then(function () {\n          return !!nextEl;\n        })\n        .then(function (hasNextEl) {\n          // only warn for first page, because at some point it's expected that there is no next element\n          if (!hasNextEl && pageIndex <= 1 && console && console.warn) {\n            console.warn((\"Element \\\"\" + (ias.options.next) + \"\\\" not found for \\\"options.next\\\" on \\\"\" + (data.url) + \"\\\"\"));\n          }\n\n          return hasNextEl;\n        });\n    });\n}\n\nfunction prevHandler(pageIndex) {\n  var ias = this;\n  var prevEl = ias._prevEl || $(ias.options.prev, document.body)[0];\n\n  if (ias.options.prev === undefined) {\n    return;\n  }\n\n  if (!prevEl) {\n    Assert.warn(Assert.singleElement, ias.options.prev, 'options.prev');\n\n    return;\n  }\n\n  var prevUrl = prevEl.href;\n\n  return ias.load(prevUrl)\n    .then(function (data) {\n      var prevEl = ias._prevEl = $(ias.options.prev, data.xhr.response)[0];\n\n      return ias.prepend(data.items)\n        .then(function () { return !!prevEl; }) // TODO: evaluate if this makes sense\n    });\n}\n\nvar defaults$2 = {\n  element: undefined,\n  hide: false\n};\n\nfunction expand$3(options) {\n  if (typeof options === 'string' || (typeof options === 'object' && options.nodeType === Node.ELEMENT_NODE)) {\n    options = {\n      element: options,\n      hide: true,\n    };\n  } else if (typeof options === 'boolean') {\n    options = {\n      element: undefined,\n      hide: options,\n    };\n  }\n\n  return options;\n}\n\nvar Pagination = function Pagination(ias, options) {\n  this.options = extend({}, defaults$2, expand$3(options));\n  this.originalDisplayStyles = new WeakMap();\n\n  if (!this.options.hide) {\n    return;\n  }\n\n  Assert.warn(Assert.anyElement, this.options.element, 'pagination.element');\n\n  ias.on(BINDED, this.hide.bind(this));\n  ias.on(UNBINDED, this.restore.bind(this));\n};\n\nPagination.prototype.hide = function hide () {\n    var this$1$1 = this;\n\n  var els = $(this.options.element);\n\n  els.forEach(function (el) {\n    this$1$1.originalDisplayStyles.set(el, window.getComputedStyle(el).display);\n\n    el.style.display = 'none';\n  });\n};\n\nPagination.prototype.restore = function restore () {\n    var this$1$1 = this;\n\n  var els = $(this.options.element);\n\n  els.forEach(function (el) {\n    el.style.display = this$1$1.originalDisplayStyles.get(el) || 'block';\n  });\n};\n\nvar defaults$1 = {\n  element: undefined,\n  delay: 600,\n  show: function (element) {\n    element.style.opacity = '1';\n  },\n  hide: function (element) {\n    element.style.opacity = '0';\n  }\n};\n\nfunction expand$2(options) {\n  if (typeof options === 'string' || (typeof options === 'object' && options.nodeType === Node.ELEMENT_NODE)) {\n    options = {\n      element: options,\n    };\n  }\n\n  return options;\n}\n\nvar Spinner = function Spinner(ias, options) {\n  // no spinner wanted\n  if (options === false) {\n    return;\n  }\n\n  this.ias = ias;\n  this.options = extend({}, defaults$1, expand$2(options));\n\n  if (this.options.element !== undefined) {\n    Assert.singleElement(this.options.element, 'spinner.element');\n  }\n\n  this.element = $(this.options.element)[0]; // @todo should we really cache this?\n  this.hideFn = this.options.hide;\n  this.showFn = this.options.show;\n\n  ias.on(BINDED, this.bind.bind(this));\n  ias.on(BINDED, this.hide.bind(this));\n};\n\nSpinner.prototype.bind = function bind () {\n  var startTime, endTime, diff, delay, self = this, ias = this.ias;\n\n  ias.on(NEXT, function () {\n    startTime = +new Date();\n\n    self.show();\n  });\n\n  ias.on(LAST, function () {\n    self.hide();\n  });\n\n  // setup delay\n  ias.on(APPEND, function (event) {\n    endTime = +new Date();\n    diff = endTime - startTime;\n\n    delay = Math.max(0, self.options.delay - diff);\n\n    var _appendFn = event.appendFn.bind({});\n\n    event.appendFn = function(items, parent, last) {\n      return new Promise(function (resolve) {\n        setTimeout(function() {\n          self.hide().then(function() {\n            _appendFn(items, parent, last);\n            resolve();\n          });\n        }, delay);\n      });\n    };\n  });\n};\n\nSpinner.prototype.show = function show () {\n  return Promise.resolve(this.showFn(this.element));\n};\n\nSpinner.prototype.hide = function hide () {\n  return Promise.resolve(this.hideFn(this.element));\n};\n\n/* eslint no-console: \"off\" */\n\nvar defaultLogger = {\n  hit: function () {\n    console.log(\"Hit scroll threshold\");\n  },\n  top: function () {\n    console.log(\"Hit top scroll threshold\");\n  },\n  binded: function () {\n    console.log(\"Binded event handlers\");\n  },\n  unbinded: function () {\n    console.log(\"Unbinded event handlers\");\n  },\n  // scrolled: (event) => {\n  //   console.log('Scrolled');\n  // },\n  // resized: (event) => {\n  //   console.log('Resized');\n  // },\n  next: function (event) {\n    console.log((\"Next page triggered [pageIndex=\" + (event.pageIndex) + \"]\"));\n  },\n  nexted: function (event) {\n    console.log((\"Next page completed [pageIndex=\" + (event.pageIndex) + \"]\"));\n  },\n  prev: function (event) {\n    console.log((\"Previous page triggered [pageIndex=\" + (event.pageIndex) + \"]\"));\n  },\n  preved: function (event) {\n    console.log((\"Previous page completed [pageIndex=\" + (event.pageIndex) + \"]\"));\n  },\n  load: function (event) {\n    console.log((\"Start loading \" + (event.url)));\n  },\n  loaded: function () {\n    console.log(\"Finished loading\");\n  },\n  append: function () {\n    console.log(\"Start appending items\");\n  },\n  appended: function (event) {\n    console.log((\"Finished appending \" + (event.items.length) + \" item(s)\"));\n  },\n  prepend: function () {\n    console.log(\"Start prepending items\");\n  },\n  prepended: function (event) {\n    console.log((\"Finished prepending \" + (event.items.length) + \" item(s)\"));\n  },\n  last: function () {\n    console.log(\"No more pages left to load\");\n  },\n  first: function () {\n    console.log(\"Reached first page\");\n  },\n  page: function (event) {\n    console.log((\"Page changed [pageIndex=\" + (event.pageIndex) + \"]\"));\n  },\n  prefill: function (event) {\n    console.log(\"Start prefilling\");\n  },\n  prefilled: function (event) {\n    console.log(\"Finished prefilling\");\n  },\n};\n\nfunction expand$1(options) {\n  if (options === true) {\n    options = defaultLogger;\n  }\n\n  return options;\n}\n\nvar Logger = function Logger(ias, options) {\n  // no logger wanted\n  if (options === false) {\n    return;\n  }\n\n  var logger = expand$1(options);\n\n  Object.keys(logger).forEach(function (key) {\n    ias.on(key, logger[key]);\n  });\n};\n\nfunction getPageBreak(pageBreaks, scrollTop, scrollContainer) {\n  var rootRect = getRootRect(scrollContainer);\n  var scrollBottom = scrollTop + rootRect.height;\n\n  for (var b = pageBreaks.length - 1; b >= 0; b--) {\n    var bottom = pageBreaks[b].sentinel.getBoundingClientRect().bottom + scrollTop;\n\n    if (scrollBottom > bottom) {\n      var x = Math.min(b + 1, pageBreaks.length - 1);\n\n      return pageBreaks[x];\n    }\n  }\n\n  return pageBreaks[0];\n}\n\nvar Paging = function Paging(ias) {\n  this.ias = ias;\n  this.pageBreaks = [];\n  this.currentPageIndex = ias.pageIndex;\n  this.currentScrollTop = 0;\n\n  ias.on(BINDED, this.binded.bind(this));\n  ias.on(NEXT, this.next.bind(this));\n  ias.on(PREV, this.prev.bind(this));\n  ias.on(SCROLLED, this.scrolled.bind(this));\n  ias.on(RESIZED, this.scrolled.bind(this));\n};\n\nPaging.prototype.binded = function binded () {\n  var sentinel = this.ias.sentinel();\n  if (!sentinel) {\n    return;\n  }\n\n  this.pageBreaks.push({\n    pageIndex: this.currentPageIndex,\n    url: document.location.toString(),\n    title: document.title,\n    sentinel: this.ias.sentinel()\n  });\n};\n\nPaging.prototype.next = function next () {\n    var this$1$1 = this;\n\n  var url = document.location.toString();\n  var title = document.title;\n\n  var loaded = function (event) {\n    url = event.url;\n\n    if (event.xhr.response) {\n      title = event.xhr.response.title;\n    }\n  };\n\n  this.ias.once(LOADED, loaded);\n\n  this.ias.once(NEXTED, function (event) {\n    this$1$1.pageBreaks.push({\n      pageIndex: event.pageIndex,\n      url: url,\n      title: title,\n      sentinel: this$1$1.ias.sentinel()\n    });\n\n    this$1$1.update();\n\n    this$1$1.ias.off(LOADED, loaded);\n  });\n};\n\nPaging.prototype.prev = function prev () {\n    var this$1$1 = this;\n\n  var url = document.location.toString();\n  var title = document.title;\n\n  var loaded = function (event) {\n    url = event.url;\n\n    if (event.xhr.response) {\n      title = event.xhr.response.title;\n    }\n  };\n\n  this.ias.once(LOADED, loaded);\n\n  this.ias.once(PREVED, function (event) {\n    this$1$1.pageBreaks.unshift({\n      pageIndex: event.pageIndex,\n      url: url,\n      title: title,\n      sentinel: this$1$1.ias.first()\n    });\n\n    this$1$1.update();\n\n    this$1$1.ias.off(LOADED, loaded);\n  });\n};\n\nPaging.prototype.scrolled = function scrolled (event) {\n  this.update(event.scroll.y);\n};\n\nPaging.prototype.update = function update (scrollTop) {\n  this.currentScrollTop = scrollTop || this.currentScrollTop;\n\n  var pageBreak = getPageBreak(this.pageBreaks, this.currentScrollTop, this.ias.scrollContainer);\n\n  if (pageBreak && pageBreak.pageIndex !== this.currentPageIndex) {\n    this.ias.emitter.emit(PAGE, pageBreak);\n\n    this.currentPageIndex = pageBreak.pageIndex;\n  }\n};\n\nvar defaults = {\n  element: undefined,\n  when: function (pageIndex) { return true; },\n  show: function (element) {\n    element.style.opacity = '1';\n  },\n  hide: function (element) {\n    element.style.opacity = '0';\n  }\n};\n\nfunction expand(options) {\n  if (typeof options === 'string' || typeof options === 'function' || (typeof options === 'object' && options.nodeType === Node.ELEMENT_NODE)) {\n    options = {\n      element: options,\n    };\n  }\n\n  if (typeof options.element === 'function') {\n    options.element = options.element();\n  }\n\n  // expand array to a function, e.g.:\n  // [0, 1, 2] -> function(pageIndex) { /* return true when pageIndex in [0, 1, 2] */ }\n  if (options.when && Array.isArray(options.when)) {\n    var when = options.when;\n    options.when = function(pageIndex) {\n      return when.indexOf(pageIndex) !== -1;\n    };\n  }\n\n  return options;\n}\n\nvar Trigger = function Trigger(ias, options) {\n  var this$1$1 = this;\n\n  // no trigger wanted\n  if (options === false) {\n    return;\n  }\n\n  this.ias = ias;\n  this.options = extend({}, defaults, expand(options));\n\n  if (this.options.element !== undefined) {\n    Assert.singleElement(this.options.element, 'trigger.element');\n  }\n\n  this.element = $(this.options.element)[0]; // @todo should we really cache this?\n  this.hideFn = this.options.hide;\n  this.showFn = this.options.show;\n  this.voter = this.options.when;\n  this.showing = undefined;\n  this.enabled = undefined;\n\n  ias.on(BINDED, this.bind.bind(this));\n  ias.on(UNBINDED, this.unbind.bind(this));\n  ias.on(HIT, this.hit.bind(this));\n  ias.on(NEXT, function (e) { return this$1$1.ias.once(APPENDED, function () { return this$1$1.update(e.pageIndex); }); });\n};\n\nTrigger.prototype.bind = function bind () {\n  this.hide();\n  this.update(this.ias.pageIndex);\n\n  this.element.addEventListener('click', this.clickHandler.bind(this));\n};\n\nTrigger.prototype.unbind = function unbind () {\n  this.element.removeEventListener('click', this.clickHandler.bind(this));\n};\n\nTrigger.prototype.clickHandler = function clickHandler () {\n  this.hide().then(this.ias.next.bind(this.ias));\n};\n\nTrigger.prototype.update = function update (pageIndex) {\n  this.enabled = this.voter(pageIndex);\n\n  if (this.enabled) {\n    this.ias.disableLoadOnScroll();\n  } else {\n    this.ias.enableLoadOnScroll();\n  }\n};\n\nTrigger.prototype.hit = function hit () {\n  if (!this.enabled) {\n    return;\n  }\n\n  this.show();\n};\n\nTrigger.prototype.show = function show () {\n  if (this.showing) {\n    return;\n  }\n\n  this.showing = true;\n\n  return Promise.resolve(this.showFn(this.element));\n};\n\nTrigger.prototype.hide = function hide () {\n  if (!this.showing && this.showing !== undefined) {\n    return;\n  }\n\n  this.showing = false;\n\n  return Promise.resolve(this.hideFn(this.element));\n};\n\nfunction appendFn(items, parent, last) {\n  var sibling = last ? last.nextSibling : null;\n  var insert = document.createDocumentFragment();\n\n  items.forEach(function (item) {\n    insert.appendChild(item);\n  });\n\n  parent.insertBefore(insert, sibling);\n}\n\nfunction prependFn(items, parent, first) {\n  var insert = document.createDocumentFragment();\n\n  items.forEach(function (item) {\n    insert.appendChild(item);\n  });\n\n  parent.insertBefore(insert, first);\n}\n\n/* eslint no-console: \"off\" */\n\nvar NativeResizeObserver = window.ResizeObserver;\n\nvar EventListenerResizeObserver = function EventListenerResizeObserver(el, listener) {\n  this.el = el;\n  this.listener = listener;\n};\n\nEventListenerResizeObserver.prototype.observe = function observe () {\n  this.el.addEventListener('resize', this.listener);\n};\n\nEventListenerResizeObserver.prototype.unobserve = function unobserve () {\n  this.el.removeEventListener('resize', this.listener);\n};\n\nvar NativeWrapperResizeObserver = function NativeWrapperResizeObserver(el, listener) {\n  this.el = el;\n  this.listener = listener;\n  this.ro = new NativeResizeObserver(this.listener);\n};\n\nNativeWrapperResizeObserver.prototype.observe = function observe () {\n  this.ro.observe(this.el);\n};\n\nNativeWrapperResizeObserver.prototype.unobserve = function unobserve () {\n  this.ro.unobserve();\n};\n\nvar PollingResizeObserver = function PollingResizeObserver(el, listener) {\n  this.el = el;\n  this.listener = listener;\n  this.interval = null;\n  this.lastHeight = null;\n};\n\nPollingResizeObserver.prototype.pollHeight = function pollHeight () {\n  var height = Math.trunc(getRootRect(this.el).height);\n\n  if (this.lastHeight !== null && this.lastHeight !== height) {\n    this.listener();\n  }\n\n  this.lastHeight = height;\n};\n\nPollingResizeObserver.prototype.observe = function observe () {\n  this.interval = setInterval(this.pollHeight.bind(this), 200);\n};\n\nPollingResizeObserver.prototype.unobserve = function unobserve () {\n  clearInterval(this.interval);\n};\n\nfunction ResizeObserverFactory(ias, el) {\n  var listener = throttle(resizeHandler, 200).bind(ias);\n\n  if (el === window) {\n    return new EventListenerResizeObserver(el, listener);\n  }\n\n  if (NativeResizeObserver) {\n    return new NativeWrapperResizeObserver(el, listener);\n  }\n\n  if (console && console.warn) {\n    console.warn('ResizeObserver not supported. Falling back on polling.');\n  }\n\n  return new PollingResizeObserver(el, listener);\n}\n\nvar Prefill = function Prefill(ias, options) {\n  this.ias = ias;\n  this.enabled = options;\n};\n\nPrefill.prototype.prefill = function prefill () {\n    var this$1$1 = this;\n\n  if (!this.enabled) {\n    return;\n  }\n\n  this.ias.emitter.emit(events.PREFILL);\n\n  return Promise.all([this._prefillNext(), this._prefillPrev()]).then(function () {\n    this$1$1.ias.emitter.emit(events.PREFILLED);\n\n    // @todo reevaluate if we should actually call `measure` here.\n    this$1$1.ias.measure();\n  });\n};\n\nPrefill.prototype._prefillNext = function _prefillNext () {\n    var this$1$1 = this;\n\n  var distance = this.ias.distance();\n\n  if (distance > 0) {\n    return;\n  }\n\n  return this.ias.next()\n    .then(function (hasNextUrl) {\n      if (!hasNextUrl) {\n        return;\n      }\n\n      var distance = this$1$1.ias.distance();\n\n      if (distance < 0) {\n        return this$1$1._prefillNext();\n      }\n    })\n  ;\n};\n\nPrefill.prototype._prefillPrev = function _prefillPrev () {\n  if (!this.ias.options.prev) {\n    return;\n  }\n\n  return this.ias.prev();\n};\n\nvar InfiniteAjaxScroll = function InfiniteAjaxScroll(container, options) {\n  var this$1$1 = this;\n  if ( options === void 0 ) options = {};\n\n  Assert.singleElement(container, 'container');\n\n  this.container = $(container)[0];\n  this.options = extend({}, defaults$3, options);\n  this.emitter = new Emitter();\n\n  this.options.loadOnScroll ? this.enableLoadOnScroll() : this.disableLoadOnScroll();\n  this.negativeMargin = Math.abs(this.options.negativeMargin);\n\n  this.scrollContainer = this.options.scrollContainer;\n  if (this.options.scrollContainer !== window) {\n    Assert.singleElement(this.options.scrollContainer, 'options.scrollContainer');\n\n    this.scrollContainer = $(this.options.scrollContainer)[0];\n  }\n\n  this.nextHandler = nextHandler;\n  this.prevHandler = prevHandler;\n\n  if (this.options.next === false) {\n    this.nextHandler = function() {};\n  } else if (typeof this.options.next === 'function') {\n    this.nextHandler = this.options.next;\n  }\n\n  if (this.options.prev === false) {\n    this.prevHandler = function() {};\n  } else if (typeof this.options.prev === 'function') {\n    this.prevHandler = this.options.prev;\n  }\n\n  this.resizeObserver = ResizeObserverFactory(this, this.scrollContainer);\n  this._scrollListener = throttle(scrollHandler, 200).bind(this);\n\n  this.ready = false;\n  this.bindOnReady = true;\n  this.binded = false;\n  this.paused = false;\n  this.pageIndexPrev = 0;\n  this.pageIndex = this.pageIndexNext = this.sentinel() ? 0 : -1;\n\n  this.on(HIT, function () {\n    if (!this$1$1.loadOnScroll) {\n      return;\n    }\n\n    this$1$1.next();\n  });\n\n  this.on(TOP, function () {\n    if (!this$1$1.loadOnScroll) {\n      return;\n    }\n\n    this$1$1.prev();\n  });\n\n  this.on(SCROLLED, this.measure);\n  this.on(RESIZED, this.measure);\n\n  // initialize extensions\n  this.pagination = new Pagination(this, this.options.pagination);\n  this.spinner = new Spinner(this, this.options.spinner);\n  this.logger = new Logger(this, this.options.logger);\n  this.paging = new Paging(this);\n  this.trigger = new Trigger(this, this.options.trigger);\n  this.prefill = new Prefill(this, this.options.prefill);\n\n  // prefill/measure after all plugins are done binding\n  this.on(BINDED, this.prefill.prefill.bind(this.prefill));\n\n  this.hitFirst = this.hitLast = false;\n\n  this.on(LAST, function () { return this$1$1.hitLast = true; });\n  this.on(FIRST, function () { return this$1$1.hitFirst = true; });\n\n  var ready = function () {\n    if (this$1$1.ready) {\n      return;\n    }\n\n    this$1$1.ready = true;\n\n    this$1$1.emitter.emit(READY);\n\n    if (this$1$1.bindOnReady && this$1$1.options.bind) {\n      this$1$1.bind();\n    }\n  };\n\n  if (document.readyState === \"complete\" || document.readyState === \"interactive\") {\n    setTimeout(ready, 1);\n  } else {\n    window.addEventListener('DOMContentLoaded', ready);\n  }\n};\n\nInfiniteAjaxScroll.prototype.bind = function bind () {\n  if (this.binded) {\n    return;\n  }\n\n  // If we manually call bind before the dom is ready, we assume that we want\n  // to take control over the bind flow.\n  if (!this.ready) {\n    this.bindOnReady = false;\n  }\n\n  this.scrollContainer.addEventListener('scroll', this._scrollListener);\n  this.resizeObserver.observe();\n\n  this.binded = true;\n\n  this.emitter.emit(BINDED);\n};\n\nInfiniteAjaxScroll.prototype.unbind = function unbind () {\n  if (!this.binded) {\n    if (!this.ready) {\n      this.once(BINDED, this.unbind);\n    }\n\n    return;\n  }\n\n  this.resizeObserver.unobserve();\n  this.scrollContainer.removeEventListener('scroll', this._scrollListener);\n\n  this.binded = false;\n\n  this.emitter.emit(UNBINDED);\n};\n\nInfiniteAjaxScroll.prototype.next = function next () {\n    var this$1$1 = this;\n\n  if (this.hitLast) {\n    return;\n  }\n\n  if (!this.binded) {\n    if (!this.ready) {\n      return this.once(BINDED, this.next);\n    }\n\n    return;\n  }\n\n  this.pause();\n\n  var pageIndex = this.pageIndexNext + 1;\n\n  this.emitter.emit(NEXT, {pageIndex: this.pageIndexNext + 1});\n\n  return Promise.resolve(this.nextHandler(pageIndex))\n    .then(function (hasNextUrl) {\n      this$1$1.pageIndexNext = pageIndex;\n\n      if (!hasNextUrl) {\n        this$1$1.emitter.emit(LAST);\n      }\n\n      this$1$1.resume();\n\n      return hasNextUrl;\n    }).then(function (hasNextUrl) {\n      this$1$1.emitter.emit(NEXTED, {pageIndex: this$1$1.pageIndexNext});\n\n      return hasNextUrl;\n    });\n};\n\nInfiniteAjaxScroll.prototype.prev = function prev () {\n    var this$1$1 = this;\n\n  if (!this.binded || this.hitFirst) {\n    return;\n  }\n\n  this.pause();\n\n  var pageIndex = this.pageIndexPrev - 1;\n\n  this.emitter.emit(PREV, {pageIndex: this.pageIndexPrev - 1});\n\n  return Promise.resolve(this.prevHandler(pageIndex))\n    .then(function (hasPrevUrl) {\n      this$1$1.pageIndexPrev = pageIndex;\n\n      this$1$1.resume();\n\n      if (!hasPrevUrl) {\n        this$1$1.emitter.emit(FIRST);\n      }\n\n      return hasPrevUrl;\n    }).then(function (hasPrevUrl) {\n      this$1$1.emitter.emit(PREVED, {pageIndex: this$1$1.pageIndexPrev});\n\n      return hasPrevUrl;\n    });\n};\n\n/**\n * @param {string} url\n * @returns {Promise} returns LOADED event on success\n */\nInfiniteAjaxScroll.prototype.load = function load (url) {\n  var ias = this;\n\n  return new Promise(function (resolve, reject) {\n    var xhr = new XMLHttpRequest();\n\n    var loadEvent = {\n      url: url,\n      xhr: xhr,\n      method: 'GET',\n      body: null,\n      nocache: false,\n      responseType: ias.options.responseType,\n      headers: {\n        'X-Requested-With': 'XMLHttpRequest',\n      },\n    };\n\n    // event properties are mutable\n    ias.emitter.emit(LOAD, loadEvent);\n\n    var finalUrl = loadEvent.url;\n    var method = loadEvent.method;\n    var responseType = loadEvent.responseType;\n    var headers = loadEvent.headers;\n    var body = loadEvent.body;\n\n    if (!loadEvent.nocache) {\n      // @see https://developer.mozilla.org/nl/docs/Web/API/XMLHttpRequest/Using_XMLHttpRequest#Bypassing_the_cache\n      finalUrl = finalUrl + ((/\\?/).test(finalUrl) ? \"&\" : \"?\") + (new Date()).getTime();\n    }\n\n    xhr.onreadystatechange = function() {\n      if (xhr.readyState !== XMLHttpRequest.DONE) {\n        return;\n      }\n\n      if (xhr.status === 0) ;\n      else if (xhr.status === 200) {\n        var items = xhr.response;\n\n        if (responseType === 'document') {\n          items = $(ias.options.item, xhr.response);\n          // @todo assert there actually are items in the response\n        }\n\n        // we don't use a shared loadedEvent variable here, because these values should be immutable\n\n        ias.emitter.emit(LOADED, {items: items, url: finalUrl, xhr: xhr});\n\n        resolve({items: items, url: finalUrl, xhr: xhr});\n      } else {\n        ias.emitter.emit(ERROR, {url: finalUrl, method: method, xhr: xhr});\n\n        reject(xhr);\n      }\n    };\n\n    xhr.onerror = function() {\n      ias.emitter.emit(ERROR, {url: finalUrl, method: method, xhr: xhr});\n\n      reject(xhr);\n    };\n\n    xhr.open(method, finalUrl, true);\n    xhr.responseType = responseType;\n\n    for (var header in headers) {\n      xhr.setRequestHeader(header, headers[header]);\n    }\n\n    xhr.send(body);\n  });\n};\n\n/**\n * @param {array<Element>} items\n * @param {Element|null} parent\n */\nInfiniteAjaxScroll.prototype.append = function append (items, parent) {\n  var ias = this;\n  parent = parent || ias.container;\n\n  var event = {\n    items: items,\n    parent: parent,\n    appendFn: appendFn\n  };\n\n  ias.emitter.emit(APPEND, event);\n\n  var executor = function (resolve) {\n    window.requestAnimationFrame(function () {\n      Promise.resolve(event.appendFn(event.items, event.parent, ias.sentinel())).then(function () {\n        resolve({items: items, parent: parent});\n      });\n    });\n  };\n\n  return (new Promise(executor)).then(function (event) {\n    ias.emitter.emit(APPENDED, event);\n  });\n};\n\n/**\n * @param {array<Element>} items\n * @param {Element|null} parent\n */\nInfiniteAjaxScroll.prototype.prepend = function prepend (items, parent) {\n    var this$1$1 = this;\n\n  var ias = this;\n  parent = parent || ias.container;\n\n  var event = {\n    items: items,\n    parent: parent,\n    prependFn: prependFn\n  };\n\n  ias.emitter.emit(PREPEND, event);\n\n  var executor = function (resolve) {\n    window.requestAnimationFrame(function () {\n      var first = ias.first();\n      var scrollPositionStart = getScrollPosition(this$1$1.scrollContainer);\n      var topStart = first.getBoundingClientRect().top + scrollPositionStart.y;\n\n      Promise.resolve(event.prependFn(event.items, event.parent, ias.first()))\n        .then(function () {\n          var scrollPositionEnd = getScrollPosition(this$1$1.scrollContainer);\n          var topEnd = first.getBoundingClientRect().top + scrollPositionEnd.y;\n\n          var deltaY = topEnd - topStart;\n\n          this$1$1.scrollContainer.scrollTo(scrollPositionEnd.x, deltaY);\n        })\n        .then(function () {\n          resolve({items: items, parent: parent});\n        });\n      });\n  };\n\n  return (new Promise(executor)).then(function (event) {\n    ias.emitter.emit(PREPENDED, event);\n  });\n};\n\nInfiniteAjaxScroll.prototype.sentinel = function sentinel () {\n  var items = $(this.options.item, this.container);\n\n  if (!items.length) {\n    return null;\n  }\n\n  return items[items.length-1];\n};\n\nInfiniteAjaxScroll.prototype.first = function first () {\n  var items = $(this.options.item, this.container);\n\n  if (!items.length) {\n    return null;\n  }\n\n  return items[0];\n};\n\nInfiniteAjaxScroll.prototype.pause = function pause () {\n  this.paused = true;\n};\n\nInfiniteAjaxScroll.prototype.resume = function resume () {\n  this.paused = false;\n};\n\nInfiniteAjaxScroll.prototype.enableLoadOnScroll = function enableLoadOnScroll () {\n  this.loadOnScroll = true;\n};\n\nInfiniteAjaxScroll.prototype.disableLoadOnScroll = function disableLoadOnScroll () {\n  this.loadOnScroll = false;\n};\n\n/**\n * @deprecated replaced by distanceBottom\n */\nInfiniteAjaxScroll.prototype.distance = function distance (rootRect, sentinel) {\n  return this.distanceBottom(rootRect, sentinel);\n};\n\nInfiniteAjaxScroll.prototype.distanceBottom = function distanceBottom (rootRect, sentinel) {\n  var _rootRect = rootRect || getRootRect(this.scrollContainer);\n  var _sentinel = sentinel || this.sentinel();\n\n  var scrollPosition = getScrollPosition(this.scrollContainer);\n\n  var distance = getDistanceToFold(_sentinel, scrollPosition, _rootRect);\n\n  // apply negative margin\n  distance -= this.negativeMargin;\n\n  return distance;\n};\n\nInfiniteAjaxScroll.prototype.distanceTop = function distanceTop () {\n  var scrollPosition = getScrollPosition(this.scrollContainer);\n\n  return scrollPosition.y - this.negativeMargin;\n};\n\nInfiniteAjaxScroll.prototype.measure = function measure () {\n  if (this.paused || (this.hitFirst && this.hitLast)) {\n    return;\n  }\n\n  var rootRect = getRootRect(this.scrollContainer);\n\n  // When the scroll container has no height, this could indicate that\n  // the element is not visible (display = none). Without a height\n  // we cannot calculate the distance to fold. On the other hand we don't\n  // have to, because it's not visible anyway. Our resize observer will\n  // monitor the height, once it's greater than 0 everything will resume as normal.\n  if (rootRect.height === 0) {\n    // @todo DX: show warning in console that this is happening\n    return;\n  }\n\n  if (!this.hitFirst) {\n    var distanceTop = this.distanceTop();\n\n    if (distanceTop <= 0) {\n      this.emitter.emit(TOP, {distance: distanceTop});\n    }\n  }\n\n  if (!this.hitLast) {\n    var distanceBottom = this.distanceBottom(rootRect, this.sentinel());\n\n    if (distanceBottom <= 0) {\n      this.emitter.emit(HIT, {distance: distanceBottom});\n    }\n  }\n};\n\nInfiniteAjaxScroll.prototype.on = function on (event, callback) {\n  this.emitter.on(event, callback, this);\n\n  if (event === BINDED && this.binded) {\n    callback.bind(this)();\n  }\n};\n\nInfiniteAjaxScroll.prototype.off = function off (event, callback) {\n  this.emitter.off(event, callback, this);\n};\n\nInfiniteAjaxScroll.prototype.once = function once (event, callback) {\n    var this$1$1 = this;\n\n  return new Promise(function (resolve) {\n    this$1$1.emitter.once(event, function() { Promise.resolve(callback.apply(this, arguments)).then(resolve); }, this$1$1);\n\n    if (event === BINDED && this$1$1.binded) {\n      callback.bind(this$1$1)();\n      resolve();\n    }\n  })\n};\n\nexport { InfiniteAjaxScroll as default };\n","import React, { useState } from 'react';\nimport { Search, Loader2 } from 'lucide-react';\nimport { useProducts } from '../../hooks/useProducts';\n\ninterface SearchDropdownProps {\n  onClose: () => void;\n}\n\nexport function SearchDropdown({ onClose }: SearchDropdownProps) {\n  const [query, setQuery] = useState('');\n  const { products } = useProducts();\n  const [isSearching, setIsSearching] = useState(false);\n\n  const filteredProducts = products\n    .filter(p => !p.isArchived)\n    .filter(p => \n      p.name.toLowerCase().includes(query.toLowerCase()) ||\n      p.description.toLowerCase().includes(query.toLowerCase())\n    )\n    .slice(0, 5);\n\n  const handleSearch = (e: React.FormEvent) => {\n    e.preventDefault();\n    if (!query.trim()) return;\n    \n    setIsSearching(true);\n    // Simulate search delay\n    setTimeout(() => {\n      window.location.href = `/search?q=${encodeURIComponent(query)}`;\n      onClose();\n    }, 300);\n  };\n\n  return (\n    <div className=\"flex-1\">\n      <form onSubmit={handleSearch} className=\"relative\">\n        <input\n          type=\"text\"\n          value={query}\n          onChange={(e) => setQuery(e.target.value)}\n          placeholder=\"Search products...\"\n          className=\"w-full pl-10 pr-4 py-2 bg-gray-50 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500\"\n          autoFocus\n        />\n        <Search className=\"absolute left-3 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400\" />\n        {isSearching && (\n          <Loader2 className=\"absolute right-3 top-1/2 -translate-y-1/2 w-5 h-5 text-purple-600 animate-spin\" />\n        )}\n      </form>\n\n      {query && (\n        <div className=\"mt-4 space-y-2\">\n          {filteredProducts.map(product => (\n            <a\n              key={product.id}\n              href={`/product/${product.id}`}\n              className=\"flex items-center gap-4 p-2 hover:bg-gray-50 rounded-lg\"\n              onClick={onClose}\n            >\n              <img\n                src={product.images[0]}\n                alt={product.name}\n                className=\"w-12 h-12 object-cover rounded-lg\"\n              />\n              <div>\n                <h3 className=\"font-medium text-gray-900\">{product.name}</h3>\n                <p className=\"text-sm text-gray-500 line-clamp-1\">\n                  {product.description}\n                </p>\n              </div>\n            </a>\n          ))}\n        </div>\n      )}\n    </div>\n  );\n}","import React, { useState } from 'react';\nimport { Search, X } from 'lucide-react';\nimport { SearchDropdown } from './SearchDropdown';\n\nexport function MainHeader() {\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\n\n  return (\n    <header className=\"relative\">\n      {/* Main Header */}\n      <div className=\"bg-white shadow-sm\">\n        <div className=\"container mx-auto px-4\">\n          <div className=\"h-16 flex items-center justify-between\">\n            {/* Spacer div for mobile layout */}\n            <div className=\"w-[40px] md:hidden\"></div>\n\n            {/* Logo */}\n            <a href=\"/\" className=\"h-12\">\n              <img \n                src=\"https://i.imgur.com/KxwIWrp.png\" \n                alt=\"Apristo\" \n                className=\"h-full w-auto\"\n              />\n            </a>\n\n            {/* Center Search Trigger */}\n            <button\n              onClick={() => setIsSearchOpen(true)}\n              className=\"hidden md:flex items-center gap-2 px-4 py-2 bg-gray-50 text-gray-500 rounded-full w-[400px] hover:bg-gray-100 transition-colors\"\n            >\n              <Search className=\"w-5 h-5\" />\n              <span className=\"text-sm\">Search products...</span>\n            </button>\n\n            {/* Mobile Search Button */}\n            <button\n              onClick={() => setIsSearchOpen(true)}\n              className=\"md:hidden p-2 text-gray-500 hover:text-gray-700\"\n            >\n              <Search className=\"w-6 h-6\" />\n            </button>\n          </div>\n        </div>\n      </div>\n\n      {/* Search Overlay */}\n      {isSearchOpen && (\n        <div className=\"fixed inset-0 bg-black/30 z-50\">\n          <div className=\"container mx-auto px-4 pt-16\">\n            <div className=\"relative bg-white rounded-lg shadow-xl p-4\">\n              <button\n                onClick={() => setIsSearchOpen(false)}\n                className=\"absolute right-4 top-4 p-2 text-gray-400 hover:text-gray-600\"\n              >\n                <X className=\"w-6 h-6\" />\n              </button>\n              <SearchDropdown onClose={() => setIsSearchOpen(false)} />\n            </div>\n          </div>\n        </div>\n      )}\n    </header>\n  );\n}","import React from 'react';\nimport { Mail, Phone, MapPin, Facebook, Twitter, Instagram } from 'lucide-react';\n\ninterface FooterSectionProps {\n  title: string;\n  children: React.ReactNode;\n}\n\nfunction FooterSection({ title, children }: FooterSectionProps) {\n  return (\n    <div>\n      <h3 className=\"font-semibold text-lg mb-4 text-gray-100\">{title}</h3>\n      {children}\n    </div>\n  );\n}\n\nexport function Footer() {\n  return (\n    <footer className=\"bg-gray-900 text-gray-400\">\n      <div className=\"container mx-auto px-4 py-12\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8\">\n          {/* About Section */}\n          <div>\n            <img \n              src=\"https://i.imgur.com/uLxDm9R.png\" \n              alt=\"Apristo\" \n              className=\"h-12 mb-6\"\n            />\n            <p className=\"mb-4\">\n              Tanzania's premier marketplace for quality products from oversea at affordable price.\n            </p>\n            <div className=\"flex space-x-4\">\n              <a href=\"#\" className=\"hover:text-purple-400 transition-colors\">\n                <Facebook className=\"w-5 h-5\" />\n              </a>\n              <a href=\"#\" className=\"hover:text-purple-400 transition-colors\">\n                <Twitter className=\"w-5 h-5\" />\n              </a>\n              <a href=\"https://www.instagram.com/apristoapp\" className=\"hover:text-purple-400 transition-colors\">\n                <Instagram className=\"w-5 h-5\" />\n              </a>\n            </div>\n          </div>\n\n          {/* Contact Info */}\n          <FooterSection title=\"Contact Us\">\n            <ul className=\"space-y-3\">\n              <li className=\"flex items-center gap-3\">\n                <Phone className=\"w-5 h-5 text-purple-400\" />\n                <span>+255 753 025 298</span>\n              </li>\n              <li className=\"flex items-center gap-3\">\n                <Mail className=\"w-5 h-5 text-purple-400\" />\n                <a href=\"mailto:info@apristo.com\" className=\"hover:text-purple-400 transition-colors\">\n                  info@apristo.com\n                </a>\n              </li>\n              <li className=\"flex items-start gap-3\">\n                <MapPin className=\"w-5 h-5 text-purple-400 flex-shrink-0\" />\n                <span>Livingstone Binsulum Plaza Ghorofa ya pili, S01 &\nS12</span>\n              </li>\n            </ul>\n          </FooterSection>\n\n          {/* Quick Links */}\n          <FooterSection title=\"Quick Links\">\n            <ul className=\"space-y-2\">\n              <li>\n                <a href=\"/about\" className=\"hover:text-purple-400 transition-colors\">\n                  About Us\n                </a>\n              </li>\n              <li>\n                <a href=\"/faq\" className=\"hover:text-purple-400 transition-colors\">\n                  FAQ\n                </a>\n              </li>\n              <li>\n                <a href=\"/terms\" className=\"hover:text-purple-400 transition-colors\">\n                  Terms & Conditions\n                </a>\n              </li>\n              <li>\n                <a href=\"/privacy\" className=\"hover:text-purple-400 transition-colors\">\n                  Privacy Policy\n                </a>\n              </li>\n              <li>\n                <a href=\"/shipping\" className=\"hover:text-purple-400 transition-colors\">\n                  Shipping Information\n                </a>\n              </li>\n            </ul>\n          </FooterSection>\n\n          {/* Newsletter */}\n          <FooterSection title=\"Newsletter\">\n            <p className=\"mb-4\">\n              Subscribe to our newsletter for updates, deals, and exclusive offers.\n            </p>\n            <form className=\"space-y-3\">\n              <input\n                type=\"email\"\n                placeholder=\"Enter your email\"\n                className=\"w-full px-4 py-2 bg-gray-800 border border-gray-700 rounded-lg focus:outline-none focus:border-purple-400\"\n              />\n              <button\n                type=\"submit\"\n                className=\"w-full px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors\"\n              >\n                Subscribe\n              </button>\n            </form>\n          </FooterSection>\n        </div>\n\n        {/* Bottom Bar */}\n        <div className=\"mt-12 pt-8 border-t border-gray-800 text-center\">\n          <p> {new Date().getFullYear()} Apristo. All rights reserved.</p>\n        </div>\n      </div>\n    </footer>\n  );\n}","import React from 'react';\nimport { MainHeader } from '../components/header/MainHeader';\nimport { Footer } from '../components/footer/FooterSection';\n\ninterface MainLayoutProps {\n  children: React.ReactNode;\n}\n\nexport function MainLayout({ children }: MainLayoutProps) {\n  return (\n    <div className=\"min-h-screen flex flex-col\">\n      <MainHeader />\n      <main className=\"flex-grow bg-gray-50\">\n        {children}\n      </main>\n      <Footer />\n    </div>\n  );\n}","import React from 'react';\nimport { Category } from '../types';\nimport { CATEGORIES } from '../config/constants';\n\ninterface CategoryMenuProps {\n  selectedCategory: Category | 'all';\n  onSelectCategory: (category: Category | 'all') => void;\n}\n\nexport function CategoryMenu({ selectedCategory, onSelectCategory }: CategoryMenuProps) {\n  return (\n    <div className=\"bg-white shadow-md\">\n      <div className=\"container mx-auto\">\n        <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-6 gap-1\">\n          <button\n            onClick={() => onSelectCategory('all')}\n            className={`p-4 text-center hover:bg-purple-50 transition-colors\n              ${selectedCategory === 'all' ? 'text-purple-600 border-b-2 border-purple-600' : 'text-gray-600'}`}\n          >\n            All Categories\n          </button>\n          {CATEGORIES.map((category) => (\n            <button\n              key={category}\n              onClick={() => onSelectCategory(category)}\n              className={`p-4 text-center hover:bg-purple-50 transition-colors\n                ${selectedCategory === category ? 'text-purple-600 border-b-2 border-purple-600' : 'text-gray-600'}`}\n            >\n              {category}\n            </button>\n          ))}\n        </div>\n      </div>\n    </div>\n  );\n}","import React from 'react';\n\ninterface WhatsAppIconProps {\n  className?: string;\n}\n\nexport function WhatsAppIcon({ className = \"w-4 h-4\" }: WhatsAppIconProps) {\n  return (\n    <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className={className}>\n      <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z\"/>\n    </svg>\n  );\n}\n","import React from 'react';\n\ninterface ImageOptimizerProps {\n  src: string;\n  alt: string;\n  width?: number;\n  height?: number;\n  className?: string;\n}\n\nexport function ImageOptimizer({ \n  src, \n  alt, \n  width = 400, \n  height = 300, \n  className \n}: ImageOptimizerProps) {\n  // Default aspect ratio if no dimensions provided\n  const aspectRatio = height / width;\n\n  return (\n    <img\n      src={src}\n      alt={alt}\n      width={width}\n      height={height}\n      loading=\"lazy\"\n      decoding=\"async\"\n      style={{ aspectRatio }}\n      className={className}\n    />\n  );\n}","import React from 'react';\nimport { Clock, Phone } from 'lucide-react';\nimport { WhatsAppIcon } from '../components/icons/WhatsApp';\nimport { ImageOptimizer } from './ImageOptimizer';\nimport { Product } from '../types';\nimport { CONTACT_INFO, SHIPPING_TIME } from '../config/constants';\nimport { useNavigate } from 'react-router-dom';\nimport { formatPrice } from '../utils/formatting';\n\ninterface ProductCardProps {\n  product: Product;\n}\n\nexport function ProductCard({ product }: ProductCardProps) {\n  const navigate = useNavigate();\n  const minPrice = product.priceRanges?.[0]?.price ?? 0;\n\n  const handleCall = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    window.location.href = `tel:${CONTACT_INFO.phone}`;\n  };\n\n  const handleMessage = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    const message = encodeURIComponent(\n      `Hi, I'm interested in purchasing:\\n\\n` +\n      `Product: ${product.name}\\n` +\n      `ID: ${product.id}\\n\\n` +\n      `Please provide more information about pricing and availability.`\n    );\n    window.location.href = `https://wa.me/${CONTACT_INFO.whatsapp}?text=${message}`;\n  };\n\n  const handleClick = () => {\n    window.scrollTo({ top: 0, behavior: 'instant' });\n    navigate(`/product/${product.id}`);\n  };\n\n  return (\n    <div \n      className=\"bg-white rounded-xl shadow-sm hover:shadow-md transition-all duration-200 cursor-pointer overflow-hidden h-[300px] sm:h-[420px] mb-4 sm:mb-0 max-w-[320px] mx-auto group\"\n    >\n      <div \n        onClick={handleClick}\n        className=\"relative h-[140px] sm:h-[250px] overflow-hidden\"\n      >\n        <ImageOptimizer\n          src={product.images?.[0] ?? ''}\n          alt={product.name}\n          className=\"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105\"\n        />\n        {minPrice && (\n          <div className=\"absolute bottom-2 right-2 bg-black/70 backdrop-blur-sm text-white px-3 py-1.5 rounded-full text-sm font-medium\">\n            {formatPrice(minPrice)}\n          </div>\n        )}\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/20 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300\" />\n      </div>\n      <div \n        onClick={handleClick}\n        className=\"p-3 sm:p-4 flex flex-col justify-between h-[160px] sm:h-[170px] cursor-pointer\"\n      >\n        <div>\n          <h3 className=\"text-sm sm:text-lg font-medium line-clamp-2 mb-1 group-hover:text-purple-600 transition-colors\">\n            {product.name}\n          </h3>\n          <p className=\"text-xs sm:text-sm text-gray-600 line-clamp-2 mb-2\">\n            {product.description}\n          </p>\n        </div>\n        \n        <div>\n          <div className=\"flex items-center gap-1 text-xs sm:text-sm text-gray-500 mb-2\">\n            <Clock className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n            <span>{SHIPPING_TIME}</span>\n          </div>\n\n          <div className=\"flex gap-2\">\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                handleCall();\n              }}\n              className=\"flex-1 flex items-center justify-center gap-1 sm:gap-2 bg-purple-600 text-white px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg hover:bg-purple-700 transition-colors text-xs sm:text-sm\"\n            >\n              <Phone className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n              <span>Call</span>\n            </button>\n            <button\n              onClick={(e) => {\n                e.stopPropagation();\n                handleMessage();\n              }}\n              className=\"flex-1 flex items-center justify-center gap-1 sm:gap-2 bg-[#25D366] text-white px-2 sm:px-4 py-1.5 sm:py-2 rounded-lg hover:bg-[#22c55e] transition-colors text-xs sm:text-sm\"\n            >\n              <WhatsAppIcon className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n              <span>WhatsApp</span>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n}","import React, { useEffect, useState } from 'react';\nimport { Product } from '../types';\nimport { ProductCard } from './ProductCard';\n\ninterface RecentProductsProps {\n  fetchProducts: () => Promise<Product[]>; // Function to fetch products\n}\n\nexport function RecentProducts({ fetchProducts }: RecentProductsProps) {\n  const [products, setProducts] = useState<Product[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  useEffect(() => {\n    const loadProducts = async () => {\n      try {\n        const fetchedProducts = await fetchProducts();\n        setProducts(fetchedProducts);\n      } catch (err) {\n        setError('Failed to load products');\n      } finally {\n        setLoading(false);\n      }\n    };\n    \n    loadProducts();\n  }, [fetchProducts]);\n\n  if (loading) return <p>Loading products...</p>;\n  if (error) return <p>{error}</p>;\n\n  if (products.length === 0) return <p>No recently viewed products.</p>;\n\n  return (\n    <div className=\"container mx-auto px-4 py-8\">\n      <h2 className=\"text-xl font-semibold mb-6\">Recently Viewed Products</h2>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n        {products.map(product => {\n          if (!product || !product.id || !product.name || product.price === undefined) {\n            console.warn('Invalid product data:', product);\n            return null;\n          }\n\n          return <ProductCard key={product.id} product={product} />;\n        })}\n      </div>\n    </div>\n  );\n}\n","import { useState, useEffect } from 'react';\nimport { Product } from '../types';\n\nconst MAX_RECENT_PRODUCTS = 5;\n\nexport function useRecentProducts() {\n  const [recentProducts, setRecentProducts] = useState<Product[]>([]);\n\n  const addRecentProduct = (product: Product) => {\n    setRecentProducts(prev => {\n      const filtered = prev.filter(p => p.id !== product.id);\n      return [product, ...filtered].slice(0, MAX_RECENT_PRODUCTS);\n    });\n  };\n\n  return {\n    recentProducts,\n    addRecentProduct\n  };\n}","import React, { useEffect, useRef, useState } from 'react';\nimport InfiniteAjaxScroll from '@webcreate/infinite-ajax-scroll';\nimport { MainLayout } from '../layouts/MainLayout';\nimport { CategoryMenu } from '../components/CategoryMenu';\nimport { ProductCard } from '../components/ProductCard';\nimport { RecentProducts } from '../components/RecentProducts';\nimport { useRecentProducts } from '../hooks/useRecentProducts';\nimport { useProducts } from '../hooks/useProducts';\n\nexport function HomePage() {\n  const { recentProducts } = useRecentProducts();\n  const containerRef = useRef<HTMLDivElement>(null);\n  const loaderRef = useRef<HTMLDivElement>(null);\n  const iasRef = useRef<InfiniteAjaxScroll | null>(null);\n  const [isLastPage, setIsLastPage] = useState(false);\n\n  const {\n    products,\n    loading,\n    error,\n    hasMore,\n    currentPage,\n    setCurrentPage,\n    selectedCategory,\n    setSelectedCategory,\n  } = useProducts();\n\n  // Initialize Infinite Ajax Scroll\n  useEffect(() => {\n    let ias: InfiniteAjaxScroll | null = null;\n\n    const initializeIAS = () => {\n      if (!containerRef.current || !loaderRef.current) return;\n\n      // Ensure there are items before initializing\n      const items = containerRef.current.querySelectorAll('.product-item');\n      if (items.length === 0 && !loading) return;\n\n      ias = new InfiniteAjaxScroll(containerRef.current, {\n        item: '.product-item',\n        next: () => new Promise((resolve) => {\n          if (hasMore && !loading) {\n            setCurrentPage((prev) => prev + 1);\n            resolve(true);\n          } else {\n            resolve(false);\n          }\n        }),\n        spinner: loaderRef.current,\n        delay: 600,\n        bind: false,\n        loadOnScroll: true,\n        logger: false,\n        pagination: false\n      });\n\n      ias.on('last', () => setIsLastPage(true));\n      iasRef.current = ias;\n    };\n\n    // Initialize after a short delay to ensure DOM is ready\n    const timer = setTimeout(initializeIAS, 100);\n\n    return () => {\n      clearTimeout(timer);\n      if (iasRef.current) {\n        iasRef.current.unbind();\n        iasRef.current = null;\n      }\n    };\n  }, []);\n\n  // Bind/unbind IAS when products or hasMore changes\n  useEffect(() => {\n    if (!products.length) return;\n\n    const timer = setTimeout(() => {\n      if (!iasRef.current && containerRef.current && loaderRef.current) {\n        // Re-initialize if not exists\n        const ias = new InfiniteAjaxScroll(containerRef.current, {\n          item: '.product-item',\n          next: () => new Promise((resolve) => {\n            if (hasMore && !loading) {\n              setCurrentPage((prev) => prev + 1);\n              resolve(true);\n            } else {\n              resolve(false);\n            }\n          }),\n          spinner: loaderRef.current,\n          delay: 600,\n          bind: false,\n          loadOnScroll: true,\n          logger: false,\n          pagination: false\n        });\n\n        ias.on('last', () => setIsLastPage(true));\n        iasRef.current = ias;\n      }\n\n      if (iasRef.current) {\n        iasRef.current.unbind();\n        if (hasMore) {\n          iasRef.current.bind();\n        }\n      }\n    }, 100);\n\n    return () => clearTimeout(timer);\n  }, [products, hasMore]);\n\n  // Handle category changes\n  const handleCategoryChange = (category: string) => {\n    if (iasRef.current) {\n      iasRef.current.unbind();\n    }\n    setSelectedCategory(category);\n    setIsLastPage(false);\n  };\n\n  return (\n    <MainLayout>\n      <CategoryMenu\n        selectedCategory={selectedCategory}\n        onSelectCategory={handleCategoryChange}\n      />\n      <div className=\"container mx-auto px-4 py-8\">\n        <h2 className=\"text-2xl font-semibold mb-4\">\n          {selectedCategory === 'all' ? 'All Products' : `${selectedCategory} Products`}\n        </h2>\n        {error && <div className=\"bg-red-50 text-red-600 p-4 rounded-lg mb-6\">Failed to load products</div>}\n        \n        <div className=\"min-h-screen\">\n          <div ref={containerRef} className=\"relative\">\n            <div className=\"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-3 sm:gap-6\">\n              {loading && !products.length ? (\n                Array.from({ length: 10 }).map((_, index) => (\n                  <div key={index} className=\"animate-pulse h-[300px] sm:h-[420px] bg-white rounded-xl overflow-hidden\">\n                    <div className=\"h-[140px] sm:h-[250px] bg-gray-200\" />\n                    <div className=\"p-3 sm:p-4 space-y-3\">\n                      <div className=\"h-4 bg-gray-200 rounded w-3/4\" />\n                      <div className=\"h-4 bg-gray-200 rounded w-1/2\" />\n                      <div className=\"h-4 bg-gray-200 rounded w-2/3\" />\n                    </div>\n                  </div>\n                ))\n              ) : (\n                products.map((product) => (\n                  <div key={product.id} className=\"product-item\">\n                    <ProductCard product={product} />\n                  </div>\n                ))\n              )}\n            </div>\n            \n            <div ref={loaderRef} className=\"loader h-20 flex items-center justify-center\">\n              {loading && products.length > 0 && !isLastPage && (\n                <img\n                  src=\"/infinite.svg\"\n                  alt=\"Loading more products...\"\n                  className=\"w-8 h-8 animate-spin\"\n                />\n              )}\n            </div>\n          </div>\n        </div>\n\n        {recentProducts.length > 0 && (\n          <div className=\"mt-12\">\n            <h2 className=\"text-2xl font-semibold mb-6\">Recently Viewed</h2>\n            <RecentProducts products={recentProducts} />\n          </div>\n        )}\n      </div>\n    </MainLayout>\n  );\n}\n","import React from 'react';\nimport { Phone } from 'lucide-react';\nimport { CONTACT_INFO } from '../../config/constants';\n\n// WhatsApp Icon component\nfunction WhatsAppIcon({ className = \"w-5 h-5\" }) {\n  return (\n    <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className={className}>\n      <path d=\"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z\"/>\n    </svg>\n  );\n}\n\ninterface ProductActionsProps {\n  productName: string;\n  productId: string;\n  productDescription: string;\n}\n\nexport function ProductActions({ productName, productId, productDescription }: ProductActionsProps) {\n  const handleCall = () => {\n    window.location.href = `tel:${CONTACT_INFO.phone}`;\n  };\n\n  const handleMessage = () => {\n    // Format the message with product details\n    const message = encodeURIComponent(\n      `Hi, I'm interested in purchasing:\\n\\n` +\n      `Product: ${productName}\\n` +\n      `ID: ${productId}\\n\\n` +\n      `Please provide more information about pricing and availability.`\n    );\n    \n    // Create WhatsApp URL with formatted message\n    window.location.href = `https://wa.me/${CONTACT_INFO.whatsapp}?text=${message}`;\n  };\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8\">\n      <button\n        onClick={handleCall}\n        className=\"flex items-center justify-center gap-3 bg-purple-600 text-white px-6 py-3 rounded-xl hover:bg-purple-700 transition-colors\"\n      >\n        <Phone className=\"w-5 h-5\" />\n        <span className=\"font-medium\">Call Now</span>\n      </button>\n      <button\n        onClick={handleMessage}\n        className=\"flex items-center justify-center gap-3 bg-[#25D366] text-white px-6 py-3 rounded-xl hover:bg-[#22c55e] transition-colors\"\n      >\n        <WhatsAppIcon />\n        <span className=\"font-medium\">WhatsApp</span>\n      </button>\n    </div>\n  );\n}","import React from 'react';\nimport { Product } from '../../types';\nimport { ProductCard } from '../ProductCard';\n\ninterface RelatedProductsProps {\n  currentProduct: Product;\n  relatedProducts: Product[];\n}\n\nexport function RelatedProducts({ currentProduct, relatedProducts }: RelatedProductsProps) {\n  if (relatedProducts.length === 0) return null;\n\n  return (\n    <div className=\"mt-16 border-t pt-16\">\n      <h2 className=\"text-2xl font-semibold mb-8\">Related Products</h2>\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {relatedProducts.map(product => (\n          <ProductCard key={product.id} product={product} />\n        ))}\n      </div>\n    </div>\n  );\n}","import React, { useState, useEffect } from 'react';\nimport { useParams } from 'react-router-dom';\nimport { supabase } from '../lib/supabase';\nimport { useProduct } from '../hooks/useProducts';\nimport { SHIPPING_TIME } from '../config/constants';\nimport { PriceRangeTable } from './product/PriceRangeTable';\nimport { ProductActions } from './product/ProductActions';\nimport { ProductSpecifications } from './product/ProductSpecifications';\nimport { ImageSlideshow } from './ImageSlideshow';\nimport { RelatedProducts } from './product/RelatedProducts';\nimport { formatProducts } from '../utils/formatting';\nimport { Product } from '../types';\nimport { MainLayout } from '../layouts/MainLayout';\n\ninterface ProductDetailProps {\n  onViewProduct: (product: Product) => void;\n}\n\nexport function ProductDetail({ onViewProduct }: ProductDetailProps) {\n  const { id } = useParams();\n  const { product, loading, error } = useProduct(id!);\n  const [relatedProducts, setRelatedProducts] = useState<Product[]>([]);\n\n  useEffect(() => {\n    async function loadRelatedProducts() {\n      if (!product) return;\n      \n      const { data } = await supabase\n        .from('products')\n        .select(`\n          id,\n          name,\n          description,\n          category,\n          min_order,\n          is_archived,\n          price_ranges!inner (min_quantity, max_quantity, price),\n          product_images!inner (image_url),\n          product_specifications (specification)\n        `)\n        .eq('category', product.category)\n        .neq('id', product.id)\n        .eq('is_archived', false)\n        .limit(4);\n\n      if (data) {\n        setRelatedProducts(formatProducts(data));\n      }\n    }\n\n    loadRelatedProducts();\n  }, [product]);\n\n  // Track product view\n  useEffect(() => {\n    async function trackView() {\n      if (!id) return;\n\n      try {\n        const { data, error: selectError } = await supabase\n          .from('product_views')\n          .select('id, view_count')\n          .eq('product_id', id);\n\n        if (selectError) throw selectError;\n\n        if (data && data.length > 0) {\n          // Update existing view count\n          const { error: updateError } = await supabase\n            .from('product_views')\n            .update({ \n              view_count: data[0].view_count + 1,\n              last_viewed_at: new Date().toISOString()\n            })\n            .eq('product_id', id);\n            \n          if (updateError) throw updateError;\n        } else {\n          // Create new view record\n          const { error: insertError } = await supabase\n            .from('product_views')\n            .insert({ product_id: id });\n            \n          if (insertError) throw insertError;\n        }\n      } catch (error) {\n        console.error('Error tracking product view:', error.message || error);\n        // Continue execution since view tracking is not critical\n      }\n    }\n\n    if (product) {\n      onViewProduct(product);\n      trackView();\n    }\n  }, [product?.id]);\n\n  if (loading) {\n    return (\n      <MainLayout>\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"animate-pulse\">\n            <div className=\"bg-gray-200 h-64 rounded-lg mb-4\"></div>\n            <div className=\"h-8 bg-gray-200 rounded mb-4\"></div>\n            <div className=\"h-4 bg-gray-200 rounded w-2/3 mb-2\"></div>\n            <div className=\"h-4 bg-gray-200 rounded w-1/2\"></div>\n          </div>\n        </div>\n      </MainLayout>\n    );\n  }\n\n  if (error) {\n    return (\n      <MainLayout>\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"text-center text-red-600\">Failed to load product</div>\n        </div>\n      </MainLayout>\n    );\n  }\n\n  if (!product) {\n    return (\n      <MainLayout>\n        <div className=\"container mx-auto px-4 py-8\">\n          <div className=\"text-center text-gray-600\">Product not found</div>\n        </div>\n      </MainLayout>\n    );\n  }\n\n  return (\n    <MainLayout>\n      <div className=\"container mx-auto px-4 py-8 bg-white\">\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8\">\n          {/* Left Column - Image Slideshow */}\n          <div>\n            <ImageSlideshow images={product.images} productName={product.name} />\n          </div>\n\n          {/* Right Column - Product Info */}\n          <div>\n            <h1 className=\"text-3xl font-bold text-gray-800 mb-4\">{product.name}</h1>\n            \n            <PriceRangeTable priceRanges={product.priceRanges} />\n\n            {/* Shipping Time */}\n            <div className=\"mb-6\">\n              <p className=\"text-gray-600\">Shipping Time: {SHIPPING_TIME}</p>\n              <p className=\"text-gray-600\">Minimum Order: {product.minOrder} piece(s)</p>\n            </div>\n\n            <ProductActions \n              productName={product.name}\n              productId={product.id}\n              productDescription={product.description}\n            />\n\n            {/* Product Details */}\n            <div className=\"space-y-8\">\n              <div>\n                <h2 className=\"text-xl font-semibold mb-3\">Product Description</h2>\n                <p className=\"text-gray-600 whitespace-pre-wrap\">{product.description}</p>\n              </div>\n\n              {product.specifications?.length > 0 && (\n                <ProductSpecifications specifications={product.specifications} />\n              )}\n            </div>\n          </div>\n        </div>\n        <RelatedProducts currentProduct={product} relatedProducts={relatedProducts} />\n      </div>\n    </MainLayout>\n  );\n}","import React from 'react';\nimport { MainLayout } from '../layouts/MainLayout';\nimport { Truck, Shield, DollarSign, Package } from 'lucide-react';\n\nexport function AboutPage() {\n  const features = [\n    {\n      icon: <Truck className=\"w-8 h-8 text-purple-600\" />,\n      title: \"Fast Delivery\",\n      description: \"Get your order delivered within 24 hours\"\n    },\n    {\n      icon: <DollarSign className=\"w-8 h-8 text-purple-600\" />,\n      title: \"Affordable Prices\",\n      description: \"We strive to offer competitive pricing on all our products\"\n    },\n    {\n      icon: <Shield className=\"w-8 h-8 text-purple-600\" />,\n      title: \"Top-Quality Products\",\n      description: \"We carefully select only the best for our customers\"\n    },\n    {\n      icon: <Package className=\"w-8 h-8 text-purple-600\" />,\n      title: \"International Selection\",\n      description: \"Access to premium products from around the world\"\n    }\n  ];\n\n  return (\n    <MainLayout>\n      <div className=\"bg-white\">\n        <div className=\"bg-purple-50\">\n          <div className=\"container mx-auto px-4 py-16 text-center\">\n            <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Welcome to Apristo</h1>\n            <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\n              Your gateway to premium international products, delivered right to your doorstep in Africa\n            </p>\n          </div>\n        </div>\n\n        {/* Main Content */}\n        <div className=\"container mx-auto px-4 py-16\">\n          <div className=\"max-w-3xl mx-auto\">\n            <div className=\"prose prose-lg\">\n              <p className=\"text-gray-600 mb-8\">\n                Apristo is a dynamic marketplace committed to making high-quality international products \n                accessible to Africans. Our mission is to bridge the gap between overseas markets and \n                African consumers by providing fast, reliable, and affordable shipping of premium products \n                directly to your doorstep.\n              </p>\n\n              <p className=\"text-gray-600 mb-8\">\n                At Apristo, we carefully curate our product selection to ensure that every item meets \n                the highest standards of quality. Our goal is to offer a seamless shopping experience \n                that empowers you to discover life-changing products without the hassle of international \n                shipping delays.\n              </p>\n\n              <p className=\"text-gray-600 mb-12\">\n                We are more than just a marketplaceApristo is a gateway to new opportunities, helping \n                you access goods that improve your lifestyle, health, and happiness.\n              </p>\n            </div>\n\n            {/* Features Grid */}\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-8 mt-16\">\n              {features.map((feature, index) => (\n                <div \n                  key={index} \n                  className=\"p-6 bg-white border border-gray-100 rounded-xl hover:shadow-lg transition-all hover:-translate-y-1\"\n                >\n                  <div className=\"mb-4\">{feature.icon}</div>\n                  <h3 className=\"text-xl font-semibold mb-2\">{feature.title}</h3>\n                  <p className=\"text-gray-600\">{feature.description}</p>\n                </div>\n              ))}\n            </div>\n\n            {/* Call to Action */}\n            <div className=\"text-center mt-16 p-12 bg-purple-50 rounded-2xl\">\n              <h2 className=\"text-2xl font-bold mb-4\">Join Us Today</h2>\n              <p className=\"text-gray-600 mb-8\">\n                Be part of our journey as we continue to provide convenience, quality, and speed to your doorstep.\n              </p>\n              <a\n                href=\"/\"\n                className=\"inline-block bg-purple-600 text-white px-8 py-3 rounded-lg hover:bg-purple-700 transition-all hover:shadow-lg hover:-translate-y-1\"\n              >\n                Start Shopping\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </MainLayout>\n  );\n}","import React from 'react';\nimport { MainLayout } from '../layouts/MainLayout';\nimport { HelpCircle } from 'lucide-react';\n\ninterface FaqItem {\n  question: string;\n  answer: string;\n}\n\nconst faqs: FaqItem[] = [\n  {\n    question: \"What products do you offer?\",\n    answer: \"We offer a wide range of high-quality international products, including electronics, fashion, beauty products, home goods, health supplements, and more. All items are curated to meet our high standards for quality and value.\"\n  },\n  {\n    question: \"How long does delivery take?\",\n    answer: \"Our standard delivery time is 1-3 hours from order confirmation for most locations. We prioritize fast delivery to ensure you receive your products as quickly as possible.\"\n  },\n  {\n    question: \"What shipping methods do you use?\",\n    answer: \"We use reliable local courier services that specialize in fast, same-day deliveries. This ensures your products arrive quickly and safely.\"\n  },\n  {\n    question: \"Do you deliver to my country?\",\n    answer: \"Yes, we currently deliver to a wide range of African countries. Please check our shipping page for specific locations.\"\n  },\n  {\n    question: \"How do I track my order?\",\n    answer: \"Once your order is dispatched, you'll receive a tracking number via email and SMS. You can use this to track your delivery in real-time.\"\n  },\n  {\n    question: \"What is your return policy?\",\n    answer: \"We offer returns and exchanges within 14 days of receipt, provided the items are in original condition. Please refer to our Returns & Exchanges policy for more details.\"\n  },\n  {\n    question: \"How do I contact customer service?\",\n    answer: \"You can reach our customer service team 24/7 through WhatsApp, phone, or email. We typically respond within minutes to ensure you get the help you need quickly.\"\n  },\n  {\n    question: \"Is my personal information safe with you?\",\n    answer: \"Yes! We take your privacy seriously. Please review our Privacy Policy for more details on how we protect your information.\"\n  }\n];\n\nexport function FaqPage() {\n  return (\n    <MainLayout>\n      <div className=\"bg-white\">\n        {/* Header */}\n        <div className=\"bg-purple-50\">\n          <div className=\"container mx-auto px-4 py-16 text-center\">\n            <HelpCircle className=\"w-16 h-16 text-purple-600 mx-auto mb-6\" />\n            <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Frequently Asked Questions</h1>\n            <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\n              Find answers to common questions about our services, shipping, and policies\n            </p>\n          </div>\n        </div>\n\n        {/* FAQ Content */}\n        <div className=\"container mx-auto px-4 py-16\">\n          <div className=\"max-w-3xl mx-auto\">\n            <div className=\"space-y-8\">\n              {faqs.map((faq, index) => (\n                <div\n                  key={index}\n                  className=\"bg-white border border-gray-100 rounded-xl p-6 hover:shadow-lg transition-all\"\n                >\n                  <h3 className=\"text-xl font-semibold text-gray-900 mb-3\">\n                    {faq.question}\n                  </h3>\n                  <p className=\"text-gray-600\">\n                    {faq.answer}\n                  </p>\n                </div>\n              ))}\n            </div>\n\n            {/* Contact Section */}\n            <div className=\"mt-16 text-center p-8 bg-purple-50 rounded-2xl\">\n              <h2 className=\"text-2xl font-bold mb-4\">Still have questions?</h2>\n              <p className=\"text-gray-600 mb-8\">\n                Can't find the answer you're looking for? Please contact our customer support team.\n              </p>\n              <a\n                href=\"mailto:support@apristo.com\"\n                className=\"inline-block bg-purple-600 text-white px-8 py-3 rounded-lg hover:bg-purple-700 transition-all hover:shadow-lg hover:-translate-y-1\"\n              >\n                Contact Support\n              </a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </MainLayout>\n  );\n}","import React from 'react';\nimport { MainLayout } from '../layouts/MainLayout';\nimport { ScrollText } from 'lucide-react';\n\ninterface TermsSection {\n  title: string;\n  content: string;\n}\n\nconst termsSections: TermsSection[] = [\n  {\n    title: \"1. General Information\",\n    content: \"Apristo is a marketplace that connects customers with high-quality international products. We are committed to offering you a seamless and efficient shopping experience. By using our platform, you agree to our terms outlined in this document.\"\n  },\n  {\n    title: \"2. Account and Registration\",\n    content: \"To place an order with Apristo, you must register an account. You are responsible for maintaining the confidentiality of your account and password.\"\n  },\n  {\n    title: \"3. Orders and Payment\",\n    content: \"All orders placed on Apristo are subject to availability. We accept multiple payment methods, including credit cards and mobile payments. Orders will not be processed until payment is confirmed.\"\n  },\n  {\n    title: \"4. Shipping and Delivery\",\n    content: \"We aim to deliver all products within 24 hours. However, delivery times may vary depending on your location. Any delays or issues will be communicated promptly.\"\n  },\n  {\n    title: \"5. Returns and Cancellations\",\n    content: \"We offer a 14-day return and exchange policy for products in their original condition. Cancellations can be made within 24 hours of placing an order.\"\n  },\n  {\n    title: \"6. Limitation of Liability\",\n    content: \"Apristo is not liable for any damages or losses arising from the use of our products or services, except as required by law.\"\n  },\n  {\n    title: \"7. Modifications to Terms\",\n    content: \"We reserve the right to update or modify these terms and conditions at any time. Please check this page periodically for updates.\"\n  }\n];\n\nexport function TermsPage() {\n  return (\n    <MainLayout>\n      <div className=\"bg-white\">\n        {/* Header */}\n        <div className=\"bg-purple-50\">\n          <div className=\"container mx-auto px-4 py-16 text-center\">\n            <ScrollText className=\"w-16 h-16 text-purple-600 mx-auto mb-6\" />\n            <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Terms & Conditions</h1>\n            <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\n              Please read these terms carefully before using our services\n            </p>\n          </div>\n        </div>\n\n        {/* Terms Content */}\n        <div className=\"container mx-auto px-4 py-16\">\n          <div className=\"max-w-3xl mx-auto\">\n            <div className=\"prose prose-lg\">\n              <p className=\"text-gray-600 mb-8\">\n                Welcome to Apristo. These terms and conditions outline the rules and regulations\n                for the use of Apristo's website and services. By accessing or using our services,\n                you agree to comply with these terms.\n              </p>\n\n              <div className=\"space-y-8\">\n                {termsSections.map((section, index) => (\n                  <div key={index} className=\"bg-white rounded-xl\">\n                    <h2 className=\"text-xl font-semibold text-gray-900 mb-3\">\n                      {section.title}\n                    </h2>\n                    <p className=\"text-gray-600\">\n                      {section.content}\n                    </p>\n                  </div>\n                ))}\n              </div>\n\n              {/* Last Updated */}\n              <div className=\"mt-16 pt-8 border-t border-gray-100\">\n                <p className=\"text-sm text-gray-500\">\n                  Last updated: {new Date().toLocaleDateString()}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </MainLayout>\n  );\n}","import React from 'react';\nimport { MainLayout } from '../layouts/MainLayout';\nimport { Shield } from 'lucide-react';\n\ninterface PrivacySection {\n  title: string;\n  content: string;\n}\n\nconst privacySections: PrivacySection[] = [\n  {\n    title: \"1. Information We Collect\",\n    content: \"When you use our website or services, we may collect personal information such as your name, email address, shipping address, and payment information. This data is used to process your orders and improve your shopping experience.\"\n  },\n  {\n    title: \"2. How We Use Your Information\",\n    content: \"We use your personal information to process and fulfill your orders, communicate with you about your orders, improve our services and website functionality, and send promotional materials (with your consent).\"\n  },\n  {\n    title: \"3. Data Security\",\n    content: \"We use encryption and secure payment systems to ensure that your information is safe. We will never sell or rent your personal data to third parties without your consent.\"\n  },\n  {\n    title: \"4. Cookies\",\n    content: \"We use cookies to enhance your browsing experience on our website. Cookies help us personalize content and track website traffic.\"\n  },\n  {\n    title: \"5. Your Rights\",\n    content: \"You have the right to access, correct, or delete your personal data. You can contact us at any time to request these changes.\"\n  },\n  {\n    title: \"6. Changes to This Policy\",\n    content: \"We may update this Privacy Policy from time to time. Any changes will be posted on this page, so please check back periodically.\"\n  }\n];\n\nexport function PrivacyPage() {\n  return (\n    <MainLayout>\n      <div className=\"bg-white\">\n        {/* Header */}\n        <div className=\"bg-purple-50\">\n          <div className=\"container mx-auto px-4 py-16 text-center\">\n            <Shield className=\"w-16 h-16 text-purple-600 mx-auto mb-6\" />\n            <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Privacy Policy</h1>\n            <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\n              Your Privacy Matters to Us\n            </p>\n          </div>\n        </div>\n\n        {/* Privacy Content */}\n        <div className=\"container mx-auto px-4 py-16\">\n          <div className=\"max-w-3xl mx-auto\">\n            <div className=\"prose prose-lg\">\n              <p className=\"text-gray-600 mb-8\">\n                At Apristo, we value your privacy and are committed to protecting your personal \n                information. This Privacy Policy outlines how we collect, use, and safeguard your data.\n              </p>\n\n              <div className=\"space-y-8\">\n                {privacySections.map((section, index) => (\n                  <div key={index} className=\"bg-white rounded-xl\">\n                    <h2 className=\"text-xl font-semibold text-gray-900 mb-3\">\n                      {section.title}\n                    </h2>\n                    <p className=\"text-gray-600\">\n                      {section.content}\n                    </p>\n                  </div>\n                ))}\n              </div>\n\n              {/* Contact Section */}\n              <div className=\"mt-16 p-8 bg-purple-50 rounded-2xl\">\n                <h2 className=\"text-2xl font-bold mb-4\">Questions About Privacy?</h2>\n                <p className=\"text-gray-600 mb-8\">\n                  If you have any questions about our privacy practices, please don't hesitate to contact us.\n                </p>\n                <a\n                  href=\"mailto:privacy@apristo.com\"\n                  className=\"inline-block bg-purple-600 text-white px-8 py-3 rounded-lg hover:bg-purple-700 transition-all hover:shadow-lg hover:-translate-y-1\"\n                >\n                  Contact Privacy Team\n                </a>\n              </div>\n\n              {/* Last Updated */}\n              <div className=\"mt-16 pt-8 border-t border-gray-100\">\n                <p className=\"text-sm text-gray-500\">\n                  Last updated: {new Date().toLocaleDateString()}\n                </p>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </MainLayout>\n  );\n}","import React from 'react';\nimport { MainLayout } from '../layouts/MainLayout';\nimport { Truck, Clock, MapPin, AlertCircle, Package } from 'lucide-react';\n\ninterface ShippingSection {\n  title: string;\n  content: string;\n  icon: React.ReactNode;\n}\n\nconst shippingSections: ShippingSection[] = [\n  {\n    title: \"1. Shipping Speed\",\n    content: `We pride ourselves on our fast delivery service. Our standard delivery time is 1-3 hours from order confirmation. We understand the importance of quick delivery and strive to get your products to you as fast as possible.`,\n    icon: <Clock className=\"w-8 h-8 text-purple-600\" />\n  },\n  {\n    title: \"2. Shipping Costs\",\n    content: \"Shipping fees are calculated based on your order size, weight, and delivery location. You'll be able to view the exact shipping cost at checkout before you complete your purchase.\",\n    icon: <Package className=\"w-8 h-8 text-purple-600\" />\n  },\n  {\n    title: \"3. Order Tracking\",\n    content: \"Once your order is dispatched, you'll receive a tracking number via email and SMS. This allows you to monitor your delivery in real-time.\",\n    icon: <Truck className=\"w-8 h-8 text-purple-600\" />\n  },\n  {\n    title: \"4. Delivery Areas\",\n    content: \"We currently offer shipping to most African countries. If you are unsure if we deliver to your location, please contact us for confirmation.\",\n    icon: <MapPin className=\"w-8 h-8 text-purple-600\" />\n  },\n  {\n    title: \"5. Shipping Issues\",\n    content: \"If you experience any issues with your delivery, our customer service team is available 24/7 to assist you. Please contact us immediately and we'll resolve any problems.\",\n    icon: <AlertCircle className=\"w-8 h-8 text-purple-600\" />\n  }\n];\n\nexport function ShippingPage() {\n  return (\n    <MainLayout>\n      <div className=\"bg-white\">\n        {/* Header */}\n        <div className=\"bg-purple-50\">\n          <div className=\"container mx-auto px-4 py-16 text-center\">\n            <Truck className=\"w-16 h-16 text-purple-600 mx-auto mb-6\" />\n            <h1 className=\"text-4xl font-bold text-gray-900 mb-4\">Shipping Information</h1>\n            <p className=\"text-xl text-gray-600 max-w-2xl mx-auto\">\n              Fast and Reliable Shipping with Apristo\n            </p>\n          </div>\n        </div>\n\n        {/* Shipping Content */}\n        <div className=\"container mx-auto px-4 py-16\">\n          <div className=\"max-w-3xl mx-auto\">\n            <div className=\"prose prose-lg\">\n              <p className=\"text-gray-600 mb-12\">\n                At Apristo, we strive to get your orders to you as quickly as possible. \n                Here's everything you need to know about our shipping process.\n              </p>\n\n              <div className=\"space-y-12\">\n                {shippingSections.map((section, index) => (\n                  <div \n                    key={index} \n                    className=\"bg-white rounded-xl p-6 border border-gray-100 hover:shadow-lg transition-all\"\n                  >\n                    <div className=\"flex items-start gap-4\">\n                      <div className=\"p-3 bg-purple-50 rounded-lg\">\n                        {section.icon}\n                      </div>\n                      <div>\n                        <h2 className=\"text-xl font-semibold text-gray-900 mb-3\">\n                          {section.title}\n                        </h2>\n                        <p className=\"text-gray-600\">\n                          {section.content}\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n                ))}\n              </div>\n\n              {/* Contact Section */}\n              <div className=\"mt-16 p-8 bg-purple-50 rounded-2xl text-center\">\n                <h2 className=\"text-2xl font-bold mb-4\">Need Help with Shipping?</h2>\n                <p className=\"text-gray-600 mb-8\">\n                  Our customer service team is here to help with any shipping-related questions.\n                </p>\n                <a\n                  href=\"mailto:shipping@apristo.com\"\n                  className=\"inline-block bg-purple-600 text-white px-8 py-3 rounded-lg hover:bg-purple-700 transition-all hover:shadow-lg hover:-translate-y-1\"\n                >\n                  Contact Shipping Support\n                </a>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </MainLayout>\n  );\n}","import { createBrowserRouter } from 'react-router-dom';\nimport { Dashboard } from './pages/admin/Dashboard';\nimport { ProductList } from './pages/admin/ProductList';\nimport { AdminProductDetail } from './pages/admin/ProductDetail';\nimport { Settings } from './pages/admin/Settings';\nimport { Login } from './pages/admin/Login';\nimport { AuthGuard } from './components/admin/AuthGuard';\nimport { HomePage } from './pages/HomePage';\nimport { ProductDetail } from './components/ProductDetail';\nimport { AboutPage } from './pages/AboutPage';\nimport { FaqPage } from './pages/FaqPage';\nimport { TermsPage } from './pages/TermsPage';\nimport { PrivacyPage } from './pages/PrivacyPage';\nimport { ShippingPage } from './pages/ShippingPage';\n\n// Get base path from environment or default to '/'\nconst basePath = import.meta.env.BASE_URL || '/';\n\nexport const router = createBrowserRouter(\n  [\n    // Admin Routes\n    {\n      path: \"/admin/login\",\n      element: <Login />,\n      loader: () => {\n        window.scrollTo({ top: 0, behavior: 'instant' });\n        return null;\n      }\n    },\n    {\n      path: \"/admin\",\n      element: <AuthGuard><Dashboard /></AuthGuard>,\n      loader: () => {\n        window.scrollTo({ top: 0, behavior: 'instant' });\n        return null;\n      }\n    },\n    {\n      path: \"/admin/products\",\n      element: <AuthGuard><ProductList /></AuthGuard>,\n      loader: () => {\n        window.scrollTo({ top: 0, behavior: 'instant' });\n        return null;\n      }\n    },\n    {\n      path: \"/admin/products/:id\",\n      element: <AuthGuard><AdminProductDetail /></AuthGuard>,\n      loader: () => {\n        window.scrollTo({ top: 0, behavior: 'instant' });\n        return null;\n      }\n    },\n    {\n      path: \"/admin/settings\",\n      element: <AuthGuard><Settings /></AuthGuard>,\n      loader: () => {\n        window.scrollTo({ top: 0, behavior: 'instant' });\n        return null;\n      }\n    },\n    // Public Routes\n    {\n      path: \"/\",\n      element: <HomePage />,\n      loader: () => {\n        window.scrollTo({ top: 0, behavior: 'instant' });\n        return null;\n      }\n    },\n    {\n      path: \"/product/:id\",\n      element: <ProductDetail onViewProduct={() => {}} />,\n      loader: () => {\n        window.scrollTo({ top: 0, behavior: 'instant' });\n        return null;\n      }\n    },\n    {\n      path: \"/about\",\n      element: <AboutPage />,\n      loader: () => {\n        window.scrollTo({ top: 0, behavior: 'instant' });\n        return null;\n      }\n    },\n    {\n      path: \"/faq\",\n      element: <FaqPage />,\n      loader: () => {\n        window.scrollTo({ top: 0, behavior: 'instant' });\n        return null;\n      }\n    },\n    {\n      path: \"/terms\",\n      element: <TermsPage />,\n      loader: () => {\n        window.scrollTo({ top: 0, behavior: 'instant' });\n        return null;\n      }\n    },\n    {\n      path: \"/privacy\",\n      element: <PrivacyPage />,\n      loader: () => {\n        window.scrollTo({ top: 0, behavior: 'instant' });\n        return null;\n      }\n    },\n    {\n      path: \"/shipping\",\n      element: <ShippingPage />,\n      loader: () => {\n        window.scrollTo({ top: 0, behavior: 'instant' });\n        return null;\n      }\n    }\n  ],\n  {\n    basename: basePath, // Add basename for GitHub Pages\n    future: {\n      v7_startTransition: true,\n      v7_normalizeFormMethod: true,\n      v7_prependBasename: true,\n      v7_relativeSplatPath: true,\n      v7_skipErrorBoundaryBindings: true,\n      v7_skipHostCheck: true,\n      v7_skipRedirectHandling: true,\n      v7_skipActionErrorBoundaries: true,\n      v7_skipActionAbortHanding: true,\n      v7_skipActionAbortWhenPreloading: true,\n      v7_skipDataLoaderSerialEffectCalls: true,\n      v7_skipErrorBoundaryReRendering: true,\n      v7_skipErrorBoundaryRendering: true,\n      v7_skipErrorBoundaryErrorHandling: true,\n      v7_skipErrorBoundaryErrorReporting: true,\n      v7_skipErrorBoundaryErrorThrowing: true,\n      v7_skipErrorBoundaryErrorPropagation: true,\n      v7_skipErrorBoundaryErrorRecovery: true,\n      v7_skipActionErrorRevalidation: true,\n    }\n  }\n);","import React from 'react';\nimport { RouterProvider } from 'react-router-dom';\nimport { router } from './router';\nimport { useRecentProducts } from './hooks/useRecentProducts';\n\nexport function App() {\n  const { addRecentProduct } = useRecentProducts();\n\n  // Update the onViewProduct handler in the router\n  const updatedRouter = {\n    ...router,\n    routes: router.routes.map(route => {\n      if (route.path === '/product/:id') {\n        return {\n          ...route,\n          element: React.cloneElement(route.element as React.ReactElement, {\n            onViewProduct: addRecentProduct\n          })\n        };\n      }\n      return route;\n    })\n  };\n\n  return <RouterProvider router={updatedRouter as typeof router} />;\n}\n\nexport default App;","import { supabase } from '../supabase';\nimport { products as sampleProducts } from '../../data/products';\n\n// Initialize database connection\nexport async function initDatabase() {\n  try {\n    // First check if we can connect to Supabase\n    const { error: healthCheckError } = await supabase\n      .from('health_check')\n      .select('*')\n      .limit(1);\n\n    if (healthCheckError) {\n      console.log('Using fallback data provider...');\n      return;\n    }\n\n    // Check products table\n    const { count, error: countError } = await supabase \n      .from('products')\n      .select('*', { count: 'exact', head: true });\n\n    if (countError?.message?.includes('does not exist')) {\n      console.log('Tables not found, waiting for migrations to complete...');\n      return;\n    }\n    \n    // If no products exist, seed with sample data\n    if (count === 0) {\n      console.log('Seeding database with sample products...');\n      \n      // Insert all products in parallel\n      const insertProducts = async () => {\n        const results = await Promise.all(sampleProducts.map(async (product) => {\n        const { error: productError } = await supabase\n          .from('products')\n          .insert({\n            id: product.id,\n            name: product.name,\n            description: product.description,\n            category: product.category,\n            min_order: product.minOrder\n          });\n\n        if (productError) throw productError;\n          return product.id;\n        }));\n        return results;\n      };\n\n      // Wait for all products to be inserted\n      const productIds = await insertProducts();\n      \n      // Insert related data for all products\n      const relatedDataPromises = productIds.flatMap(productId => {\n        const product = sampleProducts.find(p => p.id === productId)!;\n        return [\n          supabase\n            .from('product_images')\n            .insert(\n              product.images.map((url, index) => ({\n                product_id: product.id,\n                image_url: url,\n                display_order: index\n              }))\n            ),\n          supabase\n            .from('price_ranges')\n            .insert(\n              product.priceRanges.map(range => ({\n                product_id: product.id,\n                min_quantity: range.minQuantity,\n                max_quantity: range.maxQuantity,\n                price: range.price\n              }))\n            ),\n          product.specifications && [\n            supabase\n              .from('product_specifications')\n              .insert(\n                product.specifications.map(spec => ({\n                  product_id: product.id,\n                  specification: spec\n                }))\n              ) \n          ]\n        ].filter(Boolean);\n      });\n\n      await Promise.all(relatedDataPromises);\n    }\n\n    console.log('Database connection established');\n  } catch (error) {\n    console.error('Database initialization error:', error);\n    console.log('Falling back to local data...');\n  }\n}\n\nconsole.log('Database connection established');\n\nexport { supabase };","import { StrictMode } from 'react';\nimport { createRoot } from 'react-dom/client';\nimport App from './App.tsx';\nimport { initDatabase } from './lib/database/init';\nimport './index.css';\n\n// Initialize database before rendering\ninitDatabase().catch(console.error);\n\ncreateRoot(document.getElementById('root')!).render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n"],"names":["f","require$$0","k","l","m","n","p","q","c","a","g","b","d","e","h","reactJsxRuntime_production_min","jsxRuntimeModule","createRoot","AdminNav","menuItems","location","useLocation","isMobileMenuOpen","setIsMobileMenuOpen","React","jsxs","Fragment","jsx","Menu","item","index","Link","AdminLayout","children","title","description","LayoutGrid","Package","Settings","StatCard","label","value","icon","color","supabaseUrl","supabaseKey","supabaseInstance","getSupabaseClient","createClient","supabase","DashboardStats","stats","setStats","useState","loading","setLoading","useEffect","loadStats","totalProducts","countError","categories","categoriesError","priceData","priceError","productPrices","pr","prices","avgPrice","acc","price","error","i","statCards","ShoppingCart","DollarSign","stat","formatProducts","products","product","range","img","_a","spec","formatPrice","formatQuantityRange","fetchProductById","id","data","provider","fallbackProduct","createProduct","productData","user","authError","roleData","roleError","productId","timestamp","productError","imagesError","url","_b","pricesError","_c","specsError","errorMessage","updateProduct","deleteImagesError","deletePricesError","deleteSpecsError","deleteProduct","toggleArchiveProduct","isArchived","checkConnection","PRODUCTS_PER_PAGE","useProducts","setProducts","setError","totalCount","setTotalCount","currentPage","setCurrentPage","searchQuery","setSearchQuery","selectedCategory","setSelectedCategory","hasMore","setHasMore","loadProducts","useCallback","query","fetchError","count","formattedProducts","prev","useProduct","setProduct","loadProduct","err","RecentProducts","recentProducts","Clock","Dashboard","ProductTable","onRefresh","onEdit","deletingId","setDeletingId","archivingId","setArchivingId","handleDelete","handleArchive","currentStatus","Pencil","ArchiveRestore","Archive","Trash2","CONTACT_INFO","SHIPPING_TIME","CATEGORIES","FormField","PriceRangeInputs","required","defaultValues","suffix","placeholder","ProductForm","onClose","onSuccess","useRef","handleSubmit","formData","name","category","minOrder","images","price1","minQuantity1","maxQuantity1","priceRanges","price2","minQuantity2","maxQuantity2","result","X","Pagination","totalPages","onPageChange","pages","_","getVisiblePages","ChevronLeft","page","ChevronRight","ProductList","showForm","setShowForm","editingProduct","setEditingProduct","reloadProducts","handleEdit","handleCloseForm","handleSearch","Search","Plus","ProductActions","isDeleting","setIsDeleting","isArchiving","setIsArchiving","ImageSlideshow","productName","currentIndex","setCurrentIndex","goToNext","prevIndex","goToPrevious","image","PriceRangeTable","ProductSpecifications","specifications","AdminProductDetail","useParams","reloadProduct","showEditForm","setShowEditForm","delay","ms","resolve","signIn","email","password","normalizedEmail","retries","lastError","signOut","getUsers","users","u","getCurrentUserRole","updateUserRole","userId","role","setUsers","currentUserRole","setCurrentUserRole","loadData","usersData","handleLogout","handleRoleChange","newRole","LogOut","Login","setEmail","setPassword","connectionError","setConnectionError","navigate","useNavigate","init","session","handleRetry","trimmedEmail","message","useAuth","setUser","loadUser","currentUser","userError","subscription","event","AuthGuard","isCheckingRole","setIsCheckingRole","hasValidRole","setHasValidRole","mounted","checkUserRole","Navigate","isDomNode","x","isDomNodeList","prototypeToString","regex","tealight","target","context","hasOwn","toStr","defineProperty","gOPD","isArray","arr","isPlainObject","obj","hasOwnConstructor","hasIsPrototypeOf","key","setProperty","options","getProperty","extend","src","copy","copyIsArray","clone","length","deep","FUNC_ERROR_TEXT","NAN","symbolTag","reTrim","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","freeGlobal","global","freeSelf","root","objectProto","objectToString","nativeMax","nativeMin","now","debounce","func","wait","lastArgs","lastThis","maxWait","timerId","lastCallTime","lastInvokeTime","leading","maxing","trailing","toNumber","isObject","invokeFunc","time","args","thisArg","leadingEdge","timerExpired","remainingWait","timeSinceLastCall","timeSinceLastInvoke","shouldInvoke","trailingEdge","cancel","flush","debounced","isInvoking","throttle","type","isObjectLike","isSymbol","other","isBinary","lodash_throttle","E","callback","ctx","self","listener","evtArr","len","evts","liveEvents","tinyEmitterModule","defaults$3","Assert","elementOrSelector","property","$element","$","fn","getScrollPosition","el","supportPageOffset","isCSS1Compat","getRootRect","rootRect","html","body","getDistanceToFold","sentinel","scrollContainerScrollPosition","scrollContainerRootRect","scrollYTop","boundingRect","scrollYBottom","bottom","APPEND","APPENDED","PREPEND","PREPENDED","BINDED","UNBINDED","HIT","TOP","LOAD","LOADED","ERROR","FIRST","LAST","NEXT","NEXTED","PREV","PREVED","READY","SCROLLED","RESIZED","PAGE","PREFILL","PREFILLED","events","defaultLastScroll","calculateScroll","scrollContainer","lastScroll","scroll","scrollHandler","ias","resizeHandler","nextHandler","pageIndex","lastResponse","nextEl","nextUrl","hasNextEl","prevHandler","prevEl","prevUrl","defaults$2","expand$3","this$1$1","els","defaults$1","element","expand$2","Spinner","startTime","endTime","diff","_appendFn","items","parent","last","defaultLogger","expand$1","Logger","logger","getPageBreak","pageBreaks","scrollTop","scrollBottom","Paging","loaded","pageBreak","defaults","expand","when","Trigger","appendFn","sibling","insert","prependFn","first","NativeResizeObserver","EventListenerResizeObserver","NativeWrapperResizeObserver","PollingResizeObserver","height","ResizeObserverFactory","Prefill","distance","hasNextUrl","InfiniteAjaxScroll","container","Emitter","ready","hasPrevUrl","reject","xhr","loadEvent","finalUrl","method","responseType","headers","header","executor","scrollPositionStart","topStart","scrollPositionEnd","topEnd","deltaY","_rootRect","_sentinel","scrollPosition","distanceTop","distanceBottom","SearchDropdown","setQuery","isSearching","setIsSearching","filteredProducts","Loader2","MainHeader","isSearchOpen","setIsSearchOpen","FooterSection","Footer","Facebook","Twitter","Instagram","Phone","Mail","MapPin","MainLayout","CategoryMenu","onSelectCategory","WhatsAppIcon","className","ImageOptimizer","alt","width","aspectRatio","ProductCard","minPrice","handleCall","handleMessage","handleClick","fetchProducts","fetchedProducts","MAX_RECENT_PRODUCTS","useRecentProducts","setRecentProducts","filtered","HomePage","containerRef","loaderRef","iasRef","isLastPage","setIsLastPage","timer","handleCategoryChange","productDescription","RelatedProducts","currentProduct","relatedProducts","ProductDetail","onViewProduct","setRelatedProducts","loadRelatedProducts","trackView","selectError","updateError","insertError","AboutPage","features","Truck","Shield","feature","faqs","FaqPage","HelpCircle","faq","termsSections","TermsPage","ScrollText","section","privacySections","PrivacyPage","shippingSections","AlertCircle","ShippingPage","basePath","router","createBrowserRouter","App","addRecentProduct","updatedRouter","route","RouterProvider","initDatabase","healthCheckError","relatedDataPromises","sampleProducts","StrictMode"],"mappings":"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","x_google_ignoreList":[0,1,2,33,34,35,36,37,38,39]}